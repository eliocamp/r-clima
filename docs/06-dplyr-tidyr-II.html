<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Manipulaci√≥n de datos ordenados usando {dplyr} y {tidyr} II</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<script src="site_libs/accessible-code-block-0.0.1/empty-anchor.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
      code.sourceCode > span { display: inline-block; line-height: 1.25; }
  code.sourceCode > span { color: inherit; text-decoration: inherit; }
  code.sourceCode > span:empty { height: 1.2em; }
  .sourceCode { overflow: visible; }
  code.sourceCode { white-space: pre; position: relative; }
  div.sourceCode { margin: 1em 0; }
  pre.sourceCode { margin: 0; }
  @media screen {
  div.sourceCode { overflow: auto; }
  }
  @media print {
  code.sourceCode { white-space: pre-wrap; }
  code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
  }
  pre.numberSource code
    { counter-reset: source-line 0; }
  pre.numberSource code > span
    { position: relative; left: -4em; counter-increment: source-line; }
  pre.numberSource code > span > a:first-child::before
    { content: counter(source-line);
      position: relative; left: -1em; text-align: right; vertical-align: baseline;
      border: none; display: inline-block;
      -webkit-touch-callout: none; -webkit-user-select: none;
      -khtml-user-select: none; -moz-user-select: none;
      -ms-user-select: none; user-select: none;
      padding: 0 4px; width: 4em;
      color: #aaaaaa;
    }
  pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
  div.sourceCode
    {  background-color: #f8f8f8; }
  @media screen {
  code.sourceCode > span > a:first-child::before { text-decoration: underline; }
  }
  code span.al { color: #ef2929; } /* Alert */
  code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
  code span.at { color: #c4a000; } /* Attribute */
  code span.bn { color: #0000cf; } /* BaseN */
  code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
  code span.ch { color: #4e9a06; } /* Char */
  code span.cn { color: #000000; } /* Constant */
  code span.co { color: #8f5902; font-style: italic; } /* Comment */
  code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
  code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
  code span.dt { color: #204a87; } /* DataType */
  code span.dv { color: #0000cf; } /* DecVal */
  code span.er { color: #a40000; font-weight: bold; } /* Error */
  code span.ex { } /* Extension */
  code span.fl { color: #0000cf; } /* Float */
  code span.fu { color: #000000; } /* Function */
  code span.im { } /* Import */
  code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
  code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
  code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
  code span.ot { color: #8f5902; } /* Other */
  code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
  code span.sc { color: #000000; } /* SpecialChar */
  code span.ss { color: #4e9a06; } /* SpecialString */
  code span.st { color: #4e9a06; } /* String */
  code span.va { color: #000000; } /* Variable */
  code span.vs { color: #4e9a06; } /* VerbatimString */
  code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
    </style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "Óâô";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "Óâô";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R para Clima</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="hoja-de-ruta.html">Hoja de ruta</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Temas
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="01-introduccion.html">Introducci√≥n</a>
    </li>
    <li>
      <a href="02-proyectos.html">Proyectos de RStudio</a>
    </li>
    <li>
      <a href="03-reportes-I.html">Reportes I</a>
    </li>
    <li>
      <a href="04-lectura.html">Lectura de datos</a>
    </li>
    <li>
      <a href="05-dplyr.html">Manipulaci√≥n de datos I</a>
    </li>
    <li>
      <a href="06-dplyr-tidyr-II.html">Manipulaci√≥n de datos II</a>
    </li>
    <li>
      <a href="07-graficos-I.html">Gr√°ficos I</a>
    </li>
    <li>
      <a href="08-lubridate.html">Manipulaci√≥n fechas</a>
    </li>
    <li>
      <a href="09-graficos-II.html">Gr√°ficos II</a>
    </li>
    <li>
      <a href="10-graficos-III.html">Gr√°ficos para publicar</a>
    </li>
    <li>
      <a href="11-reportes-II.html">Reportes II</a>
    </li>
    <li>
      <a href="12-publicar.html">Publicar reportes</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Desaf√≠os
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="desafio-1.html">Leer y analizar datos</a>
    </li>
    <li>
      <a href="desafio-2.html">Graficar datos</a>
    </li>
    <li>
      <a href="desafio-3.html">Generar un informe</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Manipulaci√≥n de datos ordenados usando {dplyr} y {tidyr} II</h1>

</div>


<p>Un mismo conjunto de datos puede estar en un formato ‚Äúancho‚Äù o ‚Äúlargo‚Äù. Los datos en formato ‚Äúlargo‚Äù o ‚Äútidy‚Äù, son aquellos en los cuales:</p>
<ul>
<li>cada fila es una observaci√≥n</li>
<li>cada columna es una variable</li>
</ul>
<p>En el formato ‚Äúancho‚Äù es un poco m√°s complejo de definirlo pero la idea general es que:</p>
<ul>
<li>cada fila es un ‚Äú√≠tem‚Äù</li>
<li>cada columna es una variable</li>
</ul>
<p><img src="img/largo-ancho.png" /></p>
<p>Una tabla en formato largo va a tener una cierta cantidad de columnas que cumplen el rol de identificadores y cuya combinaci√≥n identifican una √∫nica observaci√≥n y una √∫nica columna con el valor de la observaci√≥n. En el ejemplo de arriba, <code>pais</code> y <code>anio</code> son las columnas identificadoras y <code>casos</code> es la columna que contiene el valor de las observaciones.</p>
<p>En una tabla ancha, cada observaci√≥n √∫nica se identifica a partir de la intersecci√≥n de filas y columnas. En el ejemplo, los pa√≠ses est√°n en las filas y los a√±os en las columnas.</p>
<p>En general, el formato ancho es m√°s compacto y legible por humanos mientras que el largo es m√°s f√°cil de manejar con la computadora. Si te fij√°s en las tablas de arriba, es m√°s f√°cil comparar los valores entre pa√≠ses y entre a√±os en la tabla ancha. Pero el nombre de las columnas (‚Äú1999‚Äù, ‚Äú2000‚Äù) en realidad ¬°son datos! Adem√°s este formato se empieza a complicar en cuanto hay m√°s de dos identificadores.</p>
<p>Un mismo set de datos puede ser representado de forma completamente ‚Äúlarga‚Äù, completamente ‚Äúancha‚Äù o ‚Äìlo que es m√°s com√∫n‚Äì en un formato intermedio pero no existe una forma ‚Äúcorrecta‚Äù de organizar los datos; cada una tiene sus ventajas y desventajas. Por esto es que es muy normal que durante un an√°lisis los datos vayan y vuelvan entre distintos formatos dependiendo de los m√©todos estad√≠sticos que se le aplican. Entonces, aprender a transformar datos anchos en largos y viceversa es un habilidad muy √∫til.</p>
<div class="alert alert-info">
<p><strong>Desaf√≠o</strong></p>
<p>En las tablas de ejemplo cada pa√≠s tiene el un valor observado de ‚Äúcasos‚Äù para cada a√±o. ¬øC√≥mo agregar√≠as una nueva variable con informaci√≥n sobre ‚Äúprecios‚Äù? Dibuj√° un esquema en papel y l√°piz en formato ancho y uno en formato largo. ¬øEn qu√© formato es m√°s ‚Äúnatural‚Äù esa extensi√≥n?</p>
</div>
<p>En esta secci√≥n vas a usar el paquete {tidyr} para manipular datos. Si no lo ten√©s instalado, instalalo con el comando:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">install.packages</span>(<span class="st">&quot;tidyr&quot;</span>)</span></code></pre></div>
<p>Y luego carg√° {tidyr} y {dplyr} (que usaste en <a href="05-dplyr.html">una secci√≥n anterior</a>) con:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">library</span>(tidyr)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw">library</span>(dplyr)</span></code></pre></div>
<div id="de-ancho-a-largo-con-pivot_longer" class="section level2">
<h2>De ancho a largo con <code>pivot_longer()</code></h2>
<p>En secciones anteriores usaste datos de una estaci√≥n meteorol√≥gica en Bariloche:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>bariloche &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="st">&quot;datos/bariloche_enlimpio.csv&quot;</span>)</span></code></pre></div>
<pre><code>## 
## ‚îÄ‚îÄ Column specification ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
## cols(
##   .default = col_logical(),
##   Fecha = col_datetime(format = &quot;&quot;),
##   Temperatura_Abrigo_150cm = col_double(),
##   Temperatura_Abrigo_150cm_Maxima = col_double(),
##   Temperatura_Abrigo_150cm_Minima = col_double(),
##   Temperatura_Suelo_10cm_Media = col_double(),
##   Precipitacion_Pluviometrica = col_double(),
##   Precipitacion_Cronologica = col_double(),
##   Precipitacion_Maxima_30minutos = col_double(),
##   Tesion_Vapor_Media = col_double(),
##   Humedad_Media = col_double(),
##   Humedad_Media_8_14_20 = col_double(),
##   Rocio_Medio = col_double(),
##   Direccion_Viento_200cm = col_character(),
##   Direccion_Viento_1000cm = col_character(),
##   Horas_Frio = col_double(),
##   Unidades_Frio = col_double(),
##   mes = col_character()
## )
## ‚Ñπ Use `spec()` for the full column specifications.</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>bariloche</span></code></pre></div>
<pre><code>## # A tibble: 3,024 x 31
##    Fecha               Temperatura_Abr‚Ä¶ Temperatura_Abr‚Ä¶ Temperatura_Abr‚Ä¶
##    &lt;dttm&gt;                         &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;
##  1 2011-05-28 00:00:00            NA                NA               NA  
##  2 2011-05-29 00:00:00             4.27             12.8             -1.2
##  3 2011-05-30 00:00:00             1.69              9.2             -2.8
##  4 2011-05-31 00:00:00             3.47              9.6              0.5
##  5 2011-06-01 00:00:00             2.90              9.6             -1.5
##  6 2011-06-02 00:00:00             6.26             13.3              2.9
##  7 2011-06-03 00:00:00             3.45             12.6             -1.8
##  8 2011-06-04 00:00:00             6.09             10.2              3.9
##  9 2011-06-05 00:00:00             5.00              7.1              3.4
## 10 2011-06-06 00:00:00             5.45              9.5              3.2
## # ‚Ä¶ with 3,014 more rows, and 27 more variables:
## #   Temperatura_Intemperie_5cm_Minima &lt;lgl&gt;,
## #   Temperatura_Intemperie_50cm_Minima &lt;lgl&gt;,
## #   Temperatura_Suelo_5cm_Media &lt;lgl&gt;, Temperatura_Suelo_10cm_Media &lt;dbl&gt;,
## #   Temperatura_Inte_5cm &lt;lgl&gt;, Temperatura_Intemperie_150cm_Minima &lt;lgl&gt;,
## #   Humedad_Suelo &lt;lgl&gt;, Precipitacion_Pluviometrica &lt;dbl&gt;,
## #   Precipitacion_Cronologica &lt;dbl&gt;, Precipitacion_Maxima_30minutos &lt;dbl&gt;,
## #   Heliofania_Efectiva &lt;lgl&gt;, Heliofania_Relativa &lt;lgl&gt;,
## #   Tesion_Vapor_Media &lt;dbl&gt;, Humedad_Media &lt;dbl&gt;, Humedad_Media_8_14_20 &lt;dbl&gt;,
## #   Rocio_Medio &lt;dbl&gt;, Duracion_Follaje_Mojado &lt;lgl&gt;,
## #   Velocidad_Viento_200cm_Media &lt;lgl&gt;, Direccion_Viento_200cm &lt;chr&gt;,
## #   Velocidad_Viento_1000cm_Media &lt;lgl&gt;, Direccion_Viento_1000cm &lt;chr&gt;,
## #   Velocidad_Viento_Maxima &lt;lgl&gt;, Presion_Media &lt;lgl&gt;, Radiacion_Global &lt;lgl&gt;,
## #   Horas_Frio &lt;dbl&gt;, Unidades_Frio &lt;dbl&gt;, mes &lt;chr&gt;</code></pre>
<div class="alert alert-success">
<p>¬øNotaste que en el c√≥digo anterior no usaste <code>library(readr)</code> para cargar el paquete y luego leer? Con la notaci√≥n <code>paquete::funcion()</code> pod√©s acceder a las funciones de un paquete sin tener que cargarlo. Es una buena forma de no tener que cargar un mont√≥n de paquetes innecesarios si vas a correr una √∫nica funci√≥n de un paquete pocas veces.</p>
</div>
<p>¬øC√≥mo har√≠as para calcular el valor medio mensual de cada variable relacionada con la temperatura? En el formato en el que est√°n ahora los datos, tendr√≠as que hacer algo como esto</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>bariloche <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="st">  </span><span class="kw">group_by</span>(mes) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Temperatura_abrigo_150cm =</span> <span class="kw">mean</span>(Temperatura_Abrigo_150cm, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb7-4"><a href="#cb7-4"></a>            <span class="dt">Temperatura_Abrigo_150cm_Maxima =</span> <span class="kw">mean</span>(Temperatura_Abrigo_150cm_Maxima, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </span>
<span id="cb7-5"><a href="#cb7-5"></a>            <span class="dt">Temperatura_Abrigo_150cm_Minima =</span> <span class="kw">mean</span>(Temperatura_Abrigo_150cm_Minima, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 12 x 4
##    mes      Temperatura_abrigo_‚Ä¶ Temperatura_Abrigo_150‚Ä¶ Temperatura_Abrigo_150‚Ä¶
##    &lt;chr&gt;                   &lt;dbl&gt;                   &lt;dbl&gt;                   &lt;dbl&gt;
##  1 abril                   10.5                    17.4                    5.16 
##  2 agosto                   4.83                   10.0                    0.937
##  3 diciemb‚Ä¶                14.0                    20.6                    7.90 
##  4 enero                   16.6                    23.8                    9.74 
##  5 febrero                 16.0                    23.6                    9.13 
##  6 julio                    3.69                    8.29                   0.220
##  7 junio                    5.18                    9.17                   1.99 
##  8 marzo                   13.8                    21.8                    6.77 
##  9 mayo                     7.34                   12.5                    3.35 
## 10 noviemb‚Ä¶                11.6                    18.0                    5.85 
## 11 octubre                  8.59                   15.1                    3.19 
## 12 septiem‚Ä¶                 6.43                   12.6                    1.66</code></pre>
<div class="alert alert-info">
<p><strong>Desaf√≠o</strong></p>
<p>Extend√© el c√≥digo de arriba para calcular el promedio de todas las 30 variables incluidas en la tabla <code>bariloche</code>.</p>
<p>¬°No! Ser√≠a un ejercicio altamente tedioso.</p>
</div>
<p>Para no tener que escribir 30 l√≠neas todas iguales, ser√≠a mejor poder hacer un promedio para cada mes <strong>y para cada variable</strong>. Algo como esto:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>bariloche <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="st">  </span><span class="kw">group_by</span>(mes, variable) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">promedio =</span> <span class="kw">mean</span>(valor, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</span></code></pre></div>
<p>Para poder hacer eso hay que tener los datos en un formato m√°s largo. Para convertirlo en una tabla m√°s larga, se usa <code>pivot_longer()</code> (‚Äúlonger‚Äù es ‚Äúm√°s largo‚Äù en ingl√©s):</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>bariloche_largo &lt;-<span class="st"> </span>bariloche <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="st">  </span><span class="kw">select</span>(Fecha, <span class="kw">starts_with</span>(<span class="st">&quot;Temperatura&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> <span class="op">-</span>Fecha,</span>
<span id="cb11-4"><a href="#cb11-4"></a>               <span class="dt">names_to =</span> <span class="st">&quot;variable_lugar_altura_tipo&quot;</span>,</span>
<span id="cb11-5"><a href="#cb11-5"></a>               <span class="dt">values_to =</span> <span class="st">&quot;valor&quot;</span>)</span>
<span id="cb11-6"><a href="#cb11-6"></a></span>
<span id="cb11-7"><a href="#cb11-7"></a>bariloche_largo</span></code></pre></div>
<pre><code>## # A tibble: 27,216 x 3
##    Fecha               variable_lugar_altura_tipo          valor
##    &lt;dttm&gt;              &lt;chr&gt;                               &lt;dbl&gt;
##  1 2011-05-28 00:00:00 Temperatura_Abrigo_150cm            NA   
##  2 2011-05-28 00:00:00 Temperatura_Abrigo_150cm_Maxima     NA   
##  3 2011-05-28 00:00:00 Temperatura_Abrigo_150cm_Minima     NA   
##  4 2011-05-28 00:00:00 Temperatura_Intemperie_5cm_Minima   NA   
##  5 2011-05-28 00:00:00 Temperatura_Intemperie_50cm_Minima  NA   
##  6 2011-05-28 00:00:00 Temperatura_Suelo_5cm_Media         NA   
##  7 2011-05-28 00:00:00 Temperatura_Suelo_10cm_Media        NA   
##  8 2011-05-28 00:00:00 Temperatura_Inte_5cm                NA   
##  9 2011-05-28 00:00:00 Temperatura_Intemperie_150cm_Minima NA   
## 10 2011-05-29 00:00:00 Temperatura_Abrigo_150cm             4.27
## # ‚Ä¶ with 27,206 more rows</code></pre>
<p>Lo primero que hace este c√≥digo es seleccionar s√≥lo las columnas de inter√©s: la Fecha y las columnas de temperatura. Para no tener que escribir los nombres enteros de las columnas de temperatura (¬°que son muy largos!) usa la funci√≥n <code>starts_with()</code> que, como su nombre (en ingl√©s) lo indica, selecciona todas las columnas que empiezan con ‚ÄúTemperatura‚Äù.</p>
<div class="alert alert-success">
<p>Existen otras funciones accesorias para seleccionar muchas funciones encapsuladas en el paquete ‚Äútidyselect‚Äù. Si quer√©s leer m√°s detalles de las distintas formas que pod√©s seleccionar variables le√© la documentaci√≥n usando <code>?tidyselect::language</code>.</p>
</div>
<p>Luego, el c√≥digo usa <code>pivot_longer()</code> para ‚Äúalargar‚Äù la tabla es la tabla que va a modificar: <code>bariloche</code>. El segundo argumento se llama <code>cols</code> y es un vector con las columnas que tienen los valores a ‚Äúalargar‚Äù. Podr√≠a ser un vector escrito a mano (algo como <code>c("Temperatura_Abrigo_150cm", "Temperatura_Abrigo_150cm_Maxima"...)</code>) pero con m√°s de 30 columnas, escribir todo eso ser√≠a tedioso y probablemente estar√≠a lleno de errores. El c√≥digo de arriba usa la sintaxis de ‚Äú-columna‚Äù para indicar que son todas las columnas menos la columnas ‚ÄúFecha‚Äù.</p>
<p>El tercer y cuarto argumento son los nombres de las columnas de ‚Äúnombre‚Äù y de ‚Äúvalor‚Äù que va a tener la nueva tabla. Como la nueva columna de identificaci√≥n tiene los datos de la variable, el lugar donde se mide, la altura y el tipo de variable (m√≠nima, m√°xima) , ‚Äúvariable_lugar_altura_tipo‚Äù es un buen nombre. Y la columna de valor va a tener‚Ä¶ bueno, el valor.</p>
<p>Tomate un momento para visualizar lo que acaba de pasar. La tabla ancha ten√≠a un mont√≥n de columnas con distintos datos. Ahora estos datos est√°n uno arriba de otro en la columna ‚Äúvalor‚Äù, pero para identificar el nombre de la columna de la cual vinieron, se agrega la columna ‚Äúvariable‚Äù.</p>
<div class="figure">
<img src="img/ancho-a-largo.png" alt="" />
<p class="caption">Proceso de largo a ancho</p>
</div>
<p>La columna <code>variable_lugar_altura_tipo</code> todav√≠a no es muy √∫til porque contiene 4 datos, la variable (temperatura), el lugar, la altura y el tipo de observaci√≥n. Ser√≠a mejor separar esta informaci√≥n en dos columnas llamadas ‚Äúvariable‚Äù, ‚Äúlugar‚Äù, ‚Äúaltura‚Äù y ‚Äútipo‚Äù. Para eso est√° la funci√≥n <code>separate()</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>bariloche_largo &lt;-<span class="st"> </span><span class="kw">separate</span>(bariloche_largo, </span>
<span id="cb13-2"><a href="#cb13-2"></a>                            <span class="dt">col =</span> variable_lugar_altura_tipo, </span>
<span id="cb13-3"><a href="#cb13-3"></a>                            <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;variable&quot;</span>, <span class="st">&quot;lugar&quot;</span>, <span class="st">&quot;altura&quot;</span>, <span class="st">&quot;tipo&quot;</span>), </span>
<span id="cb13-4"><a href="#cb13-4"></a>                            <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: Expected 4 pieces. Missing pieces filled with `NA` in 6048 rows [1, 8,
## 10, 17, 19, 26, 28, 35, 37, 44, 46, 53, 55, 62, 64, 71, 73, 80, 82, 89, ...].</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>bariloche_largo</span></code></pre></div>
<pre><code>## # A tibble: 27,216 x 6
##    Fecha               variable    lugar      altura tipo   valor
##    &lt;dttm&gt;              &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt;
##  1 2011-05-28 00:00:00 Temperatura Abrigo     150cm  &lt;NA&gt;   NA   
##  2 2011-05-28 00:00:00 Temperatura Abrigo     150cm  Maxima NA   
##  3 2011-05-28 00:00:00 Temperatura Abrigo     150cm  Minima NA   
##  4 2011-05-28 00:00:00 Temperatura Intemperie 5cm    Minima NA   
##  5 2011-05-28 00:00:00 Temperatura Intemperie 50cm   Minima NA   
##  6 2011-05-28 00:00:00 Temperatura Suelo      5cm    Media  NA   
##  7 2011-05-28 00:00:00 Temperatura Suelo      10cm   Media  NA   
##  8 2011-05-28 00:00:00 Temperatura Inte       5cm    &lt;NA&gt;   NA   
##  9 2011-05-28 00:00:00 Temperatura Intemperie 150cm  Minima NA   
## 10 2011-05-29 00:00:00 Temperatura Abrigo     150cm  &lt;NA&gt;    4.27
## # ‚Ä¶ with 27,206 more rows</code></pre>
<p>El primer argumento, como siempre, es la tabla a procesar. El segundo, <code>col</code>, es la columna a separar en dos (o m√°s) columnas nuevas. El tercero, <code>into</code> es el nombre de las nuevas columnas que <code>separate()</code> va a crear. El √∫ltimo argumento es <code>sep</code> que define c√≥mo realizar la separaci√≥n. Por defecto, <code>sep</code> es una <a href="https://es.wikipedia.org/wiki/Expresi%C3%B3n_regular">expresi√≥n regular</a> que captura cualquier caracter no alfanum√©rico.</p>
<p>Habr√°s notado un problema. Para ‚ÄúTemperatura_Abrigo_150cm‚Äù y para ‚ÄúTemperatura_Inte_5cm‚Äù, la columna ‚Äútipo‚Äù es NA. Esto es porque el texto no tiene 4 ‚Äúpedazos‚Äù. Ser√≠a conveniente agregarle algo. Asumiendo que es una temperatura media, se puede modificar con un <code>if_else()</code>:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>bariloche_largo &lt;-<span class="st"> </span>bariloche_largo <span class="op">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">tipo =</span> <span class="kw">if_else</span>(<span class="kw">is.na</span>(tipo), <span class="st">&quot;Media&quot;</span>, tipo))</span>
<span id="cb17-3"><a href="#cb17-3"></a>bariloche_largo</span></code></pre></div>
<pre><code>## # A tibble: 27,216 x 6
##    Fecha               variable    lugar      altura tipo   valor
##    &lt;dttm&gt;              &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt;
##  1 2011-05-28 00:00:00 Temperatura Abrigo     150cm  Media  NA   
##  2 2011-05-28 00:00:00 Temperatura Abrigo     150cm  Maxima NA   
##  3 2011-05-28 00:00:00 Temperatura Abrigo     150cm  Minima NA   
##  4 2011-05-28 00:00:00 Temperatura Intemperie 5cm    Minima NA   
##  5 2011-05-28 00:00:00 Temperatura Intemperie 50cm   Minima NA   
##  6 2011-05-28 00:00:00 Temperatura Suelo      5cm    Media  NA   
##  7 2011-05-28 00:00:00 Temperatura Suelo      10cm   Media  NA   
##  8 2011-05-28 00:00:00 Temperatura Inte       5cm    Media  NA   
##  9 2011-05-28 00:00:00 Temperatura Intemperie 150cm  Minima NA   
## 10 2011-05-29 00:00:00 Temperatura Abrigo     150cm  Media   4.27
## # ‚Ä¶ with 27,206 more rows</code></pre>
<div class="alert alert-info">
<p><strong>Desaf√≠o</strong></p>
<p>Junt√° todos los pasos anteriores en una sola cadena de operaciones usando <code>%&gt;%</code>.</p>
</div>
<div class="alert alert-info">
<p><strong>Desaf√≠o</strong></p>
<p>Esta tabla s√≥lo tiene datos de temperatura. ¬øSe podr√≠a incluir cualquier otra variable? ¬øHumedad, direcci√≥n del viento, estado del tiempo? ¬øC√≥mo lo har√≠as?</p>
</div>
</div>
<div id="de-largo-a-ancho-con-pivot_wider" class="section level2">
<h2>De largo a ancho con <code>pivot_wider()</code></h2>
<p>Ahora la variable <code>bariloche_largo</code> est√° en el formato m√°s largo posible. Tiene 6 columnas, de las cuales s√≥lo una es la columnas con valores. Pero con los datos as√≠ no podr√≠as hacer un gr√°fico de puntos que muestre, por ejemplo, la relaci√≥n entre la temperatura m√≠nima y la temperatura m√°xima. En este caso todos los valores en la columna <code>valor</code> tienen las mismas unidades, pero podr√≠a tener otras variables, como humedad o presi√≥n. En ese caso, no tendr√≠an las mismas unidades, por lo que operar con ese vector podr√≠a dar resultados sin sentido. Muchas veces es conveniente y natural tener los datos en un formato intermedio en donde hay m√∫ltiples columnas con los valores de distintas variables observadas.</p>
<p>Pasa ‚Äúensanchar‚Äù una tabla est√° la funci√≥n <code>pivot_wider()</code> (‚Äúwider‚Äù es ‚Äúm√°s ancha‚Äù en ingl√©s) y el c√≥digo para conseguir este formato intermedio es:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>bariloche_medio &lt;-<span class="st"> </span><span class="kw">pivot_wider</span>(bariloche_largo, <span class="dt">names_from =</span> tipo, <span class="dt">values_from =</span> valor)</span>
<span id="cb19-2"><a href="#cb19-2"></a>bariloche_medio</span></code></pre></div>
<pre><code>## # A tibble: 21,168 x 7
##    Fecha               variable    lugar      altura Media Maxima Minima
##    &lt;dttm&gt;              &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
##  1 2011-05-28 00:00:00 Temperatura Abrigo     150cm  NA      NA     NA  
##  2 2011-05-28 00:00:00 Temperatura Intemperie 5cm    NA      NA     NA  
##  3 2011-05-28 00:00:00 Temperatura Intemperie 50cm   NA      NA     NA  
##  4 2011-05-28 00:00:00 Temperatura Suelo      5cm    NA      NA     NA  
##  5 2011-05-28 00:00:00 Temperatura Suelo      10cm   NA      NA     NA  
##  6 2011-05-28 00:00:00 Temperatura Inte       5cm    NA      NA     NA  
##  7 2011-05-28 00:00:00 Temperatura Intemperie 150cm  NA      NA     NA  
##  8 2011-05-29 00:00:00 Temperatura Abrigo     150cm   4.27   12.8   -1.2
##  9 2011-05-29 00:00:00 Temperatura Intemperie 5cm    NA      NA     NA  
## 10 2011-05-29 00:00:00 Temperatura Intemperie 50cm   NA      NA     NA  
## # ‚Ä¶ with 21,158 more rows</code></pre>
<p>Nuevamente el primer argumento es la tabla original. El segundo, <code>names_from</code> es la columna cuyos valores √∫nicos van a convertirse en nuevas columnas. La columna <code>tipo</code> tiene los valores <code>"Media"</code>, <code>"Maxima"</code> y <code>"Minima"</code> y entonces la tabla nueva tendr√° tres columnas con esos nombres. El tercer argumento, <code>values_from</code>, es la columna de la cual sacar los valores.</p>
<p>Para volver al formato m√°s ancho, basta con agregar m√°s columnas en el argumento <code>names_from</code>:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="kw">pivot_wider</span>(bariloche_largo, </span>
<span id="cb21-2"><a href="#cb21-2"></a>            <span class="dt">names_from =</span> <span class="kw">c</span>(variable, lugar, altura, tipo), </span>
<span id="cb21-3"><a href="#cb21-3"></a>            <span class="dt">names_sep =</span> <span class="st">&quot;_&quot;</span>,</span>
<span id="cb21-4"><a href="#cb21-4"></a>            <span class="dt">values_from =</span> valor)</span></code></pre></div>
<pre><code>## # A tibble: 3,024 x 10
##    Fecha               Temperatura_Abr‚Ä¶ Temperatura_Abr‚Ä¶ Temperatura_Abr‚Ä¶
##    &lt;dttm&gt;                         &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;
##  1 2011-05-28 00:00:00            NA                NA               NA  
##  2 2011-05-29 00:00:00             4.27             12.8             -1.2
##  3 2011-05-30 00:00:00             1.69              9.2             -2.8
##  4 2011-05-31 00:00:00             3.47              9.6              0.5
##  5 2011-06-01 00:00:00             2.90              9.6             -1.5
##  6 2011-06-02 00:00:00             6.26             13.3              2.9
##  7 2011-06-03 00:00:00             3.45             12.6             -1.8
##  8 2011-06-04 00:00:00             6.09             10.2              3.9
##  9 2011-06-05 00:00:00             5.00              7.1              3.4
## 10 2011-06-06 00:00:00             5.45              9.5              3.2
## # ‚Ä¶ with 3,014 more rows, and 6 more variables:
## #   Temperatura_Intemperie_5cm_Minima &lt;dbl&gt;,
## #   Temperatura_Intemperie_50cm_Minima &lt;dbl&gt;,
## #   Temperatura_Suelo_5cm_Media &lt;dbl&gt;, Temperatura_Suelo_10cm_Media &lt;dbl&gt;,
## #   Temperatura_Inte_5cm_Media &lt;dbl&gt;, Temperatura_Intemperie_150cm_Minima &lt;dbl&gt;</code></pre>
<p>En esta llamada tambi√©n est√° el argumento <code>names_sep</code>, que determina el caracter que se usa para crear el nombre de las nuevas columnas.</p>
<div class="alert alert-info">
<p><strong>Desaf√≠o</strong></p>
<ul>
<li>Cre√° una nueva tabla, llamada <code>bariloche_superduper_ancho</code> que sea la tabla m√°s ancha posible que pod√©s generar con estos datos. ¬øC√≥mo es la tabla m√°s ancha posible que pod√©s generar con estos datos? ¬øCu√°ntas filas y columnas tiene?</li>
</ul>
</div>
</div>
<div id="uniendo-tablas" class="section level2">
<h2>Uniendo tablas</h2>
<p>Hasta ahora todo lo que usaste de {dplyr} involucra trabajar y modificar con una sola tabla a la vez, pero es muy com√∫n tener dos o m√°s tablas con datos relacionados. En ese caso, tenemos que unir estas tablas. a partir de una o m√°s variables en com√∫n o keys. En Excel u otro programa de hojas de c√°lculo, esto se resuelve con la funci√≥n ‚ÄúVLOOKUP‚Äù o ‚ÄúBUSCARV‚Äù, en R y en particular dentro del mundo de {dplyr} hay que usar la familia de funciones <code>*_join()</code>. Hay una funci√≥n cada tipo de uni√≥n que queramos hacer.</p>
<p>Asumiendo que quer√©s unir dos data.frames o tablas <code>x</code> e <code>y</code> que tienen en com√∫n una variable <code>A</code>:</p>
<p><img src="img/join.png" /></p>
<ul>
<li><p><code>full_join()</code>: devuelve todas las filas y todas las columnas de ambas tablas <code>x</code> e <code>y</code>. Cuando no coinciden los elementos en <code>x1</code>, devuelve <code>NA</code> (dato faltante). Esto significa que no se pierden filas de ninguna de las dos tablas a√∫n cuando no hay coincidencia. Est√° es la manera m√°s segura de unir tablas.</p></li>
<li><p><code>left_join()</code>: devuelve todas las filas de <code>x</code> y todas las columnas de <code>x</code> e <code>y</code>. Las filas en <code>x</code> que no tengan coincidencia con <code>y</code> tendr√°n <code>NA</code> en las nuevas columnas. Si hay m√∫ltiples coincidencias entre <code>x</code>e <code>y</code>, devuelve todas las coincidencias posibles.</p></li>
<li><p><code>right_join()</code>: es igual que <code>left_join()</code> pero intercambiando el orden de <code>x</code> e <code>y</code>. En otras palabras, <code>right_join(x, y)</code> es id√©ntico a <code>left_join(y, x)</code>.</p></li>
<li><p><code>inner_join()</code>: devuelve todas las filas de <code>x</code> donde hay coincidencias con <code>y</code> y todas las columnas de <code>x</code> e <code>y</code>. Si hay m√∫ltiples coincidencias entre <code>x</code> e <code>y</code>, entonces devuelve todas las coincidencias. Esto significa que eliminar√° las filas (observaciones) que no coincidan en ambas tablas, lo que puede ser peligroso.</p></li>
</ul>
<p><img src="img/join_family.png" /></p>
<p>En el archivo ‚Äúestaciones_smn.csv‚Äù hay metadatos de las estaciones meteorol√≥gicas del Servicio Meteorol√≥gico Nacional (nombre, provincia, ubicaci√≥n, etc‚Ä¶):</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>estaciones &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="st">&quot;datos/estaciones_smn.csv&quot;</span>) </span>
<span id="cb23-2"><a href="#cb23-2"></a>estaciones</span></code></pre></div>
<pre><code>## # A tibble: 123 x 5
##    nombre                   provincia      lon   lat altua
##    &lt;chr&gt;                    &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 BASE BELGRANO II         ANTARTIDA    -34.6 -77.9   256
##  2 BASE CARLINI (EX JUBANY) ANTARTIDA    -58.6 -62.2    11
##  3 BASE ESPERANZA           ANTARTIDA    -57.0 -63.4    24
##  4 BASE MARAMBIO            ANTARTIDA    -56.7 -64.2   198
##  5 BASE ORCADAS             ANTARTIDA    -44.7 -60.8    12
##  6 BASE SAN MARTIN          ANTARTIDA    -67.1 -68.1     7
##  7 AZUL AERO                BUENOS AIRES -59.9 -36.8   147
##  8 BAHIA BLANCA AERO        BUENOS AIRES -62.2 -38.7    83
##  9 BENITO JUAREZ AERO       BUENOS AIRES -59.8 -37.7   207
## 10 BOLIVAR AERO             BUENOS AIRES -61.1 -36.2    94
## # ‚Ä¶ with 113 more rows</code></pre>
<p>Por otra parte, en el archivo ‚Äúobservaciones_smn.csv‚Äù hay datos diarios de temperatura m√≠nima y m√°xima observados en cada una cada una y distintas fechas:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>observaciones &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="st">&quot;datos/observaciones_smn.csv&quot;</span>)</span></code></pre></div>
<pre><code>## 
## ‚îÄ‚îÄ Column specification ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
## cols(
##   tmax = col_double(),
##   tmin = col_double(),
##   station = col_character(),
##   date = col_date(format = &quot;&quot;)
## )</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>observaciones</span></code></pre></div>
<pre><code>## # A tibble: 3,812 x 4
##     tmax  tmin station                  date      
##    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;                    &lt;date&gt;    
##  1  16.1   9.4 AEROPARQUE AERO          2020-08-01
##  2  17.6  -1.6 AZUL AERO                2020-08-01
##  3  18.6   2.4 BAHIA BLANCA AERO        2020-08-01
##  4   9     1.6 BARILOCHE AERO           2020-08-01
##  5  NA   -33.5 BASE BELGRANO II         2020-08-01
##  6   2.1  -3.3 BASE CARLINI (EX JUBANY) 2020-08-01
##  7  -0.4  -2.6 BASE ESPERANZA           2020-08-01
##  8  -2.2  -7.4 BASE MARAMBIO            2020-08-01
##  9  -0.5  -7.8 BASE ORCADAS             2020-08-01
## 10   1.4  -7.6 BASE SAN MARTIN          2020-08-01
## # ‚Ä¶ with 3,802 more rows</code></pre>
<p>Ser√≠a muy √∫til unir ambas tablas de manera de tener la informaci√≥n de la temperatura en cada ubicaci√≥n.</p>
<p>Para unir las dos tablas, cualquier funci√≥n join requiere cierta informaci√≥n:</p>
<ul>
<li>las tablas a unir: son los dos primeros argumentos.</li>
<li>qu√© variable o variables (se puede usar m√°s de una!) usar para identificar coincidencias: el argumento <code>by</code>.</li>
</ul>
<p>Unamos <code>observaciones</code> y <code>estaciones</code> primero con <code>full_join()</code>:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>estaciones_obs &lt;-<span class="st"> </span><span class="kw">full_join</span>(observaciones, estaciones, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;station&quot;</span> =<span class="st"> &quot;nombre&quot;</span>))</span>
<span id="cb29-2"><a href="#cb29-2"></a>estaciones_obs</span></code></pre></div>
<pre><code>## # A tibble: 3,813 x 8
##     tmax  tmin station                date       provincia       lon   lat altua
##    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;                  &lt;date&gt;     &lt;chr&gt;         &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  16.1   9.4 AEROPARQUE AERO        2020-08-01 CAPITAL FEDE‚Ä¶ -58.4 -34.6     6
##  2  17.6  -1.6 AZUL AERO              2020-08-01 BUENOS AIRES  -59.9 -36.8   147
##  3  18.6   2.4 BAHIA BLANCA AERO      2020-08-01 BUENOS AIRES  -62.2 -38.7    83
##  4   9     1.6 BARILOCHE AERO         2020-08-01 RIO NEGRO     -71.2 -41.2   835
##  5  NA   -33.5 BASE BELGRANO II       2020-08-01 ANTARTIDA     -34.6 -77.9   256
##  6   2.1  -3.3 BASE CARLINI (EX JUBA‚Ä¶ 2020-08-01 ANTARTIDA     -58.6 -62.2    11
##  7  -0.4  -2.6 BASE ESPERANZA         2020-08-01 ANTARTIDA     -57.0 -63.4    24
##  8  -2.2  -7.4 BASE MARAMBIO          2020-08-01 ANTARTIDA     -56.7 -64.2   198
##  9  -0.5  -7.8 BASE ORCADAS           2020-08-01 ANTARTIDA     -44.7 -60.8    12
## 10   1.4  -7.6 BASE SAN MARTIN        2020-08-01 ANTARTIDA     -67.1 -68.1     7
## # ‚Ä¶ with 3,803 more rows</code></pre>
<p>Como el nombre de la estaci√≥n en la tabla <code>observaciones</code> est√° en una columna llamada ‚Äústation‚Äù, mientras que en la tabla <code>estaciones</code>, est√° en una columna llamada ‚Äúnombre‚Äù. Cuando pasa eso, en el argumento <code>by</code> hay que poner un vector con nombres.</p>
<p>Si mir√°s de cerca la tabla unida vas a ver un par de cosas:</p>
<ul>
<li>Todas las columnas de <code>observaciones</code> y de <code>estaciones</code> est√°n presentes.</li>
<li>Todas las observaciones est√°n presentes, a√∫n los estaciones que est√°n presentes en <code>estaciones</code> pero no en <code>observaciones</code> y viceversa.</li>
</ul>
<p>¬øExiste alguna estaci√≥n que no est√© en ambas tablas? Si compar√°s la cantidad de filas de <code>observaciones</code> y de <code>estaciones_obs</code>, vas a ver que la primera tiene 3812 filas y la segunda, 3813. Esto ya da una pista de que probablemente haya una estaci√≥n en <code>estaciones</code> que no est√° en <code>observaciones</code> que es la fila extra.</p>
<p>Para buscar sistem√°ticamente estas estaciones errantes hay que usar <code>anti_join</code>, que devuelve las filas de la tabla de la izquierda que no est√° en la derecha. Entonces, usando exactamente el mismo c√≥digo de arriba pero cambiando <code>full_join</code> por <code>anti_join</code>, queda:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="kw">anti_join</span>(observaciones, estaciones, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;station&quot;</span> =<span class="st"> &quot;nombre&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 31 x 4
##     tmax  tmin station                           date      
##    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;                             &lt;date&gt;    
##  1  33.6  13.5 PRESIDENCIA ROQUE SAENZ PEÔøΩA AERO 2020-08-01
##  2  34    17.3 PRESIDENCIA ROQUE SAENZ PEÔøΩA AERO 2020-08-02
##  3  34.1  17.3 PRESIDENCIA ROQUE SAENZ PEÔøΩA AERO 2020-08-03
##  4  34.2  16   PRESIDENCIA ROQUE SAENZ PEÔøΩA AERO 2020-08-04
##  5  35.1  18   PRESIDENCIA ROQUE SAENZ PEÔøΩA AERO 2020-08-05
##  6  34.5  16.3 PRESIDENCIA ROQUE SAENZ PEÔøΩA AERO 2020-08-06
##  7  24    11.5 PRESIDENCIA ROQUE SAENZ PEÔøΩA AERO 2020-08-07
##  8  32.7  10.1 PRESIDENCIA ROQUE SAENZ PEÔøΩA AERO 2020-08-08
##  9  35    11.7 PRESIDENCIA ROQUE SAENZ PEÔøΩA AERO 2020-08-09
## 10  36.2  15   PRESIDENCIA ROQUE SAENZ PEÔøΩA AERO 2020-08-10
## # ‚Ä¶ with 21 more rows</code></pre>
<p>En la tabla <code>observaciones</code>, la estaci√≥n ‚ÄúPRESIDENCIA ROQUE SAENZ PE√ëA AERO‚Äù existe, tiene un problema de codificaci√≥n! ¬øQu√© pasa si intercambi√°s el orden de las variables (y el orden de los nombres en el vector que le pasamos a <code>by</code>)?</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="kw">anti_join</span>(estaciones, observaciones, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;nombre&quot;</span> =<span class="st"> &quot;station&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 1 x 5
##   nombre                            provincia   lon   lat altua
##   &lt;chr&gt;                             &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 PRESIDENCIA ROQUE SAENZ PE√ëA AERO CHACO     -60.4 -26.8    93</code></pre>
<p>Esto nos dice que la estaci√≥n ‚ÄúPRESIDENCIA ROQUE SAENZ PE√ëA AERO‚Äù, est√° en la tabla <code>estaciones</code> con la codificaci√≥n correcta. <code>anti_join</code> es muy √∫til para encontrar problemas como estos.</p>
<p><code>full_join</code> es la opci√≥n m√°s segura si no sab√©s si todas las observaciones de una tabla est√°n presente en a otra. Si s√≥lo te interesa conservar las filas de la tabla de la izquierda (en este caso <code>estaciones</code> entonces:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a>obs_estaciones &lt;-<span class="st"> </span><span class="kw">left_join</span>(observaciones, estaciones,  <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;station&quot;</span> =<span class="st"> &quot;nombre&quot;</span>))</span>
<span id="cb35-2"><a href="#cb35-2"></a>obs_estaciones</span></code></pre></div>
<pre><code>## # A tibble: 3,812 x 8
##     tmax  tmin station                date       provincia       lon   lat altua
##    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;                  &lt;date&gt;     &lt;chr&gt;         &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  16.1   9.4 AEROPARQUE AERO        2020-08-01 CAPITAL FEDE‚Ä¶ -58.4 -34.6     6
##  2  17.6  -1.6 AZUL AERO              2020-08-01 BUENOS AIRES  -59.9 -36.8   147
##  3  18.6   2.4 BAHIA BLANCA AERO      2020-08-01 BUENOS AIRES  -62.2 -38.7    83
##  4   9     1.6 BARILOCHE AERO         2020-08-01 RIO NEGRO     -71.2 -41.2   835
##  5  NA   -33.5 BASE BELGRANO II       2020-08-01 ANTARTIDA     -34.6 -77.9   256
##  6   2.1  -3.3 BASE CARLINI (EX JUBA‚Ä¶ 2020-08-01 ANTARTIDA     -58.6 -62.2    11
##  7  -0.4  -2.6 BASE ESPERANZA         2020-08-01 ANTARTIDA     -57.0 -63.4    24
##  8  -2.2  -7.4 BASE MARAMBIO          2020-08-01 ANTARTIDA     -56.7 -64.2   198
##  9  -0.5  -7.8 BASE ORCADAS           2020-08-01 ANTARTIDA     -44.7 -60.8    12
## 10   1.4  -7.6 BASE SAN MARTIN        2020-08-01 ANTARTIDA     -67.1 -68.1     7
## # ‚Ä¶ with 3,802 more rows</code></pre>
<p>Esta tabla tiene la misma cantidad de filas que <code>observaciones</code>. ¬øQu√© pas√≥ con la estaci√≥n que est√° mal codificada? Filtrando los datos:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a>obs_estaciones <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb37-2"><a href="#cb37-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">startsWith</span>(station, <span class="st">&quot;PRESIDENCIA ROQUE&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 31 x 8
##     tmax  tmin station                    date       provincia   lon   lat altua
##    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;                      &lt;date&gt;     &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  33.6  13.5 PRESIDENCIA ROQUE SAENZ P‚Ä¶ 2020-08-01 &lt;NA&gt;         NA    NA    NA
##  2  34    17.3 PRESIDENCIA ROQUE SAENZ P‚Ä¶ 2020-08-02 &lt;NA&gt;         NA    NA    NA
##  3  34.1  17.3 PRESIDENCIA ROQUE SAENZ P‚Ä¶ 2020-08-03 &lt;NA&gt;         NA    NA    NA
##  4  34.2  16   PRESIDENCIA ROQUE SAENZ P‚Ä¶ 2020-08-04 &lt;NA&gt;         NA    NA    NA
##  5  35.1  18   PRESIDENCIA ROQUE SAENZ P‚Ä¶ 2020-08-05 &lt;NA&gt;         NA    NA    NA
##  6  34.5  16.3 PRESIDENCIA ROQUE SAENZ P‚Ä¶ 2020-08-06 &lt;NA&gt;         NA    NA    NA
##  7  24    11.5 PRESIDENCIA ROQUE SAENZ P‚Ä¶ 2020-08-07 &lt;NA&gt;         NA    NA    NA
##  8  32.7  10.1 PRESIDENCIA ROQUE SAENZ P‚Ä¶ 2020-08-08 &lt;NA&gt;         NA    NA    NA
##  9  35    11.7 PRESIDENCIA ROQUE SAENZ P‚Ä¶ 2020-08-09 &lt;NA&gt;         NA    NA    NA
## 10  36.2  15   PRESIDENCIA ROQUE SAENZ P‚Ä¶ 2020-08-10 &lt;NA&gt;         NA    NA    NA
## # ‚Ä¶ with 21 more rows</code></pre>
<p><code>left_join</code> le puso <code>NA</code> en las filas de <code>observaciones</code> que no tienen coincidencia con <code>estaciones</code>.</p>
<p>Finalmente, si quisieras quedarte s√≥lo con las observaciones que est√°n presentes en ambas tablas usamos <code>inner_join()</code>.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a>obs_estaciones &lt;-<span class="st"> </span><span class="kw">inner_join</span>(observaciones, estaciones,  <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;station&quot;</span> =<span class="st"> &quot;nombre&quot;</span>))</span>
<span id="cb39-2"><a href="#cb39-2"></a>obs_estaciones</span></code></pre></div>
<pre><code>## # A tibble: 3,781 x 8
##     tmax  tmin station                date       provincia       lon   lat altua
##    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;                  &lt;date&gt;     &lt;chr&gt;         &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  16.1   9.4 AEROPARQUE AERO        2020-08-01 CAPITAL FEDE‚Ä¶ -58.4 -34.6     6
##  2  17.6  -1.6 AZUL AERO              2020-08-01 BUENOS AIRES  -59.9 -36.8   147
##  3  18.6   2.4 BAHIA BLANCA AERO      2020-08-01 BUENOS AIRES  -62.2 -38.7    83
##  4   9     1.6 BARILOCHE AERO         2020-08-01 RIO NEGRO     -71.2 -41.2   835
##  5  NA   -33.5 BASE BELGRANO II       2020-08-01 ANTARTIDA     -34.6 -77.9   256
##  6   2.1  -3.3 BASE CARLINI (EX JUBA‚Ä¶ 2020-08-01 ANTARTIDA     -58.6 -62.2    11
##  7  -0.4  -2.6 BASE ESPERANZA         2020-08-01 ANTARTIDA     -57.0 -63.4    24
##  8  -2.2  -7.4 BASE MARAMBIO          2020-08-01 ANTARTIDA     -56.7 -64.2   198
##  9  -0.5  -7.8 BASE ORCADAS           2020-08-01 ANTARTIDA     -44.7 -60.8    12
## 10   1.4  -7.6 BASE SAN MARTIN        2020-08-01 ANTARTIDA     -67.1 -68.1     7
## # ‚Ä¶ with 3,771 more rows</code></pre>
<p>En este caso, perdemos las filas de <code>observaciones</code> que no encontraron coincidencia en <code>estaciones</code> y viceversa.</p>
<div class="alert alert-info">
<p><strong>Desaf√≠o</strong></p>
<p>En el archivo ‚Äúradiaci√≥n_smn.csv‚Äù hay datos de radiaci√≥n media diaria medidos en dos estaciones del Servicio Meteorol√≥gico Nacional. El objetivo es que unas <code>observaciones</code> con esos datos teniendo en cuenta tanto la estaci√≥n como la fecha.</p>
<ol style="list-style-type: decimal">
<li>Lee la base de datos <code>radiacion_smn.csv</code> en una nueva variable que se llame <code>radiacion</code>.</li>
<li>Revis√° el nombre de las variables en esta base de datos, ¬øse llaman igual que las variables en <code>observaciones</code>?</li>
<li>Si te interesa saber la relaci√≥n entre la temperatura y la radiaci√≥n medida, ¬øqu√© tipo de join cre√©s que te conviene usar? (Ayuda: ¬øTe sirve de algo tener datos de estaciones y fechas donde se midi√≥ temperatura pero no radiaci√≥n o donde se midi√≥ radiaci√≥n pero no temperatura?)</li>
<li>Un√≠ las tabla usando la funci√≥n join que elegiste. Ten√© en cuenta que ahora usamos dos variables llave <code>station</code> y <code>date</code>. Busc√° en la documentaci√≥n c√≥mo indicarle eso a la funci√≥n.</li>
</ol>
</div>
<div class="btn-group" role="group" aria-label="Navegaci√≥n">
<p><a href= "05-dplyr.html" class = "btn btn-primary">Anterior</a> <a href= "07-graficos-I.html" class = "btn btn-primary">Siguiente</a></p>
</div>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiTWFuaXB1bGFjacOzbiBkZSBkYXRvcyBvcmRlbmFkb3MgdXNhbmRvIHtkcGx5cn0geSB7dGlkeXJ9IElJIgpvdXRwdXQ6IAogIGh0bWxfZG9jdW1lbnQ6CiAgICBjb2RlX2Rvd25sb2FkOiB0cnVlCiAgICB0b2M6IHRydWUKICAgIHRvY19mbG9hdDogdHJ1ZQogICAgaGlnaGxpZ2h0OiB0YW5nbwotLS0KCmBgYHtyIHNldHVwLCBpbmNsdWRlPUZBTFNFfQprbml0cjo6b3B0c19jaHVuayRzZXQoZWNobyA9IFRSVUUpCmBgYAoKVW4gbWlzbW8gY29uanVudG8gZGUgZGF0b3MgcHVlZGUgZXN0YXIgZW4gdW4gZm9ybWF0byAiYW5jaG8iIG8gImxhcmdvIi4gTG9zIGRhdG9zIGVuIGZvcm1hdG8gImxhcmdvIiBvICJ0aWR5Iiwgc29uIGFxdWVsbG9zIGVuIGxvcyBjdWFsZXM6CgotICAgY2FkYSBmaWxhIGVzIHVuYSBvYnNlcnZhY2nDs24KLSAgIGNhZGEgY29sdW1uYSBlcyB1bmEgdmFyaWFibGUKCkVuIGVsIGZvcm1hdG8gImFuY2hvIiBlcyB1biBwb2NvIG3DoXMgY29tcGxlam8gZGUgZGVmaW5pcmxvIHBlcm8gbGEgaWRlYSBnZW5lcmFsIGVzIHF1ZToKCi0gICBjYWRhIGZpbGEgZXMgdW4gIsOtdGVtIgotICAgY2FkYSBjb2x1bW5hIGVzIHVuYSB2YXJpYWJsZQoKIVtdKGltZy9sYXJnby1hbmNoby5wbmcpCgpVbmEgdGFibGEgZW4gZm9ybWF0byBsYXJnbyB2YSBhIHRlbmVyIHVuYSBjaWVydGEgY2FudGlkYWQgZGUgY29sdW1uYXMgcXVlIGN1bXBsZW4gZWwgcm9sIGRlIGlkZW50aWZpY2Fkb3JlcyB5IGN1eWEgY29tYmluYWNpw7NuIGlkZW50aWZpY2FuIHVuYSDDum5pY2Egb2JzZXJ2YWNpw7NuIHkgdW5hIMO6bmljYSBjb2x1bW5hIGNvbiBlbCB2YWxvciBkZSBsYSBvYnNlcnZhY2nDs24uIEVuIGVsIGVqZW1wbG8gZGUgYXJyaWJhLCBgcGFpc2AgeSBgYW5pb2Agc29uIGxhcyBjb2x1bW5hcyBpZGVudGlmaWNhZG9yYXMgeSBgY2Fzb3NgIGVzIGxhIGNvbHVtbmEgcXVlIGNvbnRpZW5lIGVsIHZhbG9yIGRlIGxhcyBvYnNlcnZhY2lvbmVzLgoKRW4gdW5hIHRhYmxhIGFuY2hhLCBjYWRhIG9ic2VydmFjacOzbiDDum5pY2Egc2UgaWRlbnRpZmljYSBhIHBhcnRpciBkZSBsYSBpbnRlcnNlY2Npw7NuIGRlIGZpbGFzIHkgY29sdW1uYXMuIEVuIGVsIGVqZW1wbG8sIGxvcyBwYcOtc2VzIGVzdMOhbiBlbiBsYXMgZmlsYXMgeSBsb3MgYcOxb3MgZW4gbGFzIGNvbHVtbmFzLgoKRW4gZ2VuZXJhbCwgZWwgZm9ybWF0byBhbmNobyBlcyBtw6FzIGNvbXBhY3RvIHkgbGVnaWJsZSBwb3IgaHVtYW5vcyBtaWVudHJhcyBxdWUgZWwgbGFyZ28gZXMgbcOhcyBmw6FjaWwgZGUgbWFuZWphciBjb24gbGEgY29tcHV0YWRvcmEuIFNpIHRlIGZpasOhcyBlbiBsYXMgdGFibGFzIGRlIGFycmliYSwgZXMgbcOhcyBmw6FjaWwgY29tcGFyYXIgbG9zIHZhbG9yZXMgZW50cmUgcGHDrXNlcyB5IGVudHJlIGHDsW9zIGVuIGxhIHRhYmxhIGFuY2hhLiBQZXJvIGVsIG5vbWJyZSBkZSBsYXMgY29sdW1uYXMgKCIxOTk5IiwgIjIwMDAiKSBlbiByZWFsaWRhZCDCoXNvbiBkYXRvcyEgQWRlbcOhcyBlc3RlIGZvcm1hdG8gc2UgZW1waWV6YSBhIGNvbXBsaWNhciBlbiBjdWFudG8gaGF5IG3DoXMgZGUgZG9zIGlkZW50aWZpY2Fkb3Jlcy4KClVuIG1pc21vIHNldCBkZSBkYXRvcyBwdWVkZSBzZXIgcmVwcmVzZW50YWRvIGRlIGZvcm1hIGNvbXBsZXRhbWVudGUgImxhcmdhIiwgY29tcGxldGFtZW50ZSAiYW5jaGEiIG8gLS1sbyBxdWUgZXMgbcOhcyBjb23Dum4tLSBlbiB1biBmb3JtYXRvIGludGVybWVkaW8gcGVybyBubyBleGlzdGUgdW5hIGZvcm1hICJjb3JyZWN0YSIgZGUgb3JnYW5pemFyIGxvcyBkYXRvczsgY2FkYSB1bmEgdGllbmUgc3VzIHZlbnRhamFzIHkgZGVzdmVudGFqYXMuIFBvciBlc3RvIGVzIHF1ZSBlcyBtdXkgbm9ybWFsIHF1ZSBkdXJhbnRlIHVuIGFuw6FsaXNpcyBsb3MgZGF0b3MgdmF5YW4geSB2dWVsdmFuIGVudHJlIGRpc3RpbnRvcyBmb3JtYXRvcyBkZXBlbmRpZW5kbyBkZSBsb3MgbcOpdG9kb3MgZXN0YWTDrXN0aWNvcyBxdWUgc2UgbGUgYXBsaWNhbi4gRW50b25jZXMsIGFwcmVuZGVyIGEgdHJhbnNmb3JtYXIgZGF0b3MgYW5jaG9zIGVuIGxhcmdvcyB5IHZpY2V2ZXJzYSBlcyB1biBoYWJpbGlkYWQgbXV5IMO6dGlsLgoKOjo6IHsuYWxlcnQgLmFsZXJ0LWluZm99CioqRGVzYWbDrW8qKgoKRW4gbGFzIHRhYmxhcyBkZSBlamVtcGxvIGNhZGEgcGHDrXMgdGllbmUgZWwgdW4gdmFsb3Igb2JzZXJ2YWRvIGRlICJjYXNvcyIgcGFyYSBjYWRhIGHDsW8uIMK/Q8OzbW8gYWdyZWdhcsOtYXMgdW5hIG51ZXZhIHZhcmlhYmxlIGNvbiBpbmZvcm1hY2nDs24gc29icmUgInByZWNpb3MiPyBEaWJ1asOhIHVuIGVzcXVlbWEgZW4gcGFwZWwgeSBsw6FwaXogZW4gZm9ybWF0byBhbmNobyB5IHVubyBlbiBmb3JtYXRvIGxhcmdvLiDCv0VuIHF1w6kgZm9ybWF0byBlcyBtw6FzICJuYXR1cmFsIiBlc2EgZXh0ZW5zacOzbj8KOjo6CgpFbiBlc3RhIHNlY2Npw7NuIHZhcyBhIHVzYXIgZWwgcGFxdWV0ZSB7dGlkeXJ9IHBhcmEgbWFuaXB1bGFyIGRhdG9zLiBTaSBubyBsbyB0ZW7DqXMgaW5zdGFsYWRvLCBpbnN0YWxhbG8gY29uIGVsIGNvbWFuZG86CgpgYGB7ciBldmFsID0gRkFMU0V9Cmluc3RhbGwucGFja2FnZXMoInRpZHlyIikKYGBgCgpZIGx1ZWdvIGNhcmfDoSB7dGlkeXJ9IHkge2RwbHlyfSAocXVlIHVzYXN0ZSBlbiBbdW5hIHNlY2Npw7NuIGFudGVyaW9yXSgwNS1kcGx5ci5odG1sKSkgY29uOgoKYGBge3J9CmxpYnJhcnkodGlkeXIpCmxpYnJhcnkoZHBseXIpCmBgYAoKIyMgRGUgYW5jaG8gYSBsYXJnbyBjb24gYHBpdm90X2xvbmdlcigpYAoKRW4gc2VjY2lvbmVzIGFudGVyaW9yZXMgdXNhc3RlIGRhdG9zIGRlIHVuYSBlc3RhY2nDs24gbWV0ZW9yb2zDs2dpY2EgZW4gQmFyaWxvY2hlOgoKYGBge3J9CmJhcmlsb2NoZSA8LSByZWFkcjo6cmVhZF9jc3YoImRhdG9zL2Jhcmlsb2NoZV9lbmxpbXBpby5jc3YiKQpiYXJpbG9jaGUKYGBgCgo6Ojogey5hbGVydCAuYWxlcnQtc3VjY2Vzc30Kwr9Ob3Rhc3RlIHF1ZSBlbiBlbCBjw7NkaWdvIGFudGVyaW9yIG5vIHVzYXN0ZSBgbGlicmFyeShyZWFkcilgIHBhcmEgY2FyZ2FyIGVsIHBhcXVldGUgeSBsdWVnbyBsZWVyPyBDb24gbGEgbm90YWNpw7NuIGBwYXF1ZXRlOjpmdW5jaW9uKClgIHBvZMOpcyBhY2NlZGVyIGEgbGFzIGZ1bmNpb25lcyBkZSB1biBwYXF1ZXRlIHNpbiB0ZW5lciBxdWUgY2FyZ2FybG8uIEVzIHVuYSBidWVuYSBmb3JtYSBkZSBubyB0ZW5lciBxdWUgY2FyZ2FyIHVuIG1vbnTDs24gZGUgcGFxdWV0ZXMgaW5uZWNlc2FyaW9zIHNpIHZhcyBhIGNvcnJlciB1bmEgw7puaWNhIGZ1bmNpw7NuIGRlIHVuIHBhcXVldGUgcG9jYXMgdmVjZXMuCjo6OgoKwr9Dw7NtbyBoYXLDrWFzIHBhcmEgY2FsY3VsYXIgZWwgdmFsb3IgbWVkaW8gbWVuc3VhbCBkZSBjYWRhIHZhcmlhYmxlIHJlbGFjaW9uYWRhIGNvbiBsYSB0ZW1wZXJhdHVyYT8gRW4gZWwgZm9ybWF0byBlbiBlbCBxdWUgZXN0w6FuIGFob3JhIGxvcyBkYXRvcywgdGVuZHLDrWFzIHF1ZSBoYWNlciBhbGdvIGNvbW8gZXN0bwoKYGBge3J9CmJhcmlsb2NoZSAlPiUgCiAgZ3JvdXBfYnkobWVzKSAlPiUgCiAgc3VtbWFyaXNlKFRlbXBlcmF0dXJhX2Ficmlnb18xNTBjbSA9IG1lYW4oVGVtcGVyYXR1cmFfQWJyaWdvXzE1MGNtLCBuYS5ybSA9IFRSVUUpLAogICAgICAgICAgICBUZW1wZXJhdHVyYV9BYnJpZ29fMTUwY21fTWF4aW1hID0gbWVhbihUZW1wZXJhdHVyYV9BYnJpZ29fMTUwY21fTWF4aW1hLCBuYS5ybSA9IFRSVUUpLCAKICAgICAgICAgICAgVGVtcGVyYXR1cmFfQWJyaWdvXzE1MGNtX01pbmltYSA9IG1lYW4oVGVtcGVyYXR1cmFfQWJyaWdvXzE1MGNtX01pbmltYSwgbmEucm0gPSBUUlVFKSkKYGBgCgo6Ojogey5hbGVydCAuYWxlcnQtaW5mb30KKipEZXNhZsOtbyoqCgpFeHRlbmTDqSBlbCBjw7NkaWdvIGRlIGFycmliYSBwYXJhIGNhbGN1bGFyIGVsIHByb21lZGlvIGRlIHRvZGFzIGxhcyAzMCB2YXJpYWJsZXMgaW5jbHVpZGFzIGVuIGxhIHRhYmxhIGBiYXJpbG9jaGVgLgoKwqFObyEgU2Vyw61hIHVuIGVqZXJjaWNpbyBhbHRhbWVudGUgdGVkaW9zby4KOjo6CgpQYXJhIG5vIHRlbmVyIHF1ZSBlc2NyaWJpciAzMCBsw61uZWFzIHRvZGFzIGlndWFsZXMsIHNlcsOtYSBtZWpvciBwb2RlciBoYWNlciB1biBwcm9tZWRpbyBwYXJhIGNhZGEgbWVzICoqeSBwYXJhIGNhZGEgdmFyaWFibGUqKi4gQWxnbyBjb21vIGVzdG86CgpgYGB7ciwgZXZhbCA9IEZBTFNFfQpiYXJpbG9jaGUgJT4lIAogIGdyb3VwX2J5KG1lcywgdmFyaWFibGUpICU+JSAKICBzdW1tYXJpc2UocHJvbWVkaW8gPSBtZWFuKHZhbG9yLCBuYS5ybSA9IFRSVUUpKQpgYGAKClBhcmEgcG9kZXIgaGFjZXIgZXNvIGhheSBxdWUgdGVuZXIgbG9zIGRhdG9zIGVuIHVuIGZvcm1hdG8gbcOhcyBsYXJnby4gUGFyYSBjb252ZXJ0aXJsbyBlbiB1bmEgdGFibGEgbcOhcyBsYXJnYSwgc2UgdXNhIGBwaXZvdF9sb25nZXIoKWAgKCJsb25nZXIiIGVzICJtw6FzIGxhcmdvIiBlbiBpbmdsw6lzKToKCmBgYHtyfQpiYXJpbG9jaGVfbGFyZ28gPC0gYmFyaWxvY2hlICU+JSAKICBzZWxlY3QoRmVjaGEsIHN0YXJ0c193aXRoKCJUZW1wZXJhdHVyYSIpKSAlPiUgCiAgcGl2b3RfbG9uZ2VyKGNvbHMgPSAtRmVjaGEsCiAgICAgICAgICAgICAgIG5hbWVzX3RvID0gInZhcmlhYmxlX2x1Z2FyX2FsdHVyYV90aXBvIiwKICAgICAgICAgICAgICAgdmFsdWVzX3RvID0gInZhbG9yIikKCmJhcmlsb2NoZV9sYXJnbwpgYGAKCkxvIHByaW1lcm8gcXVlIGhhY2UgZXN0ZSBjw7NkaWdvIGVzIHNlbGVjY2lvbmFyIHPDs2xvIGxhcyBjb2x1bW5hcyBkZSBpbnRlcsOpczogbGEgRmVjaGEgeSBsYXMgY29sdW1uYXMgZGUgdGVtcGVyYXR1cmEuIFBhcmEgbm8gdGVuZXIgcXVlIGVzY3JpYmlyIGxvcyBub21icmVzIGVudGVyb3MgZGUgbGFzIGNvbHVtbmFzIGRlIHRlbXBlcmF0dXJhICjCoXF1ZSBzb24gbXV5IGxhcmdvcyEpIHVzYSBsYSBmdW5jacOzbiBgc3RhcnRzX3dpdGgoKWAgcXVlLCBjb21vIHN1IG5vbWJyZSAoZW4gaW5nbMOpcykgbG8gaW5kaWNhLCBzZWxlY2Npb25hIHRvZGFzIGxhcyBjb2x1bW5hcyBxdWUgZW1waWV6YW4gY29uICJUZW1wZXJhdHVyYSIuCgo6Ojogey5hbGVydCAuYWxlcnQtc3VjY2Vzc30KRXhpc3RlbiBvdHJhcyBmdW5jaW9uZXMgYWNjZXNvcmlhcyBwYXJhIHNlbGVjY2lvbmFyIG11Y2hhcyBmdW5jaW9uZXMgZW5jYXBzdWxhZGFzIGVuIGVsIHBhcXVldGUgInRpZHlzZWxlY3QiLiBTaSBxdWVyw6lzIGxlZXIgbcOhcyBkZXRhbGxlcyBkZSBsYXMgZGlzdGludGFzIGZvcm1hcyBxdWUgcG9kw6lzIHNlbGVjY2lvbmFyIHZhcmlhYmxlcyBsZcOpIGxhIGRvY3VtZW50YWNpw7NuIHVzYW5kbyBgP3RpZHlzZWxlY3Q6Omxhbmd1YWdlYC4KOjo6CgpMdWVnbywgZWwgY8OzZGlnbyB1c2EgYHBpdm90X2xvbmdlcigpYCBwYXJhICJhbGFyZ2FyIiBsYSB0YWJsYSBlcyBsYSB0YWJsYSBxdWUgdmEgYSBtb2RpZmljYXI6IGBiYXJpbG9jaGVgLiBFbCBzZWd1bmRvIGFyZ3VtZW50byBzZSBsbGFtYSBgY29sc2AgeSBlcyB1biB2ZWN0b3IgY29uIGxhcyBjb2x1bW5hcyBxdWUgdGllbmVuIGxvcyB2YWxvcmVzIGEgImFsYXJnYXIiLiBQb2Ryw61hIHNlciB1biB2ZWN0b3IgZXNjcml0byBhIG1hbm8gKGFsZ28gY29tbyBgYygiVGVtcGVyYXR1cmFfQWJyaWdvXzE1MGNtIiwgIlRlbXBlcmF0dXJhX0Ficmlnb18xNTBjbV9NYXhpbWEiLi4uKWApIHBlcm8gY29uIG3DoXMgZGUgMzAgY29sdW1uYXMsIGVzY3JpYmlyIHRvZG8gZXNvIHNlcsOtYSB0ZWRpb3NvIHkgcHJvYmFibGVtZW50ZSBlc3RhcsOtYSBsbGVubyBkZSBlcnJvcmVzLiBFbCBjw7NkaWdvIGRlIGFycmliYSB1c2EgbGEgc2ludGF4aXMgZGUgIi1jb2x1bW5hIiBwYXJhIGluZGljYXIgcXVlIHNvbiB0b2RhcyBsYXMgY29sdW1uYXMgbWVub3MgbGEgY29sdW1uYXMgIkZlY2hhIi4KCkVsIHRlcmNlciB5IGN1YXJ0byBhcmd1bWVudG8gc29uIGxvcyBub21icmVzIGRlIGxhcyBjb2x1bW5hcyBkZSAibm9tYnJlIiB5IGRlICJ2YWxvciIgcXVlIHZhIGEgdGVuZXIgbGEgbnVldmEgdGFibGEuIENvbW8gbGEgbnVldmEgY29sdW1uYSBkZSBpZGVudGlmaWNhY2nDs24gdGllbmUgbG9zIGRhdG9zIGRlIGxhIHZhcmlhYmxlLCBlbCBsdWdhciBkb25kZSBzZSBtaWRlLCBsYSBhbHR1cmEgeSBlbCB0aXBvIGRlIHZhcmlhYmxlIChtw61uaW1hLCBtw6F4aW1hKSAsICJ2YXJpYWJsZVxfbHVnYXJcX2FsdHVyYVxfdGlwbyIgZXMgdW4gYnVlbiBub21icmUuIFkgbGEgY29sdW1uYSBkZSB2YWxvciB2YSBhIHRlbmVyLi4uIGJ1ZW5vLCBlbCB2YWxvci4KClRvbWF0ZSB1biBtb21lbnRvIHBhcmEgdmlzdWFsaXphciBsbyBxdWUgYWNhYmEgZGUgcGFzYXIuIExhIHRhYmxhIGFuY2hhIHRlbsOtYSB1biBtb250w7NuIGRlIGNvbHVtbmFzIGNvbiBkaXN0aW50b3MgZGF0b3MuIEFob3JhIGVzdG9zIGRhdG9zIGVzdMOhbiB1bm8gYXJyaWJhIGRlIG90cm8gZW4gbGEgY29sdW1uYSAidmFsb3IiLCBwZXJvIHBhcmEgaWRlbnRpZmljYXIgZWwgbm9tYnJlIGRlIGxhIGNvbHVtbmEgZGUgbGEgY3VhbCB2aW5pZXJvbiwgc2UgYWdyZWdhIGxhIGNvbHVtbmEgInZhcmlhYmxlIi4KCiFbUHJvY2VzbyBkZSBsYXJnbyBhIGFuY2hvXShpbWcvYW5jaG8tYS1sYXJnby5wbmcpCgpMYSBjb2x1bW5hIGB2YXJpYWJsZV9sdWdhcl9hbHR1cmFfdGlwb2AgdG9kYXbDrWEgbm8gZXMgbXV5IMO6dGlsIHBvcnF1ZSBjb250aWVuZSA0IGRhdG9zLCBsYSB2YXJpYWJsZSAodGVtcGVyYXR1cmEpLCBlbCBsdWdhciwgbGEgYWx0dXJhIHkgZWwgdGlwbyBkZSBvYnNlcnZhY2nDs24uIFNlcsOtYSBtZWpvciBzZXBhcmFyIGVzdGEgaW5mb3JtYWNpw7NuIGVuIGRvcyBjb2x1bW5hcyBsbGFtYWRhcyAidmFyaWFibGUiLCAibHVnYXIiLCAiYWx0dXJhIiB5ICJ0aXBvIi4gUGFyYSBlc28gZXN0w6EgbGEgZnVuY2nDs24gYHNlcGFyYXRlKClgLgoKYGBge3J9CmJhcmlsb2NoZV9sYXJnbyA8LSBzZXBhcmF0ZShiYXJpbG9jaGVfbGFyZ28sIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sID0gdmFyaWFibGVfbHVnYXJfYWx0dXJhX3RpcG8sIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50byA9IGMoInZhcmlhYmxlIiwgImx1Z2FyIiwgImFsdHVyYSIsICJ0aXBvIiksIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VwID0gIl8iKQpiYXJpbG9jaGVfbGFyZ28KYGBgCgpFbCBwcmltZXIgYXJndW1lbnRvLCBjb21vIHNpZW1wcmUsIGVzIGxhIHRhYmxhIGEgcHJvY2VzYXIuIEVsIHNlZ3VuZG8sIGBjb2xgLCBlcyBsYSBjb2x1bW5hIGEgc2VwYXJhciBlbiBkb3MgKG8gbcOhcykgY29sdW1uYXMgbnVldmFzLiBFbCB0ZXJjZXJvLCBgaW50b2AgZXMgZWwgbm9tYnJlIGRlIGxhcyBudWV2YXMgY29sdW1uYXMgcXVlIGBzZXBhcmF0ZSgpYCB2YSBhIGNyZWFyLiBFbCDDumx0aW1vIGFyZ3VtZW50byBlcyBgc2VwYCBxdWUgZGVmaW5lIGPDs21vIHJlYWxpemFyIGxhIHNlcGFyYWNpw7NuLiBQb3IgZGVmZWN0bywgYHNlcGAgZXMgdW5hIFtleHByZXNpw7NuIHJlZ3VsYXJdKGh0dHBzOi8vZXMud2lraXBlZGlhLm9yZy93aWtpL0V4cHJlc2klQzMlQjNuX3JlZ3VsYXIpIHF1ZSBjYXB0dXJhIGN1YWxxdWllciBjYXJhY3RlciBubyBhbGZhbnVtw6lyaWNvLgoKSGFicsOhcyBub3RhZG8gdW4gcHJvYmxlbWEuIFBhcmEgIlRlbXBlcmF0dXJhXF9BYnJpZ29cXzE1MGNtIiB5IHBhcmEgIlRlbXBlcmF0dXJhXF9JbnRlXF81Y20iLCBsYSBjb2x1bW5hICJ0aXBvIiBlcyBOQS4gRXN0byBlcyBwb3JxdWUgZWwgdGV4dG8gbm8gdGllbmUgNCAicGVkYXpvcyIuIFNlcsOtYSBjb252ZW5pZW50ZSBhZ3JlZ2FybGUgYWxnby4gQXN1bWllbmRvIHF1ZSBlcyB1bmEgdGVtcGVyYXR1cmEgbWVkaWEsIHNlIHB1ZWRlIG1vZGlmaWNhciBjb24gdW4gYGlmX2Vsc2UoKWA6CgpgYGB7cn0KYmFyaWxvY2hlX2xhcmdvIDwtIGJhcmlsb2NoZV9sYXJnbyAlPiUKICBtdXRhdGUodGlwbyA9IGlmX2Vsc2UoaXMubmEodGlwbyksICJNZWRpYSIsIHRpcG8pKQpiYXJpbG9jaGVfbGFyZ28KYGBgCgo6Ojogey5hbGVydCAuYWxlcnQtaW5mb30KKipEZXNhZsOtbyoqCgpKdW50w6EgdG9kb3MgbG9zIHBhc29zIGFudGVyaW9yZXMgZW4gdW5hIHNvbGEgY2FkZW5hIGRlIG9wZXJhY2lvbmVzIHVzYW5kbyBgJT4lYC4KOjo6Cgo6Ojogey5hbGVydCAuYWxlcnQtaW5mb30gCioqRGVzYWbDrW8qKiAKCkVzdGEgdGFibGEgc8OzbG8gdGllbmUgZGF0b3MgZGUgdGVtcGVyYXR1cmEuIMK/U2UgcG9kcsOtYSBpbmNsdWlyIGN1YWxxdWllciBvdHJhIHZhcmlhYmxlPyDCv0h1bWVkYWQsIGRpcmVjY2nDs24gZGVsIHZpZW50bywgZXN0YWRvIGRlbCB0aWVtcG8/IMK/Q8OzbW8gbG8gaGFyw61hcz8KOjo6CgojIyBEZSBsYXJnbyBhIGFuY2hvIGNvbiBgcGl2b3Rfd2lkZXIoKWAKCkFob3JhIGxhIHZhcmlhYmxlIGBiYXJpbG9jaGVfbGFyZ29gIGVzdMOhIGVuIGVsIGZvcm1hdG8gbcOhcyBsYXJnbyBwb3NpYmxlLiBUaWVuZSA2IGNvbHVtbmFzLCBkZSBsYXMgY3VhbGVzIHPDs2xvIHVuYSBlcyBsYSBjb2x1bW5hcyBjb24gdmFsb3Jlcy4gUGVybyBjb24gbG9zIGRhdG9zIGFzw60gbm8gcG9kcsOtYXMgaGFjZXIgdW4gZ3LDoWZpY28gZGUgcHVudG9zIHF1ZSBtdWVzdHJlLCBwb3IgZWplbXBsbywgbGEgcmVsYWNpw7NuIGVudHJlIGxhIHRlbXBlcmF0dXJhIG3DrW5pbWEgeSBsYSB0ZW1wZXJhdHVyYSBtw6F4aW1hLiBFbiBlc3RlIGNhc28gdG9kb3MgbG9zIHZhbG9yZXMgZW4gbGEgY29sdW1uYSBgdmFsb3JgIHRpZW5lbiBsYXMgbWlzbWFzIHVuaWRhZGVzLCBwZXJvIHBvZHLDrWEgdGVuZXIgb3RyYXMgdmFyaWFibGVzLCBjb21vIGh1bWVkYWQgbyBwcmVzacOzbi4gRW4gZXNlIGNhc28sIG5vIHRlbmRyw61hbiBsYXMgbWlzbWFzIHVuaWRhZGVzLCBwb3IgbG8gcXVlIG9wZXJhciBjb24gZXNlIHZlY3RvciBwb2Ryw61hIGRhciByZXN1bHRhZG9zIHNpbiBzZW50aWRvLiBNdWNoYXMgdmVjZXMgZXMgY29udmVuaWVudGUgeSBuYXR1cmFsIHRlbmVyIGxvcyBkYXRvcyBlbiB1biBmb3JtYXRvIGludGVybWVkaW8gZW4gZG9uZGUgaGF5IG3Dumx0aXBsZXMgY29sdW1uYXMgY29uIGxvcyB2YWxvcmVzIGRlIGRpc3RpbnRhcyB2YXJpYWJsZXMgb2JzZXJ2YWRhcy4KClBhc2EgImVuc2FuY2hhciIgdW5hIHRhYmxhIGVzdMOhIGxhIGZ1bmNpw7NuIGBwaXZvdF93aWRlcigpYCAoIndpZGVyIiBlcyAibcOhcyBhbmNoYSIgZW4gaW5nbMOpcykgeSBlbCBjw7NkaWdvIHBhcmEgY29uc2VndWlyIGVzdGUgZm9ybWF0byBpbnRlcm1lZGlvIGVzOgoKYGBge3J9CmJhcmlsb2NoZV9tZWRpbyA8LSBwaXZvdF93aWRlcihiYXJpbG9jaGVfbGFyZ28sIG5hbWVzX2Zyb20gPSB0aXBvLCB2YWx1ZXNfZnJvbSA9IHZhbG9yKQpiYXJpbG9jaGVfbWVkaW8KYGBgCgpOdWV2YW1lbnRlIGVsIHByaW1lciBhcmd1bWVudG8gZXMgbGEgdGFibGEgb3JpZ2luYWwuIEVsIHNlZ3VuZG8sIGBuYW1lc19mcm9tYCBlcyBsYSBjb2x1bW5hIGN1eW9zIHZhbG9yZXMgw7puaWNvcyB2YW4gYSBjb252ZXJ0aXJzZSBlbiBudWV2YXMgY29sdW1uYXMuIExhIGNvbHVtbmEgYHRpcG9gIHRpZW5lIGxvcyB2YWxvcmVzIGAiTWVkaWEiYCwgYCJNYXhpbWEiYCB5IGAiTWluaW1hImAgeSBlbnRvbmNlcyBsYSB0YWJsYSBudWV2YSB0ZW5kcsOhIHRyZXMgY29sdW1uYXMgY29uIGVzb3Mgbm9tYnJlcy4gRWwgdGVyY2VyIGFyZ3VtZW50bywgYHZhbHVlc19mcm9tYCwgZXMgbGEgY29sdW1uYSBkZSBsYSBjdWFsIHNhY2FyIGxvcyB2YWxvcmVzLgoKUGFyYSB2b2x2ZXIgYWwgZm9ybWF0byBtw6FzIGFuY2hvLCBiYXN0YSBjb24gYWdyZWdhciBtw6FzIGNvbHVtbmFzIGVuIGVsIGFyZ3VtZW50byBgbmFtZXNfZnJvbWA6CgpgYGB7cn0KcGl2b3Rfd2lkZXIoYmFyaWxvY2hlX2xhcmdvLCAKICAgICAgICAgICAgbmFtZXNfZnJvbSA9IGModmFyaWFibGUsIGx1Z2FyLCBhbHR1cmEsIHRpcG8pLCAKICAgICAgICAgICAgbmFtZXNfc2VwID0gIl8iLAogICAgICAgICAgICB2YWx1ZXNfZnJvbSA9IHZhbG9yKQpgYGAKCkVuIGVzdGEgbGxhbWFkYSB0YW1iacOpbiBlc3TDoSBlbCBhcmd1bWVudG8gYG5hbWVzX3NlcGAsIHF1ZSBkZXRlcm1pbmEgZWwgY2FyYWN0ZXIgcXVlIHNlIHVzYSBwYXJhIGNyZWFyIGVsIG5vbWJyZSBkZSBsYXMgbnVldmFzIGNvbHVtbmFzLgoKOjo6IHsuYWxlcnQgLmFsZXJ0LWluZm99CioqRGVzYWbDrW8qKgoKLSBDcmXDoSB1bmEgbnVldmEgdGFibGEsIGxsYW1hZGEgYGJhcmlsb2NoZV9zdXBlcmR1cGVyX2FuY2hvYCBxdWUgc2VhIGxhIHRhYmxhIG3DoXMgYW5jaGEgcG9zaWJsZSBxdWUgcG9kw6lzIGdlbmVyYXIgY29uIGVzdG9zIGRhdG9zLiDCv0PDs21vIGVzIGxhIHRhYmxhIG3DoXMgYW5jaGEgcG9zaWJsZSBxdWUgcG9kw6lzIGdlbmVyYXIgY29uIGVzdG9zIGRhdG9zPyDCv0N1w6FudGFzIGZpbGFzIHkgY29sdW1uYXMgdGllbmU/Cgo6OjoKCiMjIFVuaWVuZG8gdGFibGFzCgoKSGFzdGEgYWhvcmEgdG9kbyBsbyBxdWUgdXNhc3RlIGRlIHtkcGx5cn0gaW52b2x1Y3JhIHRyYWJhamFyIHkgbW9kaWZpY2FyIGNvbiB1bmEgc29sYSB0YWJsYSBhIGxhIHZleiwgcGVybyBlcyBtdXkgY29tw7puIHRlbmVyIGRvcyBvIG3DoXMgdGFibGFzIGNvbiBkYXRvcyByZWxhY2lvbmFkb3MuIEVuIGVzZSBjYXNvLCB0ZW5lbW9zIHF1ZSB1bmlyIGVzdGFzIHRhYmxhcy4gYSBwYXJ0aXIgZGUgdW5hIG8gbcOhcyB2YXJpYWJsZXMgZW4gY29tw7puIG8ga2V5cy4gRW4gRXhjZWwgdSBvdHJvIHByb2dyYW1hIGRlIGhvamFzIGRlIGPDoWxjdWxvLCBlc3RvIHNlIHJlc3VlbHZlIGNvbiBsYSBmdW5jacOzbiAiVkxPT0tVUCIgbyAiQlVTQ0FSViIsIGVuIFIgeSBlbiBwYXJ0aWN1bGFyIGRlbnRybyBkZWwgbXVuZG8gZGUge2RwbHlyfSBoYXkgcXVlIHVzYXIgbGEgZmFtaWxpYSBkZSBmdW5jaW9uZXMgYCpfam9pbigpYC4gSGF5IHVuYSBmdW5jacOzbiBjYWRhIHRpcG8gZGUgdW5pw7NuIHF1ZSBxdWVyYW1vcyBoYWNlci4KCkFzdW1pZW5kbyBxdWUgcXVlcsOpcyB1bmlyIGRvcyBkYXRhLmZyYW1lcyBvIHRhYmxhcyBgeGAgZSBgeWAgcXVlIHRpZW5lbiBlbiBjb23Dum4gdW5hIHZhcmlhYmxlIGBBYDoKCiFbXShpbWcvam9pbi5wbmcpCgotICAgYGZ1bGxfam9pbigpYDogZGV2dWVsdmUgdG9kYXMgbGFzIGZpbGFzIHkgdG9kYXMgbGFzIGNvbHVtbmFzIGRlIGFtYmFzIHRhYmxhcyBgeGAgZSBgeWAuIEN1YW5kbyBubyBjb2luY2lkZW4gbG9zIGVsZW1lbnRvcyBlbiBgeDFgLCBkZXZ1ZWx2ZSBgTkFgIChkYXRvIGZhbHRhbnRlKS4gRXN0byBzaWduaWZpY2EgcXVlIG5vIHNlIHBpZXJkZW4gZmlsYXMgZGUgbmluZ3VuYSBkZSBsYXMgZG9zIHRhYmxhcyBhw7puIGN1YW5kbyBubyBoYXkgY29pbmNpZGVuY2lhLiBFc3TDoSBlcyBsYSBtYW5lcmEgbcOhcyBzZWd1cmEgZGUgdW5pciB0YWJsYXMuCgotICAgYGxlZnRfam9pbigpYDogZGV2dWVsdmUgdG9kYXMgbGFzIGZpbGFzIGRlIGB4YCB5IHRvZGFzIGxhcyBjb2x1bW5hcyBkZSBgeGAgZSBgeWAuIExhcyBmaWxhcyBlbiBgeGAgcXVlIG5vIHRlbmdhbiBjb2luY2lkZW5jaWEgY29uIGB5YCB0ZW5kcsOhbiBgTkFgIGVuIGxhcyBudWV2YXMgY29sdW1uYXMuIFNpIGhheSBtw7psdGlwbGVzIGNvaW5jaWRlbmNpYXMgZW50cmUgYHhgZSBgeWAsIGRldnVlbHZlIHRvZGFzIGxhcyBjb2luY2lkZW5jaWFzIHBvc2libGVzLgoKLSAgIGByaWdodF9qb2luKClgOiBlcyBpZ3VhbCBxdWUgYGxlZnRfam9pbigpYCBwZXJvIGludGVyY2FtYmlhbmRvIGVsIG9yZGVuIGRlIGB4YCBlIGB5YC4gRW4gb3RyYXMgcGFsYWJyYXMsIGByaWdodF9qb2luKHgsIHkpYCBlcyBpZMOpbnRpY28gYSBgbGVmdF9qb2luKHksIHgpYC4KCi0gICBgaW5uZXJfam9pbigpYDogZGV2dWVsdmUgdG9kYXMgbGFzIGZpbGFzIGRlIGB4YCBkb25kZSBoYXkgY29pbmNpZGVuY2lhcyBjb24gYHlgIHkgdG9kYXMgbGFzIGNvbHVtbmFzIGRlIGB4YCBlIGB5YC4gU2kgaGF5IG3Dumx0aXBsZXMgY29pbmNpZGVuY2lhcyBlbnRyZSBgeGAgZSBgeWAsIGVudG9uY2VzIGRldnVlbHZlIHRvZGFzIGxhcyBjb2luY2lkZW5jaWFzLiBFc3RvIHNpZ25pZmljYSBxdWUgZWxpbWluYXLDoSBsYXMgZmlsYXMgKG9ic2VydmFjaW9uZXMpIHF1ZSBubyBjb2luY2lkYW4gZW4gYW1iYXMgdGFibGFzLCBsbyBxdWUgcHVlZGUgc2VyIHBlbGlncm9zby4KCiFbXShpbWcvam9pbl9mYW1pbHkucG5nKQoKRW4gZWwgYXJjaGl2byAiZXN0YWNpb25lc19zbW4uY3N2IiBoYXkgbWV0YWRhdG9zIGRlIGxhcyBlc3RhY2lvbmVzIG1ldGVvcm9sw7NnaWNhcyBkZWwgU2VydmljaW8gTWV0ZW9yb2zDs2dpY28gTmFjaW9uYWwgKG5vbWJyZSwgcHJvdmluY2lhLCB1YmljYWNpw7NuLCBldGMuLi4pOgoKYGBge3IsIG1lc3NhZ2U9RkFMU0V9CmVzdGFjaW9uZXMgPC0gcmVhZHI6OnJlYWRfY3N2KCJkYXRvcy9lc3RhY2lvbmVzX3Ntbi5jc3YiKSAKZXN0YWNpb25lcwpgYGAKClBvciBvdHJhIHBhcnRlLCBlbiBlbCBhcmNoaXZvICJvYnNlcnZhY2lvbmVzX3Ntbi5jc3YiIGhheSBkYXRvcyBkaWFyaW9zIGRlIHRlbXBlcmF0dXJhIG3DrW5pbWEgeSBtw6F4aW1hIG9ic2VydmFkb3MgZW4gY2FkYSB1bmEgY2FkYSB1bmEgeSBkaXN0aW50YXMgZmVjaGFzOgoKYGBge3J9Cm9ic2VydmFjaW9uZXMgPC0gcmVhZHI6OnJlYWRfY3N2KCJkYXRvcy9vYnNlcnZhY2lvbmVzX3Ntbi5jc3YiKQpvYnNlcnZhY2lvbmVzCmBgYAoKU2Vyw61hIG11eSDDunRpbCB1bmlyIGFtYmFzIHRhYmxhcyBkZSBtYW5lcmEgZGUgdGVuZXIgbGEgaW5mb3JtYWNpw7NuIGRlIGxhIHRlbXBlcmF0dXJhIGVuIGNhZGEgdWJpY2FjacOzbi4gCgpQYXJhIHVuaXIgbGFzIGRvcyB0YWJsYXMsIGN1YWxxdWllciBmdW5jacOzbiBqb2luIHJlcXVpZXJlIGNpZXJ0YSBpbmZvcm1hY2nDs246CgotICAgbGFzIHRhYmxhcyBhIHVuaXI6IHNvbiBsb3MgZG9zIHByaW1lcm9zIGFyZ3VtZW50b3MuCi0gICBxdcOpIHZhcmlhYmxlIG8gdmFyaWFibGVzIChzZSBwdWVkZSB1c2FyIG3DoXMgZGUgdW5hISkgdXNhciBwYXJhIGlkZW50aWZpY2FyIGNvaW5jaWRlbmNpYXM6IGVsIGFyZ3VtZW50byBgYnlgLgoKVW5hbW9zIGBvYnNlcnZhY2lvbmVzYCB5IGBlc3RhY2lvbmVzYCBwcmltZXJvIGNvbiBgZnVsbF9qb2luKClgOgoKYGBge3J9CmVzdGFjaW9uZXNfb2JzIDwtIGZ1bGxfam9pbihvYnNlcnZhY2lvbmVzLCBlc3RhY2lvbmVzLCBieSA9IGMoInN0YXRpb24iID0gIm5vbWJyZSIpKQplc3RhY2lvbmVzX29icwpgYGAKCkNvbW8gZWwgbm9tYnJlIGRlIGxhIGVzdGFjacOzbiBlbiBsYSB0YWJsYSBgb2JzZXJ2YWNpb25lc2AgZXN0w6EgZW4gdW5hIGNvbHVtbmEgbGxhbWFkYSAic3RhdGlvbiIsIG1pZW50cmFzIHF1ZSBlbiBsYSB0YWJsYSBgZXN0YWNpb25lc2AsIGVzdMOhIGVuIHVuYSBjb2x1bW5hIGxsYW1hZGEgIm5vbWJyZSIuIEN1YW5kbyBwYXNhIGVzbywgZW4gZWwgYXJndW1lbnRvIGBieWAgaGF5IHF1ZSBwb25lciB1biB2ZWN0b3IgY29uIG5vbWJyZXMuCgpTaSBtaXLDoXMgZGUgY2VyY2EgbGEgdGFibGEgdW5pZGEgdmFzIGEgdmVyIHVuIHBhciBkZSBjb3NhczoKCi0gICBUb2RhcyBsYXMgY29sdW1uYXMgZGUgYG9ic2VydmFjaW9uZXNgIHkgZGUgYGVzdGFjaW9uZXNgIGVzdMOhbiBwcmVzZW50ZXMuCi0gICBUb2RhcyBsYXMgb2JzZXJ2YWNpb25lcyBlc3TDoW4gcHJlc2VudGVzLCBhw7puIGxvcyBlc3RhY2lvbmVzIHF1ZSBlc3TDoW4gcHJlc2VudGVzIGVuIGBlc3RhY2lvbmVzYCBwZXJvIG5vIGVuIGBvYnNlcnZhY2lvbmVzYCB5IHZpY2V2ZXJzYS4gCgrCv0V4aXN0ZSBhbGd1bmEgZXN0YWNpw7NuIHF1ZSBubyBlc3TDqSBlbiBhbWJhcyB0YWJsYXM/IFNpIGNvbXBhcsOhcyBsYSBjYW50aWRhZCBkZSBmaWxhcyBkZSBgb2JzZXJ2YWNpb25lc2AgeSBkZSBgZXN0YWNpb25lc19vYnNgLCB2YXMgYSB2ZXIgcXVlIGxhIHByaW1lcmEgdGllbmUgYHIgbnJvdyhvYnNlcnZhY2lvbmVzKWAgZmlsYXMgeSBsYSBzZWd1bmRhLCBgciBucm93KGVzdGFjaW9uZXNfb2JzKWAuIEVzdG8geWEgZGEgdW5hIHBpc3RhIGRlIHF1ZSBwcm9iYWJsZW1lbnRlIGhheWEgdW5hIGVzdGFjacOzbiBlbiBgZXN0YWNpb25lc2AgcXVlIG5vIGVzdMOhIGVuIGBvYnNlcnZhY2lvbmVzYCBxdWUgZXMgbGEgZmlsYSBleHRyYS4KClBhcmEgYnVzY2FyIHNpc3RlbcOhdGljYW1lbnRlIGVzdGFzIGVzdGFjaW9uZXMgZXJyYW50ZXMgaGF5IHF1ZSB1c2FyIGBhbnRpX2pvaW5gLCBxdWUgZGV2dWVsdmUgbGFzIGZpbGFzIGRlIGxhIHRhYmxhIGRlIGxhIGl6cXVpZXJkYSBxdWUgbm8gZXN0w6EgZW4gbGEgZGVyZWNoYS4gRW50b25jZXMsIHVzYW5kbyBleGFjdGFtZW50ZSBlbCBtaXNtbyBjw7NkaWdvIGRlIGFycmliYSBwZXJvIGNhbWJpYW5kbyBgZnVsbF9qb2luYCBwb3IgYGFudGlfam9pbmAsIHF1ZWRhOgoKYGBge3J9CmFudGlfam9pbihvYnNlcnZhY2lvbmVzLCBlc3RhY2lvbmVzLCBieSA9IGMoInN0YXRpb24iID0gIm5vbWJyZSIpKQpgYGAKCkVuIGxhIHRhYmxhIGBvYnNlcnZhY2lvbmVzYCwgbGEgZXN0YWNpw7NuICJQUkVTSURFTkNJQSBST1FVRSBTQUVOWiBQRcORQSBBRVJPIiBleGlzdGUsIHRpZW5lIHVuIHByb2JsZW1hIGRlIGNvZGlmaWNhY2nDs24hIMK/UXXDqSBwYXNhIHNpIGludGVyY2FtYmnDoXMgZWwgb3JkZW4gZGUgbGFzIHZhcmlhYmxlcyAoeSBlbCBvcmRlbiBkZSBsb3Mgbm9tYnJlcyBlbiBlbCB2ZWN0b3IgcXVlIGxlIHBhc2Ftb3MgYSBgYnlgKT8KCgpgYGB7cn0KYW50aV9qb2luKGVzdGFjaW9uZXMsIG9ic2VydmFjaW9uZXMsIGJ5ID0gYygibm9tYnJlIiA9ICJzdGF0aW9uIikpCmBgYApFc3RvIG5vcyBkaWNlIHF1ZSBsYSBlc3RhY2nDs24gIlBSRVNJREVOQ0lBIFJPUVVFIFNBRU5aIFBFw5FBIEFFUk8iLCBlc3TDoSBlbiBsYSB0YWJsYSBgZXN0YWNpb25lc2AgY29uIGxhIGNvZGlmaWNhY2nDs24gY29ycmVjdGEuIGBhbnRpX2pvaW5gIGVzIG11eSDDunRpbCBwYXJhIGVuY29udHJhciBwcm9ibGVtYXMgY29tbyBlc3Rvcy4gCgpgZnVsbF9qb2luYCBlcyBsYSBvcGNpw7NuIG3DoXMgc2VndXJhIHNpIG5vIHNhYsOpcyBzaSB0b2RhcyBsYXMgb2JzZXJ2YWNpb25lcyBkZSB1bmEgdGFibGEgZXN0w6FuIHByZXNlbnRlIGVuIGEgb3RyYS4gU2kgc8OzbG8gdGUgaW50ZXJlc2EgY29uc2VydmFyIGxhcyBmaWxhcyBkZSBsYSB0YWJsYSBkZSBsYSBpenF1aWVyZGEgKGVuIGVzdGUgY2FzbyBgZXN0YWNpb25lc2AgZW50b25jZXM6CgpgYGB7cn0Kb2JzX2VzdGFjaW9uZXMgPC0gbGVmdF9qb2luKG9ic2VydmFjaW9uZXMsIGVzdGFjaW9uZXMsICBieSA9IGMoInN0YXRpb24iID0gIm5vbWJyZSIpKQpvYnNfZXN0YWNpb25lcwpgYGAKCkVzdGEgdGFibGEgdGllbmUgbGEgbWlzbWEgY2FudGlkYWQgZGUgZmlsYXMgcXVlIGBvYnNlcnZhY2lvbmVzYC4gwr9RdcOpIHBhc8OzIGNvbiBsYSBlc3RhY2nDs24gcXVlIGVzdMOhIG1hbCBjb2RpZmljYWRhPyBGaWx0cmFuZG8gbG9zIGRhdG9zOgoKYGBge3J9Cm9ic19lc3RhY2lvbmVzICU+JSAKICBmaWx0ZXIoc3RhcnRzV2l0aChzdGF0aW9uLCAiUFJFU0lERU5DSUEgUk9RVUUiKSkKYGBgCgpgbGVmdF9qb2luYCBsZSBwdXNvIGBOQWAgZW4gbGFzIGZpbGFzIGRlIGBvYnNlcnZhY2lvbmVzYCBxdWUgbm8gdGllbmVuIGNvaW5jaWRlbmNpYSBjb24gYGVzdGFjaW9uZXNgLgoKRmluYWxtZW50ZSwgc2kgcXVpc2llcmFzIHF1ZWRhcnRlIHPDs2xvIGNvbiBsYXMgb2JzZXJ2YWNpb25lcyBxdWUgZXN0w6FuIHByZXNlbnRlcyBlbiBhbWJhcyB0YWJsYXMgdXNhbW9zIGBpbm5lcl9qb2luKClgLgoKYGBge3J9Cm9ic19lc3RhY2lvbmVzIDwtIGlubmVyX2pvaW4ob2JzZXJ2YWNpb25lcywgZXN0YWNpb25lcywgIGJ5ID0gYygic3RhdGlvbiIgPSAibm9tYnJlIikpCm9ic19lc3RhY2lvbmVzCmBgYAoKRW4gZXN0ZSBjYXNvLCBwZXJkZW1vcyBsYXMgZmlsYXMgZGUgYG9ic2VydmFjaW9uZXNgIHF1ZSBubyBlbmNvbnRyYXJvbiBjb2luY2lkZW5jaWEgZW4gYGVzdGFjaW9uZXNgIHkgdmljZXZlcnNhLgoKOjo6IHsuYWxlcnQgLmFsZXJ0LWluZm99CioqRGVzYWbDrW8qKgoKRW4gZWwgYXJjaGl2byAicmFkaWFjacOzbl9zbW4uY3N2IiBoYXkgZGF0b3MgZGUgcmFkaWFjacOzbiBtZWRpYSBkaWFyaWEgbWVkaWRvcyBlbiBkb3MgZXN0YWNpb25lcyBkZWwgU2VydmljaW8gTWV0ZW9yb2zDs2dpY28gTmFjaW9uYWwuIEVsIG9iamV0aXZvIGVzIHF1ZSB1bmFzIGBvYnNlcnZhY2lvbmVzYCBjb24gZXNvcyBkYXRvcyB0ZW5pZW5kbyBlbiBjdWVudGEgdGFudG8gbGEgZXN0YWNpw7NuIGNvbW8gbGEgZmVjaGEuCgoxLiAgTGVlIGxhIGJhc2UgZGUgZGF0b3MgYHJhZGlhY2lvbl9zbW4uY3N2YCBlbiB1bmEgbnVldmEgdmFyaWFibGUgcXVlIHNlIGxsYW1lIGByYWRpYWNpb25gLgoyLiAgUmV2aXPDoSBlbCBub21icmUgZGUgbGFzIHZhcmlhYmxlcyBlbiBlc3RhIGJhc2UgZGUgZGF0b3MsIMK/c2UgbGxhbWFuIGlndWFsIHF1ZSBsYXMgdmFyaWFibGVzIGVuIGBvYnNlcnZhY2lvbmVzYD8KMy4gU2kgdGUgaW50ZXJlc2Egc2FiZXIgbGEgcmVsYWNpw7NuIGVudHJlIGxhIHRlbXBlcmF0dXJhIHkgbGEgcmFkaWFjacOzbiBtZWRpZGEsIMK/cXXDqSB0aXBvIGRlIGpvaW4gY3Jlw6lzIHF1ZSB0ZSBjb252aWVuZSB1c2FyPyAoQXl1ZGE6IMK/VGUgc2lydmUgZGUgYWxnbyB0ZW5lciBkYXRvcyBkZSBlc3RhY2lvbmVzIHkgZmVjaGFzIGRvbmRlIHNlIG1pZGnDsyB0ZW1wZXJhdHVyYSBwZXJvIG5vIHJhZGlhY2nDs24gbyBkb25kZSBzZSBtaWRpw7MgcmFkaWFjacOzbiBwZXJvIG5vIHRlbXBlcmF0dXJhPykKNC4gVW7DrSBsYXMgdGFibGEgdXNhbmRvIGxhIGZ1bmNpw7NuIGpvaW4gcXVlIGVsZWdpc3RlLiBUZW7DqSBlbiBjdWVudGEgcXVlIGFob3JhIHVzYW1vcyBkb3MgdmFyaWFibGVzIGxsYXZlIGBzdGF0aW9uYCB5IGBkYXRlYC4gQnVzY8OhIGVuIGxhIGRvY3VtZW50YWNpw7NuIGPDs21vIGluZGljYXJsZSBlc28gYSBsYSBmdW5jacOzbi4KOjo6Cgo6Ojogey5idG4tZ3JvdXAgcm9sZT0iZ3JvdXAiIGFyaWEtbGFiZWw9Ik5hdmVnYWNpw7NuIn0KPGEgaHJlZj0gIjA1LWRwbHlyLmh0bWwiIGNsYXNzID0gImJ0biBidG4tcHJpbWFyeSI+QW50ZXJpb3I8L2E+IAo8YSBocmVmPSAiMDctZ3JhZmljb3MtSS5odG1sIiBjbGFzcyA9ICJidG4gYnRuLXByaW1hcnkiPlNpZ3VpZW50ZTwvYT4KOjo6CgoK</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("06-dplyr-tidyr-II.Rmd");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
