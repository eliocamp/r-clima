<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Apariencia de gráficos</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<script src="site_libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R para Clima</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="hoja-de-ruta.html">Hoja de ruta</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Temas
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="01-introduccion.html">Introducción</a>
    </li>
    <li>
      <a href="02-proyectos.html">Proyectos de RStudio</a>
    </li>
    <li>
      <a href="03-reportes-I.html">Reportes I</a>
    </li>
    <li>
      <a href="04-lectura.html">Lectura de datos</a>
    </li>
    <li>
      <a href="05-dplyr.html">Manipulación de datos I</a>
    </li>
    <li>
      <a href="06-graficos-I.html">Gráficos I</a>
    </li>
    <li>
      <a href="07-graficos-II.html">Gráficos II</a>
    </li>
    <li>
      <a href="08-dplyr-tidyr-II.html">Manipulación de datos II</a>
    </li>
    <li>
      <a href="09-funciones.html">Funciones</a>
    </li>
    <li>
      <a href="10-ggplot-III.html">Gráficos para publicar</a>
    </li>
    <li>
      <a href="11-reportes-II.html">Reportes II</a>
    </li>
    <li>
      <a href="12-publicar.html">Publicar reportes</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Desafíos
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="desafio-1.html">Leer y analizar datos</a>
    </li>
    <li>
      <a href="desafio-2.html">Graficar datos</a>
    </li>
    <li>
      <a href="desafio-3.html">Generar un informe</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Apariencia de gráficos</h1>

</div>


<div id="escalas" class="section level2">
<h2>Escalas</h2>
<p><a href="06-graficos-I.html">Previamente</a> comentamos que el <em>mapeo</em> de una variable en un elemento geométrico, por ejemplo cuando le asignamos distintos colores a los puntos que representan cada continente, usa una <strong>escala</strong> para definir, en este caso, que color le corresponde a cada elemento.</p>
<p>También cambiamos la apariencia del relleno (o <code>fill</code>) de barras y la forma de los puntos (o <code>shape</code>). Para esto, {ggplot2} siempre usa una escala que podemos modificar de acuerdo a nuestro gusto y teniendo en cuenta cómo queremos comunicar nuestros resultados.</p>
<p>Por supuesto, modificar una escala implica sumar una nueva capa al gráfico sumando una nueva función. Todas las funciones de escala comienzan con <code>scale</code> (de escala en inglés), el típo de apariencia que queremos modificar (<code>color</code>, <code>fill</code>, <code>shape</code>, etc) y en muchos casos un nombre o una característica de esa escala.</p>
<p>Para mostrar como funciona, vamos a descargar datos de las estaciones meteorológicas del Servicio Meteorológico Nacional para el mes de agosto de 2020 y con suerte al final de este documento tendremos un gráfico listo para publicar.</p>
<p>Pero por supuesto, primero tenemos que manipular los datos para poder utilizarlos. En particular necesitaremos información de las estaciones, sus metadatos, que se encuentran en un archivo distinto. Y de paso calculamos la variable que nos interesa: la temperatura máxima media para agosto.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>estaciones &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;datos/estaciones_smn.csv&quot;</span>) <span class="co"># Metadatos</span></span>
<span id="cb1-2"><a href="#cb1-2"></a></span>
<span id="cb1-3"><a href="#cb1-3"></a>fechas &lt;-<span class="st"> </span><span class="kw">seq.Date</span>(lubridate<span class="op">::</span><span class="kw">ymd</span>(<span class="dv">20200801</span>), lubridate<span class="op">::</span><span class="kw">ymd</span>(<span class="dv">20200831</span>), <span class="dt">by =</span> <span class="st">&quot;1 day&quot;</span>)</span>
<span id="cb1-4"><a href="#cb1-4"></a></span>
<span id="cb1-5"><a href="#cb1-5"></a>observaciones &lt;-<span class="st"> </span><span class="kw">GetSMNData</span>(fechas, <span class="dt">type =</span> <span class="st">&quot;daily&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="st">  </span><span class="kw">group_by</span>(station) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">tmax_media =</span> <span class="kw">mean</span>(tmax, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb1-8"><a href="#cb1-8"></a>            <span class="dt">tmax_var =</span> <span class="kw">sd</span>(tmax, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</span>
<span id="cb1-9"><a href="#cb1-9"></a></span>
<span id="cb1-10"><a href="#cb1-10"></a>observaciones &lt;-<span class="st"> </span><span class="kw">left_join</span>(observaciones, estaciones, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;station&quot;</span> =<span class="st"> &quot;nombre&quot;</span>)) </span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>observaciones <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="st">  </span><span class="kw">filter</span>(region <span class="op">!=</span><span class="st"> &quot;ANTARTIDA&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(lon, lat)) <span class="op">+</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="st">  </span><span class="kw">geom_point</span>() </span></code></pre></div>
<p><img src="10-ggplot-III_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>Por ahora este gráfico no nos dice nada, necesitamos agregarle una capa con el mapa tal cual hicimos previamente.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>mapa &lt;-<span class="st"> </span>rnaturalearth<span class="op">::</span><span class="kw">ne_states</span>(<span class="dt">country =</span> <span class="kw">c</span>(<span class="st">&quot;argentina&quot;</span>), <span class="dt">returnclass =</span> <span class="st">&quot;sf&quot;</span>)</span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a>observaciones <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="st">  </span><span class="kw">filter</span>(region <span class="op">!=</span><span class="st"> &quot;ANTARTIDA&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(lon, lat)) <span class="op">+</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> mapa, <span class="dt">fill =</span> <span class="ot">NA</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> <span class="fl">0.2</span>, <span class="dt">inherit.aes =</span> <span class="ot">FALSE</span>) </span></code></pre></div>
<p><img src="10-ggplot-III_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<div id="escala-de-colores-y-otras-características" class="section level3">
<h3>Escala de colores y otras características</h3>
<p>Si bien ahora podemos identificar donde están las estaciones, no tenemos información de la temperatura máxima media. Podríamos cambiar el color de los puntos para que representen el valor que toma esa variable en cada estación.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>observaciones <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="st">  </span><span class="kw">filter</span>(region <span class="op">!=</span><span class="st"> &quot;ANTARTIDA&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(lon, lat)) <span class="op">+</span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> tmax_media)) <span class="op">+</span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> mapa, <span class="dt">fill =</span> <span class="ot">NA</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> <span class="fl">0.2</span>, <span class="dt">inherit.aes =</span> <span class="ot">FALSE</span>) </span></code></pre></div>
<p><img src="10-ggplot-III_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Pero esta escala de colores que usa {ggplot2} por defecto no es de las mejores, es difícil diferenciar entre los valores. Existen infinitas paletas de colores que se pueden usar en ggplot, algunas por ejemplo buscan poder distinguirse si imprimimos el gráfico en blanco y negro, otras están diseñadas para que personas con daltonismo puedan distinguir los colores. Una escala o paleta de colores muy usada es <a href="https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html"><strong>viridis</strong></a> que fue creada justamente para resolver este y otros problemas. También existe otra gran familia de paletas de colores llamada <a href="https://colorbrewer2.org/"><strong>ColorBrewer</strong></a>.</p>
<p>Vamos a probar la paleta “YlOrRd” , esta paleta es <em>secuencial</em> y es justo lo que necesitamos para visualizar una variable continua como la temperatura. Cómo estamos modificando el <em>color</em>, la función a usar será <code>scale_color_distiller()</code>, la hermana <em>continua</em> de <code>scale_color_brewer()</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>observaciones <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="st">  </span><span class="kw">filter</span>(region <span class="op">!=</span><span class="st"> &quot;ANTARTIDA&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(lon, lat)) <span class="op">+</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> tmax_media)) <span class="op">+</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> mapa, <span class="dt">fill =</span> <span class="ot">NA</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> <span class="fl">0.2</span>, <span class="dt">inherit.aes =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="st">  </span><span class="kw">scale_color_distiller</span>(<span class="dt">palette =</span> <span class="st">&quot;YlOrRd&quot;</span>, <span class="dt">direction =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="10-ggplot-III_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>En este caso también agregamos el argumento <code>direction = 1</code> para que la paleta de colores los muestre de más oscuros a más claros. Esta desición es estética y muchas veces depende de las variables a graficar.</p>
<div class="alert alert-info">
<p><strong>Desafío</strong></p>
<p>A modo de prueba, cambia la paleta de colores actual por la de Viridis. Para eso tenés que usar <code>scale_color_viridis_c()</code>. La “c” del final viene de <em>continuous</em> y se usa para variables continuas, mientras que si los datos son discretos o categorías, se usa “d” al final.</p>
</div>
<p>Nuestro gráfico va quedando mejor y podemos aprovechar la capacidad de {ggplot2} de <em>mapear</em> variables a los elementos del gráfico y visualizar la variabilidad de la temperatura máxima modificando el tamaño de los puntos de acuerdo al desvío estandar.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>observaciones <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="st">  </span><span class="kw">filter</span>(region <span class="op">!=</span><span class="st"> &quot;ANTARTIDA&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(lon, lat)) <span class="op">+</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> tmax_media, <span class="dt">size =</span> tmax_var)) <span class="op">+</span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> mapa, <span class="dt">fill =</span> <span class="ot">NA</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> <span class="fl">0.2</span>, <span class="dt">inherit.aes =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="st">  </span><span class="kw">scale_color_distiller</span>(<span class="dt">palette =</span> <span class="st">&quot;YlOrRd&quot;</span>, <span class="dt">direction =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 1 rows containing missing values (geom_point).</code></pre>
<p><img src="10-ggplot-III_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Es interesante ver como las temperaturas máximas medias mayores también tienen mayor variabilidad. Pero ahora algunos puntos se superponen y es posible que no estemos viendo algunas estaciones. Vamos a arreglar eso agregando transparencia y de paso modificar el tamaño de los puntos con la escala correspondiente <code>scale_size_area()</code> y sacar la legenda con <code>guide = NULL</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>observaciones <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="st">  </span><span class="kw">filter</span>(region <span class="op">!=</span><span class="st"> &quot;ANTARTIDA&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(lon, lat)) <span class="op">+</span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> tmax_media, <span class="dt">size =</span> tmax_var), <span class="dt">alpha =</span> <span class="fl">0.7</span>) <span class="op">+</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> mapa, <span class="dt">fill =</span> <span class="ot">NA</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> <span class="fl">0.2</span>, <span class="dt">inherit.aes =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="st">  </span><span class="kw">scale_color_distiller</span>(<span class="dt">palette =</span> <span class="st">&quot;YlOrRd&quot;</span>, <span class="dt">direction =</span> <span class="dv">1</span>) <span class="op">+</span></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="st">  </span><span class="kw">scale_size_area</span>(<span class="dt">max_size =</span> <span class="dv">4</span>, <span class="dt">guide =</span> <span class="ot">NULL</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 1 rows containing missing values (geom_point).</code></pre>
<p><img src="10-ggplot-III_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>
<div id="escalas-de-ejes" class="section level3">
<h3>Escalas de ejes</h3>
<p>Ahora que la información del gráfico se ve bien, pasemos a los ejes. Al igual que para el color, el tamaño y otros elementos del gráfico, para los ejes también existen funciones “scale”. En este caso las escalas que modifican los ejes justamente comienzan con <code>scala_x_</code> o <code>scale_y_</code> según sea el caso y hay una gran variedad de opciones dependiendo del tipo de dato que estamos graficando en cada eje.</p>
<p>Si en el eje y graficamos una variable discreta entonces podremos modificar su especto con <code>scale_y_discrete()</code>. En este caso la función <code>geom_sf()</code> automáticamente modifica la apariencia de los ejes y no requieren de mucho trabajo.</p>
<p>Pero queremos que nuestro gráfico quede listo para publicar y la “W” de west (oeste en inglés) puede no ser muy amigable. Modifiquemos entonces el eje x con la función <code>scale_x_continuous()</code>. En este caso queremos modificar las etiquetas o <code>labels</code> y para eso usaremos la función <code>LonLabel()</code> del paquete {metR}. Esta función recibe una función anónima que toma cada longitud y el cambia el “°W° por”°O".</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>observaciones <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="st">  </span><span class="kw">filter</span>(region <span class="op">!=</span><span class="st"> &quot;ANTARTIDA&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(lon, lat)) <span class="op">+</span></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> tmax_media, <span class="dt">size =</span> tmax_var), <span class="dt">alpha =</span> <span class="fl">0.7</span>) <span class="op">+</span></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> mapa, <span class="dt">fill =</span> <span class="ot">NA</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> <span class="fl">0.2</span>, <span class="dt">inherit.aes =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="st">  </span><span class="kw">scale_color_distiller</span>(<span class="dt">palette =</span> <span class="st">&quot;YlOrRd&quot;</span>, <span class="dt">direction =</span> <span class="dv">1</span>) <span class="op">+</span></span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="st">  </span><span class="kw">scale_size_area</span>(<span class="dt">max_size =</span> <span class="dv">4</span>, <span class="dt">guide =</span> <span class="ot">NULL</span>) <span class="op">+</span></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">labels =</span> <span class="cf">function</span>(x) <span class="kw">LonLabel</span>(x, <span class="dt">west =</span> <span class="st">&quot;°O&quot;</span>))</span></code></pre></div>
<pre><code>## Warning: Removed 1 rows containing missing values (geom_point).</code></pre>
<p><img src="10-ggplot-III_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
</div>
<div id="elementos-de-texto" class="section level2">
<h2>Elementos de texto</h2>
<p>Ya sumamos 3 escalas y el gráfico ya se ve muy bien. ¿Cómo hacemos si queremos identificar estaciones individuales? Por ahora es difícil, pero podríamos agregar etiquetas de texto con el nombre de cada estación al lado de cada punto usando <code>geom_text()</code>, y en este caso la apariencia está dada por <code>label</code> o etiqueta:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>observaciones <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="st">  </span><span class="kw">filter</span>(region <span class="op">!=</span><span class="st"> &quot;ANTARTIDA&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(lon, lat)) <span class="op">+</span></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> tmax_media, <span class="dt">size =</span> tmax_var), <span class="dt">alpha =</span> <span class="fl">0.7</span>) <span class="op">+</span></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> mapa, <span class="dt">fill =</span> <span class="ot">NA</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> <span class="fl">0.2</span>, <span class="dt">inherit.aes =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="st">  </span><span class="kw">scale_color_distiller</span>(<span class="dt">palette =</span> <span class="st">&quot;YlOrRd&quot;</span>, <span class="dt">direction =</span> <span class="dv">1</span>) <span class="op">+</span></span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="st">  </span><span class="kw">scale_size_area</span>(<span class="dt">max_size =</span> <span class="dv">4</span>, <span class="dt">guide =</span> <span class="ot">NULL</span>) <span class="op">+</span></span>
<span id="cb12-8"><a href="#cb12-8"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">labels =</span> <span class="cf">function</span>(x) <span class="kw">LonLabel</span>(x, <span class="dt">west =</span> <span class="st">&quot;°O&quot;</span>)) <span class="op">+</span></span>
<span id="cb12-9"><a href="#cb12-9"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> station)) </span></code></pre></div>
<pre><code>## Warning: Removed 1 rows containing missing values (geom_point).</code></pre>
<p><img src="10-ggplot-III_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>Pero nos olvidamos que tenemos más de 100 estaciones, es imposible agregarle etiquetas a todos. Pero podríamos querer resaltar algunos, tal vez los de una región en particular o los que cumplen con la condición de tener las mayores temperaturas máximas medias. Para eso vamos a generarnos una nueva tabla con las estaciones que queremos resaltar y de paso usarla dentro de <code>geom_text()</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>extremos_temperatura &lt;-<span class="st"> </span>observaciones <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="st">  </span><span class="kw">filter</span>(region <span class="op">!=</span><span class="st"> &quot;ANTARTIDA&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="st">  </span><span class="kw">filter</span>(tmax_media <span class="op">==</span><span class="st"> </span><span class="kw">max</span>(tmax_media, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">|</span></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="st">           </span>tmax_media <span class="op">==</span><span class="st"> </span><span class="kw">min</span>(tmax_media, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="co"># Estaciones con extremos!</span></span>
<span id="cb14-5"><a href="#cb14-5"></a></span>
<span id="cb14-6"><a href="#cb14-6"></a>observaciones <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb14-7"><a href="#cb14-7"></a><span class="st">  </span><span class="kw">filter</span>(region <span class="op">!=</span><span class="st"> &quot;ANTARTIDA&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb14-8"><a href="#cb14-8"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(lon, lat)) <span class="op">+</span></span>
<span id="cb14-9"><a href="#cb14-9"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> tmax_media, <span class="dt">size =</span> tmax_var), <span class="dt">alpha =</span> <span class="fl">0.7</span>) <span class="op">+</span></span>
<span id="cb14-10"><a href="#cb14-10"></a><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> mapa, <span class="dt">fill =</span> <span class="ot">NA</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> <span class="fl">0.2</span>, <span class="dt">inherit.aes =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb14-11"><a href="#cb14-11"></a><span class="st">  </span><span class="kw">scale_color_distiller</span>(<span class="dt">palette =</span> <span class="st">&quot;YlOrRd&quot;</span>, <span class="dt">direction =</span> <span class="dv">1</span>) <span class="op">+</span></span>
<span id="cb14-12"><a href="#cb14-12"></a><span class="st">  </span><span class="kw">scale_size_area</span>(<span class="dt">max_size =</span> <span class="dv">4</span>, <span class="dt">guide =</span> <span class="ot">NULL</span>) <span class="op">+</span></span>
<span id="cb14-13"><a href="#cb14-13"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">labels =</span> <span class="cf">function</span>(x) <span class="kw">LonLabel</span>(x, <span class="dt">west =</span> <span class="st">&quot;°O&quot;</span>)) <span class="op">+</span></span>
<span id="cb14-14"><a href="#cb14-14"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> station),</span>
<span id="cb14-15"><a href="#cb14-15"></a>            <span class="dt">data =</span> extremos_temperatura, <span class="co"># Esta capa usa la tabla extremos_temperatura!</span></span>
<span id="cb14-16"><a href="#cb14-16"></a>            <span class="dt">size =</span> <span class="fl">2.5</span>) </span></code></pre></div>
<pre><code>## Warning: Removed 1 rows containing missing values (geom_point).</code></pre>
<p><img src="10-ggplot-III_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<div class="alert alert-success">
<p>Del código anterior surge algo muy importante: es posible generar capas en un gráfico usando una data.frame <em>distinto</em> al que usamos para graficar las capas anteriores. Esto es útil principalmente para definir etiquetas o resaltar determinadas observaciones.</p>
<p>Y el truco está en que ambos data.frames tienen las variables <code>lon</code> y <code>lat</code> y entonces {ggplot2} puede identificar en que parte del gráfico (en que valores de x y en que valores de y) colocar cada elemento.</p>
</div>
<p>Veamos ahora una (de varias) maneras agregar o modificar elementos de texto en el gráfico. Vamos a usar una nueva función (y una nueva capa!), <code>labs()</code>:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>observaciones <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="st">  </span><span class="kw">filter</span>(region <span class="op">!=</span><span class="st"> &quot;ANTARTIDA&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(lon, lat)) <span class="op">+</span></span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> tmax_media, <span class="dt">size =</span> tmax_var), <span class="dt">alpha =</span> <span class="fl">0.7</span>) <span class="op">+</span></span>
<span id="cb16-5"><a href="#cb16-5"></a><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> mapa, <span class="dt">fill =</span> <span class="ot">NA</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> <span class="fl">0.2</span>, <span class="dt">inherit.aes =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb16-6"><a href="#cb16-6"></a><span class="st">  </span><span class="kw">scale_color_distiller</span>(<span class="dt">palette =</span> <span class="st">&quot;YlOrRd&quot;</span>, <span class="dt">direction =</span> <span class="dv">1</span>) <span class="op">+</span></span>
<span id="cb16-7"><a href="#cb16-7"></a><span class="st">  </span><span class="kw">scale_size_area</span>(<span class="dt">max_size =</span> <span class="dv">4</span>, <span class="dt">guide =</span> <span class="ot">NULL</span>) <span class="op">+</span></span>
<span id="cb16-8"><a href="#cb16-8"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">labels =</span> <span class="cf">function</span>(x) <span class="kw">LonLabel</span>(x, <span class="dt">west =</span> <span class="st">&quot;°O&quot;</span>)) <span class="op">+</span></span>
<span id="cb16-9"><a href="#cb16-9"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> station),</span>
<span id="cb16-10"><a href="#cb16-10"></a>            <span class="dt">data =</span> extremos_temperatura, <span class="co"># Esta capa usa la tabla extremos_temperatura!</span></span>
<span id="cb16-11"><a href="#cb16-11"></a>            <span class="dt">size =</span> <span class="fl">2.5</span>) <span class="op">+</span></span>
<span id="cb16-12"><a href="#cb16-12"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Temperatura máxima media&quot;</span>,</span>
<span id="cb16-13"><a href="#cb16-13"></a>       <span class="dt">subtitle =</span> <span class="st">&quot;Agosto&quot;</span>,</span>
<span id="cb16-14"><a href="#cb16-14"></a>       <span class="dt">caption =</span> <span class="st">&quot;El tamaño de cada circulo representa la variabilidad&quot;</span>,</span>
<span id="cb16-15"><a href="#cb16-15"></a>       <span class="dt">x =</span> <span class="st">&quot;Longitud&quot;</span>,</span>
<span id="cb16-16"><a href="#cb16-16"></a>       <span class="dt">y =</span> <span class="st">&quot;Latitud&quot;</span>,</span>
<span id="cb16-17"><a href="#cb16-17"></a>       <span class="dt">color =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 1 rows containing missing values (geom_point).</code></pre>
<p><img src="10-ggplot-III_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>Agregamos un título, un subtítulo, el epígrafe de la figura (<em>caption</em>) para las aclaraciones y cambiamos el nombre de los ejes para que se vean mejor. Pero ademas eliminamos el nombre de la leyenda porque era un poco redundante (ya está en el título).</p>
</div>
<div id="temas" class="section level2">
<h2>Temas</h2>
<p>Nos queda una última cosa por hacer, cambiar la apariencia global del gráfico. {ggplot2} tiene muchos <em>temas</em> disponibles y para todos los gustos. Pero además hay otros paquetes que extienden las posibilidades, por ejemplo <a href="https://github.com/jrnold/ggthemes">{ggthemes}</a>.</p>
<p>Por defecto {ggplot2} usa <code>theme_grey()</code>, probemos <code>theme_light()</code>:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>observaciones <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="st">  </span><span class="kw">filter</span>(region <span class="op">!=</span><span class="st"> &quot;ANTARTIDA&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(lon, lat)) <span class="op">+</span></span>
<span id="cb18-4"><a href="#cb18-4"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> tmax_media, <span class="dt">size =</span> tmax_var), <span class="dt">alpha =</span> <span class="fl">0.7</span>) <span class="op">+</span></span>
<span id="cb18-5"><a href="#cb18-5"></a><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> mapa, <span class="dt">fill =</span> <span class="ot">NA</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> <span class="fl">0.2</span>, <span class="dt">inherit.aes =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb18-6"><a href="#cb18-6"></a><span class="st">  </span><span class="kw">scale_color_distiller</span>(<span class="dt">palette =</span> <span class="st">&quot;YlOrRd&quot;</span>, <span class="dt">direction =</span> <span class="dv">1</span>) <span class="op">+</span></span>
<span id="cb18-7"><a href="#cb18-7"></a><span class="st">  </span><span class="kw">scale_size_area</span>(<span class="dt">max_size =</span> <span class="dv">4</span>, <span class="dt">guide =</span> <span class="ot">NULL</span>) <span class="op">+</span></span>
<span id="cb18-8"><a href="#cb18-8"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">labels =</span> <span class="cf">function</span>(x) <span class="kw">LonLabel</span>(x, <span class="dt">west =</span> <span class="st">&quot;°O&quot;</span>)) <span class="op">+</span></span>
<span id="cb18-9"><a href="#cb18-9"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> station),</span>
<span id="cb18-10"><a href="#cb18-10"></a>            <span class="dt">data =</span> extremos_temperatura, <span class="co"># Esta capa usa la tabla extremos_temperatura!</span></span>
<span id="cb18-11"><a href="#cb18-11"></a>            <span class="dt">size =</span> <span class="fl">2.5</span>) <span class="op">+</span></span>
<span id="cb18-12"><a href="#cb18-12"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Temperatura máxima media&quot;</span>,</span>
<span id="cb18-13"><a href="#cb18-13"></a>       <span class="dt">subtitle =</span> <span class="st">&quot;Agosto&quot;</span>,</span>
<span id="cb18-14"><a href="#cb18-14"></a>       <span class="dt">caption =</span> <span class="st">&quot;El tamaño de cada circulo representa la variabilidad&quot;</span>,</span>
<span id="cb18-15"><a href="#cb18-15"></a>       <span class="dt">x =</span> <span class="st">&quot;Longitud&quot;</span>,</span>
<span id="cb18-16"><a href="#cb18-16"></a>       <span class="dt">y =</span> <span class="st">&quot;Latitud&quot;</span>,</span>
<span id="cb18-17"><a href="#cb18-17"></a>       <span class="dt">color =</span> <span class="st">&quot;&quot;</span>) <span class="op">+</span></span>
<span id="cb18-18"><a href="#cb18-18"></a><span class="st">  </span><span class="kw">theme_light</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 1 rows containing missing values (geom_point).</code></pre>
<p><img src="10-ggplot-III_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<div class="alert alert-info">
<p><strong>Desafío</strong></p>
<p>Ahora es tu turno. Elegí un <a href="https://es.r4ds.hadley.nz/images/visualization-themes.png" class="alert-link">tema que te guste</a> y probalo. Además, si se te ocurre algún título mejor modificalo!</p>
</div>
<div class="alert alert-success">
<p>Junto con las funciones <code>theme_...()</code>, hay una función llamada <code>theme()</code> que permite cambiar la apariencia de cualquier elemento del gráfico. Tiene casi infinitas opciones y si algún momento te desvelas intentando cambiar esa línea o ese borde, seguro que <code>theme()</code> tiene alguna opción par ahacer eso.</p>
</div>
<div class="btn-group" role="group" aria-label="Navegación">
<p><a href= "09-ggplot-II.html" class = "btn btn-primary">Anterior</a> <a href= "11-reportes-II.html" class = "btn btn-primary">Siguiente</a></p>
</div>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiQXBhcmllbmNpYSBkZSBncsOhZmljb3MiCm91dHB1dDogCiAgaHRtbF9kb2N1bWVudDoKICAgIGNvZGVfZG93bmxvYWQ6IHRydWUKICAgIHRvYzogdHJ1ZQogICAgdG9jX2Zsb2F0OiB0cnVlCiAgICBoaWdobGlnaHQ6IHRhbmdvCi0tLQoKYGBge3Igc2V0dXAsIGluY2x1ZGU9RkFMU0V9CmtuaXRyOjpvcHRzX2NodW5rJHNldChlY2hvID0gVFJVRSwKICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBGQUxTRSkKbGlicmFyeShnZ3Bsb3QyKQpsaWJyYXJ5KGRwbHlyKQpsaWJyYXJ5KHJlYWRyKQpsaWJyYXJ5KG1ldFIpCmBgYAoKIyMgRXNjYWxhcwoKW1ByZXZpYW1lbnRlXSgwNi1ncmFmaWNvcy1JLmh0bWwpIGNvbWVudGFtb3MgcXVlIGVsICptYXBlbyogZGUgdW5hIHZhcmlhYmxlIGVuIHVuIGVsZW1lbnRvIGdlb23DqXRyaWNvLCBwb3IgZWplbXBsbyBjdWFuZG8gbGUgYXNpZ25hbW9zIGRpc3RpbnRvcyBjb2xvcmVzIGEgbG9zIHB1bnRvcyBxdWUgcmVwcmVzZW50YW4gY2FkYSBjb250aW5lbnRlLCB1c2EgdW5hICoqZXNjYWxhKiogcGFyYSBkZWZpbmlyLCBlbiBlc3RlIGNhc28sIHF1ZSBjb2xvciBsZSBjb3JyZXNwb25kZSBhIGNhZGEgZWxlbWVudG8uIAoKVGFtYmnDqW4gY2FtYmlhbW9zIGxhIGFwYXJpZW5jaWEgZGVsIHJlbGxlbm8gKG8gYGZpbGxgKSBkZSBiYXJyYXMgeSBsYSBmb3JtYSBkZSBsb3MgcHVudG9zIChvIGBzaGFwZWApLiBQYXJhIGVzdG8sIHtnZ3Bsb3QyfSBzaWVtcHJlIHVzYSB1bmEgZXNjYWxhIHF1ZSBwb2RlbW9zIG1vZGlmaWNhciBkZSBhY3VlcmRvIGEgbnVlc3RybyBndXN0byB5IHRlbmllbmRvIGVuIGN1ZW50YSBjw7NtbyBxdWVyZW1vcyBjb211bmljYXIgbnVlc3Ryb3MgcmVzdWx0YWRvcy4gCgpQb3Igc3VwdWVzdG8sIG1vZGlmaWNhciB1bmEgZXNjYWxhIGltcGxpY2Egc3VtYXIgdW5hIG51ZXZhIGNhcGEgYWwgZ3LDoWZpY28gc3VtYW5kbyB1bmEgbnVldmEgZnVuY2nDs24uIFRvZGFzIGxhcyBmdW5jaW9uZXMgZGUgZXNjYWxhIGNvbWllbnphbiBjb24gYHNjYWxlYCAoZGUgZXNjYWxhIGVuIGluZ2zDqXMpLCBlbCB0w61wbyBkZSBhcGFyaWVuY2lhIHF1ZSBxdWVyZW1vcyBtb2RpZmljYXIgKGBjb2xvcmAsIGBmaWxsYCwgYHNoYXBlYCwgZXRjKSB5IGVuIG11Y2hvcyBjYXNvcyB1biBub21icmUgbyB1bmEgY2FyYWN0ZXLDrXN0aWNhIGRlIGVzYSBlc2NhbGEuIAoKUGFyYSBtb3N0cmFyIGNvbW8gZnVuY2lvbmEsIHZhbW9zIGEgZGVzY2FyZ2FyIGRhdG9zIGRlIGxhcyBlc3RhY2lvbmVzIG1ldGVvcm9sw7NnaWNhcyBkZWwgU2VydmljaW8gTWV0ZW9yb2zDs2dpY28gTmFjaW9uYWwgcGFyYSBlbCBtZXMgZGUgYWdvc3RvIGRlIDIwMjAgeSBjb24gc3VlcnRlIGFsIGZpbmFsIGRlIGVzdGUgZG9jdW1lbnRvIHRlbmRyZW1vcyB1biBncsOhZmljbyBsaXN0byBwYXJhIHB1YmxpY2FyLgoKUGVybyBwb3Igc3VwdWVzdG8sIHByaW1lcm8gdGVuZW1vcyBxdWUgbWFuaXB1bGFyIGxvcyBkYXRvcyBwYXJhIHBvZGVyIHV0aWxpemFybG9zLiBFbiBwYXJ0aWN1bGFyIG5lY2VzaXRhcmVtb3MgaW5mb3JtYWNpw7NuIGRlIGxhcyBlc3RhY2lvbmVzLCBzdXMgbWV0YWRhdG9zLCBxdWUgc2UgZW5jdWVudHJhbiBlbiB1biBhcmNoaXZvIGRpc3RpbnRvLiBZIGRlIHBhc28gY2FsY3VsYW1vcyBsYSB2YXJpYWJsZSBxdWUgbm9zIGludGVyZXNhOiBsYSB0ZW1wZXJhdHVyYSBtw6F4aW1hIG1lZGlhIHBhcmEgYWdvc3RvLgoKYGBge3J9CmVzdGFjaW9uZXMgPC0gcmVhZF9jc3YoImRhdG9zL2VzdGFjaW9uZXNfc21uLmNzdiIpICMgTWV0YWRhdG9zCgpmZWNoYXMgPC0gc2VxLkRhdGUobHVicmlkYXRlOjp5bWQoMjAyMDA4MDEpLCBsdWJyaWRhdGU6OnltZCgyMDIwMDgzMSksIGJ5ID0gIjEgZGF5IikKCm9ic2VydmFjaW9uZXMgPC0gR2V0U01ORGF0YShmZWNoYXMsIHR5cGUgPSAiZGFpbHkiKSAlPiUgCiAgZ3JvdXBfYnkoc3RhdGlvbikgJT4lIAogIHN1bW1hcmlzZSh0bWF4X21lZGlhID0gbWVhbih0bWF4LCBuYS5ybSA9IFRSVUUpLAogICAgICAgICAgICB0bWF4X3ZhciA9IHNkKHRtYXgsIG5hLnJtID0gVFJVRSkpCgpvYnNlcnZhY2lvbmVzIDwtIGxlZnRfam9pbihvYnNlcnZhY2lvbmVzLCBlc3RhY2lvbmVzLCBieSA9IGMoInN0YXRpb24iID0gIm5vbWJyZSIpKSAKYGBgCgoKYGBge3J9Cm9ic2VydmFjaW9uZXMgJT4lIAogIGZpbHRlcihyZWdpb24gIT0gIkFOVEFSVElEQSIpICU+JSAKICBnZ3Bsb3QoYWVzKGxvbiwgbGF0KSkgKwogIGdlb21fcG9pbnQoKSAKYGBgCgpQb3IgYWhvcmEgZXN0ZSBncsOhZmljbyBubyBub3MgZGljZSBuYWRhLCBuZWNlc2l0YW1vcyBhZ3JlZ2FybGUgdW5hIGNhcGEgY29uIGVsIG1hcGEgdGFsIGN1YWwgaGljaW1vcyBwcmV2aWFtZW50ZS4gCgpgYGB7cn0KbWFwYSA8LSBybmF0dXJhbGVhcnRoOjpuZV9zdGF0ZXMoY291bnRyeSA9IGMoImFyZ2VudGluYSIpLCByZXR1cm5jbGFzcyA9ICJzZiIpCgpvYnNlcnZhY2lvbmVzICU+JSAKICBmaWx0ZXIocmVnaW9uICE9ICJBTlRBUlRJREEiKSAlPiUgCiAgZ2dwbG90KGFlcyhsb24sIGxhdCkpICsKICBnZW9tX3BvaW50KCkgKwogIGdlb21fc2YoZGF0YSA9IG1hcGEsIGZpbGwgPSBOQSwgY29sb3IgPSAiYmxhY2siLCBzaXplID0gMC4yLCBpbmhlcml0LmFlcyA9IEZBTFNFKSAKYGBgCgoKIyMjIEVzY2FsYSBkZSBjb2xvcmVzIHkgb3RyYXMgY2FyYWN0ZXLDrXN0aWNhcwoKU2kgYmllbiBhaG9yYSBwb2RlbW9zIGlkZW50aWZpY2FyIGRvbmRlIGVzdMOhbiBsYXMgZXN0YWNpb25lcywgbm8gdGVuZW1vcyBpbmZvcm1hY2nDs24gZGUgbGEgdGVtcGVyYXR1cmEgbcOheGltYSBtZWRpYS4gUG9kcsOtYW1vcyBjYW1iaWFyIGVsIGNvbG9yIGRlIGxvcyBwdW50b3MgcGFyYSBxdWUgcmVwcmVzZW50ZW4gZWwgdmFsb3IgcXVlIHRvbWEgZXNhIHZhcmlhYmxlIGVuIGNhZGEgZXN0YWNpw7NuLgoKYGBge3J9Cm9ic2VydmFjaW9uZXMgJT4lIAogIGZpbHRlcihyZWdpb24gIT0gIkFOVEFSVElEQSIpICU+JSAKICBnZ3Bsb3QoYWVzKGxvbiwgbGF0KSkgKwogIGdlb21fcG9pbnQoYWVzKGNvbG9yID0gdG1heF9tZWRpYSkpICsKICBnZW9tX3NmKGRhdGEgPSBtYXBhLCBmaWxsID0gTkEsIGNvbG9yID0gImJsYWNrIiwgc2l6ZSA9IDAuMiwgaW5oZXJpdC5hZXMgPSBGQUxTRSkgCmBgYAoKUGVybyBlc3RhIGVzY2FsYSBkZSBjb2xvcmVzIHF1ZSB1c2Ege2dncGxvdDJ9IHBvciBkZWZlY3RvIG5vIGVzIGRlIGxhcyBtZWpvcmVzLCBlcyBkaWbDrWNpbCBkaWZlcmVuY2lhciBlbnRyZSBsb3MgdmFsb3Jlcy4gRXhpc3RlbiBpbmZpbml0YXMgcGFsZXRhcyBkZSBjb2xvcmVzIHF1ZSBzZSBwdWVkZW4gdXNhciBlbiBnZ3Bsb3QsIGFsZ3VuYXMgcG9yIGVqZW1wbG8gYnVzY2FuIHBvZGVyIGRpc3Rpbmd1aXJzZSBzaSBpbXByaW1pbW9zIGVsIGdyw6FmaWNvIGVuIGJsYW5jbyB5IG5lZ3JvLCBvdHJhcyBlc3TDoW4gZGlzZcOxYWRhcyBwYXJhIHF1ZSBwZXJzb25hcyBjb24gZGFsdG9uaXNtbyBwdWVkYW4gZGlzdGluZ3VpciBsb3MgY29sb3Jlcy4gVW5hIGVzY2FsYSBvIHBhbGV0YSBkZSBjb2xvcmVzIG11eSB1c2FkYSBlcyBbKip2aXJpZGlzKipdKGh0dHBzOi8vY3Jhbi5yLXByb2plY3Qub3JnL3dlYi9wYWNrYWdlcy92aXJpZGlzL3ZpZ25ldHRlcy9pbnRyby10by12aXJpZGlzLmh0bWwpIHF1ZSBmdWUgY3JlYWRhIGp1c3RhbWVudGUgcGFyYSByZXNvbHZlciBlc3RlIHkgb3Ryb3MgcHJvYmxlbWFzLiBUYW1iacOpbiBleGlzdGUgb3RyYSBncmFuIGZhbWlsaWEgZGUgcGFsZXRhcyBkZSBjb2xvcmVzIGxsYW1hZGEgWyoqQ29sb3JCcmV3ZXIqKl0oaHR0cHM6Ly9jb2xvcmJyZXdlcjIub3JnLykuCgpWYW1vcyBhIHByb2JhciBsYSBwYWxldGEgIllsT3JSZCIgLCBlc3RhIHBhbGV0YSBlcyAqc2VjdWVuY2lhbCogeSBlcyBqdXN0byBsbyBxdWUgbmVjZXNpdGFtb3MgcGFyYSB2aXN1YWxpemFyIHVuYSB2YXJpYWJsZSBjb250aW51YSBjb21vIGxhIHRlbXBlcmF0dXJhLiBDw7NtbyBlc3RhbW9zIG1vZGlmaWNhbmRvIGVsICpjb2xvciosIGxhIGZ1bmNpw7NuIGEgdXNhciBzZXLDoSBgc2NhbGVfY29sb3JfZGlzdGlsbGVyKClgLCBsYSBoZXJtYW5hICpjb250aW51YSogZGUgYHNjYWxlX2NvbG9yX2JyZXdlcigpYDoKCmBgYHtyfQpvYnNlcnZhY2lvbmVzICU+JSAKICBmaWx0ZXIocmVnaW9uICE9ICJBTlRBUlRJREEiKSAlPiUgCiAgZ2dwbG90KGFlcyhsb24sIGxhdCkpICsKICBnZW9tX3BvaW50KGFlcyhjb2xvciA9IHRtYXhfbWVkaWEpKSArCiAgZ2VvbV9zZihkYXRhID0gbWFwYSwgZmlsbCA9IE5BLCBjb2xvciA9ICJibGFjayIsIHNpemUgPSAwLjIsIGluaGVyaXQuYWVzID0gRkFMU0UpICsKICBzY2FsZV9jb2xvcl9kaXN0aWxsZXIocGFsZXR0ZSA9ICJZbE9yUmQiLCBkaXJlY3Rpb24gPSAxKQpgYGAKCkVuIGVzdGUgY2FzbyB0YW1iacOpbiBhZ3JlZ2Ftb3MgZWwgYXJndW1lbnRvIGBkaXJlY3Rpb24gPSAxYCBwYXJhIHF1ZSBsYSBwYWxldGEgZGUgY29sb3JlcyBsb3MgbXVlc3RyZSBkZSBtw6FzIG9zY3Vyb3MgYSBtw6FzIGNsYXJvcy4gRXN0YSBkZXNpY2nDs24gZXMgZXN0w6l0aWNhIHkgbXVjaGFzIHZlY2VzIGRlcGVuZGUgZGUgbGFzIHZhcmlhYmxlcyBhIGdyYWZpY2FyLiAKCgo6Ojogey5hbGVydCAuYWxlcnQtaW5mb30KKipEZXNhZsOtbyoqCgpBIG1vZG8gZGUgcHJ1ZWJhLCBjYW1iaWEgbGEgcGFsZXRhIGRlIGNvbG9yZXMgYWN0dWFsIHBvciBsYSBkZSBWaXJpZGlzLiBQYXJhIGVzbyB0ZW7DqXMgcXVlIHVzYXIgYHNjYWxlX2NvbG9yX3ZpcmlkaXNfYygpYC4gTGEgImMiIGRlbCBmaW5hbCB2aWVuZSBkZSAqY29udGludW91cyogeSBzZSB1c2EgcGFyYSB2YXJpYWJsZXMgY29udGludWFzLCBtaWVudHJhcyBxdWUgc2kgbG9zIGRhdG9zIHNvbiBkaXNjcmV0b3MgbyBjYXRlZ29yw61hcywgc2UgdXNhICJkIiBhbCBmaW5hbC4KOjo6CgpOdWVzdHJvIGdyw6FmaWNvIHZhIHF1ZWRhbmRvIG1lam9yIHkgcG9kZW1vcyBhcHJvdmVjaGFyIGxhIGNhcGFjaWRhZCBkZSB7Z2dwbG90Mn0gZGUgKm1hcGVhciogdmFyaWFibGVzIGEgbG9zIGVsZW1lbnRvcyBkZWwgZ3LDoWZpY28geSB2aXN1YWxpemFyIGxhIHZhcmlhYmlsaWRhZCBkZSBsYSB0ZW1wZXJhdHVyYSBtw6F4aW1hIG1vZGlmaWNhbmRvIGVsIHRhbWHDsW8gZGUgbG9zIHB1bnRvcyBkZSBhY3VlcmRvIGFsIGRlc3bDrW8gZXN0YW5kYXIuCgpgYGB7cn0Kb2JzZXJ2YWNpb25lcyAlPiUgCiAgZmlsdGVyKHJlZ2lvbiAhPSAiQU5UQVJUSURBIikgJT4lIAogIGdncGxvdChhZXMobG9uLCBsYXQpKSArCiAgZ2VvbV9wb2ludChhZXMoY29sb3IgPSB0bWF4X21lZGlhLCBzaXplID0gdG1heF92YXIpKSArCiAgZ2VvbV9zZihkYXRhID0gbWFwYSwgZmlsbCA9IE5BLCBjb2xvciA9ICJibGFjayIsIHNpemUgPSAwLjIsIGluaGVyaXQuYWVzID0gRkFMU0UpICsKICBzY2FsZV9jb2xvcl9kaXN0aWxsZXIocGFsZXR0ZSA9ICJZbE9yUmQiLCBkaXJlY3Rpb24gPSAxKQpgYGAKCkVzIGludGVyZXNhbnRlIHZlciBjb21vIGxhcyB0ZW1wZXJhdHVyYXMgbcOheGltYXMgbWVkaWFzIG1heW9yZXMgdGFtYmnDqW4gdGllbmVuIG1heW9yIHZhcmlhYmlsaWRhZC4gUGVybyBhaG9yYSBhbGd1bm9zIHB1bnRvcyBzZSBzdXBlcnBvbmVuIHkgZXMgcG9zaWJsZSBxdWUgbm8gZXN0ZW1vcyB2aWVuZG8gYWxndW5hcyBlc3RhY2lvbmVzLiBWYW1vcyBhIGFycmVnbGFyIGVzbyBhZ3JlZ2FuZG8gdHJhbnNwYXJlbmNpYSB5IGRlIHBhc28gbW9kaWZpY2FyIGVsIHRhbWHDsW8gZGUgbG9zIHB1bnRvcyBjb24gbGEgZXNjYWxhIGNvcnJlc3BvbmRpZW50ZSBgc2NhbGVfc2l6ZV9hcmVhKClgIHkgc2FjYXIgbGEgbGVnZW5kYSBjb24gYGd1aWRlID0gTlVMTGAuCgpgYGB7cn0Kb2JzZXJ2YWNpb25lcyAlPiUgCiAgZmlsdGVyKHJlZ2lvbiAhPSAiQU5UQVJUSURBIikgJT4lIAogIGdncGxvdChhZXMobG9uLCBsYXQpKSArCiAgZ2VvbV9wb2ludChhZXMoY29sb3IgPSB0bWF4X21lZGlhLCBzaXplID0gdG1heF92YXIpLCBhbHBoYSA9IDAuNykgKwogIGdlb21fc2YoZGF0YSA9IG1hcGEsIGZpbGwgPSBOQSwgY29sb3IgPSAiYmxhY2siLCBzaXplID0gMC4yLCBpbmhlcml0LmFlcyA9IEZBTFNFKSArCiAgc2NhbGVfY29sb3JfZGlzdGlsbGVyKHBhbGV0dGUgPSAiWWxPclJkIiwgZGlyZWN0aW9uID0gMSkgKwogIHNjYWxlX3NpemVfYXJlYShtYXhfc2l6ZSA9IDQsIGd1aWRlID0gTlVMTCkKYGBgCgojIyMgRXNjYWxhcyBkZSBlamVzCgpBaG9yYSBxdWUgbGEgaW5mb3JtYWNpw7NuIGRlbCBncsOhZmljbyBzZSB2ZSBiaWVuLCBwYXNlbW9zIGEgbG9zIGVqZXMuIEFsIGlndWFsIHF1ZSBwYXJhIGVsIGNvbG9yLCBlbCB0YW1hw7FvIHkgb3Ryb3MgZWxlbWVudG9zIGRlbCBncsOhZmljbywgcGFyYSBsb3MgZWplcyB0YW1iacOpbiBleGlzdGVuIGZ1bmNpb25lcyAic2NhbGUiLiBFbiBlc3RlIGNhc28gbGFzIGVzY2FsYXMgcXVlIG1vZGlmaWNhbiBsb3MgZWplcyBqdXN0YW1lbnRlIGNvbWllbnphbiBjb24gYHNjYWxhX3hfYCBvIGBzY2FsZV95X2Agc2Vnw7puIHNlYSBlbCBjYXNvIHkgaGF5IHVuYSBncmFuIHZhcmllZGFkIGRlIG9wY2lvbmVzIGRlcGVuZGllbmRvIGRlbCB0aXBvIGRlIGRhdG8gcXVlIGVzdGFtb3MgZ3JhZmljYW5kbyBlbiBjYWRhIGVqZS4gCgpTaSBlbiBlbCBlamUgeSBncmFmaWNhbW9zIHVuYSB2YXJpYWJsZSBkaXNjcmV0YSBlbnRvbmNlcyBwb2RyZW1vcyBtb2RpZmljYXIgc3UgZXNwZWN0byBjb24gYHNjYWxlX3lfZGlzY3JldGUoKWAuIEVuIGVzdGUgY2FzbyBsYSBmdW5jacOzbiBgZ2VvbV9zZigpYCBhdXRvbcOhdGljYW1lbnRlIG1vZGlmaWNhIGxhIGFwYXJpZW5jaWEgZGUgbG9zIGVqZXMgeSBubyByZXF1aWVyZW4gZGUgbXVjaG8gdHJhYmFqby4gCgpQZXJvIHF1ZXJlbW9zIHF1ZSBudWVzdHJvIGdyw6FmaWNvIHF1ZWRlIGxpc3RvIHBhcmEgcHVibGljYXIgeSBsYSAiVyIgZGUgd2VzdCAob2VzdGUgZW4gaW5nbMOpcykgcHVlZGUgbm8gc2VyIG11eSBhbWlnYWJsZS4gTW9kaWZpcXVlbW9zIGVudG9uY2VzIGVsIGVqZSB4IGNvbiBsYSBmdW5jacOzbiBgc2NhbGVfeF9jb250aW51b3VzKClgLiBFbiBlc3RlIGNhc28gcXVlcmVtb3MgbW9kaWZpY2FyIGxhcyBldGlxdWV0YXMgbyBgbGFiZWxzYCB5IHBhcmEgZXNvIHVzYXJlbW9zIGxhIGZ1bmNpw7NuIGBMb25MYWJlbCgpYCBkZWwgcGFxdWV0ZSB7bWV0Un0uIEVzdGEgZnVuY2nDs24gcmVjaWJlIHVuYSBmdW5jacOzbiBhbsOzbmltYSBxdWUgdG9tYSBjYWRhIGxvbmdpdHVkIHkgZWwgY2FtYmlhIGVsICLCsFfCsCBwb3IgIsKwTyIuCgoKYGBge3J9Cm9ic2VydmFjaW9uZXMgJT4lIAogIGZpbHRlcihyZWdpb24gIT0gIkFOVEFSVElEQSIpICU+JSAKICBnZ3Bsb3QoYWVzKGxvbiwgbGF0KSkgKwogIGdlb21fcG9pbnQoYWVzKGNvbG9yID0gdG1heF9tZWRpYSwgc2l6ZSA9IHRtYXhfdmFyKSwgYWxwaGEgPSAwLjcpICsKICBnZW9tX3NmKGRhdGEgPSBtYXBhLCBmaWxsID0gTkEsIGNvbG9yID0gImJsYWNrIiwgc2l6ZSA9IDAuMiwgaW5oZXJpdC5hZXMgPSBGQUxTRSkgKwogIHNjYWxlX2NvbG9yX2Rpc3RpbGxlcihwYWxldHRlID0gIllsT3JSZCIsIGRpcmVjdGlvbiA9IDEpICsKICBzY2FsZV9zaXplX2FyZWEobWF4X3NpemUgPSA0LCBndWlkZSA9IE5VTEwpICsKICBzY2FsZV94X2NvbnRpbnVvdXMobGFiZWxzID0gZnVuY3Rpb24oeCkgTG9uTGFiZWwoeCwgd2VzdCA9ICLCsE8iKSkKYGBgCgoKIyMgRWxlbWVudG9zIGRlIHRleHRvCgpZYSBzdW1hbW9zIDMgZXNjYWxhcyB5IGVsIGdyw6FmaWNvIHlhIHNlIHZlIG11eSBiaWVuLiDCv0PDs21vIGhhY2Vtb3Mgc2kgcXVlcmVtb3MgaWRlbnRpZmljYXIgZXN0YWNpb25lcyBpbmRpdmlkdWFsZXM/IFBvciBhaG9yYSBlcyBkaWbDrWNpbCwgcGVybyBwb2Ryw61hbW9zIGFncmVnYXIgZXRpcXVldGFzIGRlIHRleHRvIGNvbiBlbCBub21icmUgZGUgY2FkYSBlc3RhY2nDs24gYWwgbGFkbyBkZSBjYWRhIHB1bnRvIHVzYW5kbyBgZ2VvbV90ZXh0KClgLCB5IGVuIGVzdGUgY2FzbyBsYSBhcGFyaWVuY2lhIGVzdMOhIGRhZGEgcG9yIGBsYWJlbGAgbyBldGlxdWV0YToKCmBgYHtyfQpvYnNlcnZhY2lvbmVzICU+JSAKICBmaWx0ZXIocmVnaW9uICE9ICJBTlRBUlRJREEiKSAlPiUgCiAgZ2dwbG90KGFlcyhsb24sIGxhdCkpICsKICBnZW9tX3BvaW50KGFlcyhjb2xvciA9IHRtYXhfbWVkaWEsIHNpemUgPSB0bWF4X3ZhciksIGFscGhhID0gMC43KSArCiAgZ2VvbV9zZihkYXRhID0gbWFwYSwgZmlsbCA9IE5BLCBjb2xvciA9ICJibGFjayIsIHNpemUgPSAwLjIsIGluaGVyaXQuYWVzID0gRkFMU0UpICsKICBzY2FsZV9jb2xvcl9kaXN0aWxsZXIocGFsZXR0ZSA9ICJZbE9yUmQiLCBkaXJlY3Rpb24gPSAxKSArCiAgc2NhbGVfc2l6ZV9hcmVhKG1heF9zaXplID0gNCwgZ3VpZGUgPSBOVUxMKSArCiAgc2NhbGVfeF9jb250aW51b3VzKGxhYmVscyA9IGZ1bmN0aW9uKHgpIExvbkxhYmVsKHgsIHdlc3QgPSAiwrBPIikpICsKICBnZW9tX3RleHQoYWVzKGxhYmVsID0gc3RhdGlvbikpIApgYGAKClBlcm8gbm9zIG9sdmlkYW1vcyBxdWUgdGVuZW1vcyBtw6FzIGRlIDEwMCBlc3RhY2lvbmVzLCBlcyBpbXBvc2libGUgYWdyZWdhcmxlIGV0aXF1ZXRhcyBhIHRvZG9zLiBQZXJvIHBvZHLDrWFtb3MgcXVlcmVyIHJlc2FsdGFyIGFsZ3Vub3MsIHRhbCB2ZXogbG9zIGRlIHVuYSByZWdpw7NuIGVuIHBhcnRpY3VsYXIgbyBsb3MgcXVlIGN1bXBsZW4gY29uIGxhIGNvbmRpY2nDs24gZGUgdGVuZXIgbGFzIG1heW9yZXMgdGVtcGVyYXR1cmFzIG3DoXhpbWFzIG1lZGlhcy4gUGFyYSBlc28gdmFtb3MgYSBnZW5lcmFybm9zIHVuYSBudWV2YSB0YWJsYSBjb24gbGFzIGVzdGFjaW9uZXMgcXVlIHF1ZXJlbW9zIHJlc2FsdGFyIHkgZGUgcGFzbyB1c2FybGEgZGVudHJvIGRlIGBnZW9tX3RleHQoKWAuCgpgYGB7cn0KZXh0cmVtb3NfdGVtcGVyYXR1cmEgPC0gb2JzZXJ2YWNpb25lcyAlPiUgCiAgZmlsdGVyKHJlZ2lvbiAhPSAiQU5UQVJUSURBIikgJT4lIAogIGZpbHRlcih0bWF4X21lZGlhID09IG1heCh0bWF4X21lZGlhLCBuYS5ybSA9IFRSVUUpIHwKICAgICAgICAgICB0bWF4X21lZGlhID09IG1pbih0bWF4X21lZGlhLCBuYS5ybSA9IFRSVUUpKSAjIEVzdGFjaW9uZXMgY29uIGV4dHJlbW9zIQoKb2JzZXJ2YWNpb25lcyAlPiUgCiAgZmlsdGVyKHJlZ2lvbiAhPSAiQU5UQVJUSURBIikgJT4lIAogIGdncGxvdChhZXMobG9uLCBsYXQpKSArCiAgZ2VvbV9wb2ludChhZXMoY29sb3IgPSB0bWF4X21lZGlhLCBzaXplID0gdG1heF92YXIpLCBhbHBoYSA9IDAuNykgKwogIGdlb21fc2YoZGF0YSA9IG1hcGEsIGZpbGwgPSBOQSwgY29sb3IgPSAiYmxhY2siLCBzaXplID0gMC4yLCBpbmhlcml0LmFlcyA9IEZBTFNFKSArCiAgc2NhbGVfY29sb3JfZGlzdGlsbGVyKHBhbGV0dGUgPSAiWWxPclJkIiwgZGlyZWN0aW9uID0gMSkgKwogIHNjYWxlX3NpemVfYXJlYShtYXhfc2l6ZSA9IDQsIGd1aWRlID0gTlVMTCkgKwogIHNjYWxlX3hfY29udGludW91cyhsYWJlbHMgPSBmdW5jdGlvbih4KSBMb25MYWJlbCh4LCB3ZXN0ID0gIsKwTyIpKSArCiAgZ2VvbV90ZXh0KGFlcyhsYWJlbCA9IHN0YXRpb24pLAogICAgICAgICAgICBkYXRhID0gZXh0cmVtb3NfdGVtcGVyYXR1cmEsICMgRXN0YSBjYXBhIHVzYSBsYSB0YWJsYSBleHRyZW1vc190ZW1wZXJhdHVyYSEKICAgICAgICAgICAgc2l6ZSA9IDIuNSkgCmBgYAoKOjo6IHsuYWxlcnQgLmFsZXJ0LXN1Y2Nlc3N9CgpEZWwgY8OzZGlnbyBhbnRlcmlvciBzdXJnZSBhbGdvIG11eSBpbXBvcnRhbnRlOiBlcyBwb3NpYmxlIGdlbmVyYXIgY2FwYXMgZW4gdW4gZ3LDoWZpY28gdXNhbmRvIHVuYSBkYXRhLmZyYW1lICpkaXN0aW50byogYWwgcXVlIHVzYW1vcyBwYXJhIGdyYWZpY2FyIGxhcyBjYXBhcyBhbnRlcmlvcmVzLiBFc3RvIGVzIMO6dGlsIHByaW5jaXBhbG1lbnRlIHBhcmEgZGVmaW5pciBldGlxdWV0YXMgbyByZXNhbHRhciBkZXRlcm1pbmFkYXMgb2JzZXJ2YWNpb25lcy4gCgpZIGVsIHRydWNvIGVzdMOhIGVuIHF1ZSBhbWJvcyBkYXRhLmZyYW1lcyB0aWVuZW4gbGFzIHZhcmlhYmxlcyBgbG9uYCB5IGBsYXRgIHkgZW50b25jZXMge2dncGxvdDJ9IHB1ZWRlIGlkZW50aWZpY2FyIGVuIHF1ZSBwYXJ0ZSBkZWwgZ3LDoWZpY28gKGVuIHF1ZSB2YWxvcmVzIGRlIHggeSBlbiBxdWUgdmFsb3JlcyBkZSB5KSBjb2xvY2FyIGNhZGEgZWxlbWVudG8uCjo6OgoKVmVhbW9zIGFob3JhIHVuYSAoZGUgdmFyaWFzKSBtYW5lcmFzIGFncmVnYXIgbyBtb2RpZmljYXIgZWxlbWVudG9zIGRlIHRleHRvIGVuIGVsIGdyw6FmaWNvLiBWYW1vcyBhIHVzYXIgdW5hIG51ZXZhIGZ1bmNpw7NuICh5IHVuYSBudWV2YSBjYXBhISksIGBsYWJzKClgOgoKYGBge3J9Cm9ic2VydmFjaW9uZXMgJT4lIAogIGZpbHRlcihyZWdpb24gIT0gIkFOVEFSVElEQSIpICU+JSAKICBnZ3Bsb3QoYWVzKGxvbiwgbGF0KSkgKwogIGdlb21fcG9pbnQoYWVzKGNvbG9yID0gdG1heF9tZWRpYSwgc2l6ZSA9IHRtYXhfdmFyKSwgYWxwaGEgPSAwLjcpICsKICBnZW9tX3NmKGRhdGEgPSBtYXBhLCBmaWxsID0gTkEsIGNvbG9yID0gImJsYWNrIiwgc2l6ZSA9IDAuMiwgaW5oZXJpdC5hZXMgPSBGQUxTRSkgKwogIHNjYWxlX2NvbG9yX2Rpc3RpbGxlcihwYWxldHRlID0gIllsT3JSZCIsIGRpcmVjdGlvbiA9IDEpICsKICBzY2FsZV9zaXplX2FyZWEobWF4X3NpemUgPSA0LCBndWlkZSA9IE5VTEwpICsKICBzY2FsZV94X2NvbnRpbnVvdXMobGFiZWxzID0gZnVuY3Rpb24oeCkgTG9uTGFiZWwoeCwgd2VzdCA9ICLCsE8iKSkgKwogIGdlb21fdGV4dChhZXMobGFiZWwgPSBzdGF0aW9uKSwKICAgICAgICAgICAgZGF0YSA9IGV4dHJlbW9zX3RlbXBlcmF0dXJhLCAjIEVzdGEgY2FwYSB1c2EgbGEgdGFibGEgZXh0cmVtb3NfdGVtcGVyYXR1cmEhCiAgICAgICAgICAgIHNpemUgPSAyLjUpICsKICBsYWJzKHRpdGxlID0gIlRlbXBlcmF0dXJhIG3DoXhpbWEgbWVkaWEiLAogICAgICAgc3VidGl0bGUgPSAiQWdvc3RvIiwKICAgICAgIGNhcHRpb24gPSAiRWwgdGFtYcOxbyBkZSBjYWRhIGNpcmN1bG8gcmVwcmVzZW50YSBsYSB2YXJpYWJpbGlkYWQiLAogICAgICAgeCA9ICJMb25naXR1ZCIsCiAgICAgICB5ID0gIkxhdGl0dWQiLAogICAgICAgY29sb3IgPSAiIikKYGBgCgpBZ3JlZ2Ftb3MgdW4gdMOtdHVsbywgdW4gc3VidMOtdHVsbywgZWwgZXDDrWdyYWZlIGRlIGxhIGZpZ3VyYSAoKmNhcHRpb24qKSBwYXJhIGxhcyBhY2xhcmFjaW9uZXMgeSBjYW1iaWFtb3MgZWwgbm9tYnJlIGRlIGxvcyBlamVzIHBhcmEgcXVlIHNlIHZlYW4gbWVqb3IuIFBlcm8gYWRlbWFzIGVsaW1pbmFtb3MgZWwgbm9tYnJlIGRlIGxhIGxleWVuZGEgcG9ycXVlIGVyYSB1biBwb2NvIHJlZHVuZGFudGUgKHlhIGVzdMOhIGVuIGVsIHTDrXR1bG8pLiAKCiMjIFRlbWFzCgpOb3MgcXVlZGEgdW5hIMO6bHRpbWEgY29zYSBwb3IgaGFjZXIsIGNhbWJpYXIgbGEgYXBhcmllbmNpYSBnbG9iYWwgZGVsIGdyw6FmaWNvLiB7Z2dwbG90Mn0gdGllbmUgbXVjaG9zICp0ZW1hcyogZGlzcG9uaWJsZXMgeSBwYXJhIHRvZG9zIGxvcyBndXN0b3MuIFBlcm8gYWRlbcOhcyBoYXkgb3Ryb3MgcGFxdWV0ZXMgcXVlIGV4dGllbmRlbiBsYXMgcG9zaWJpbGlkYWRlcywgcG9yIGVqZW1wbG8gW3tnZ3RoZW1lc31dKGh0dHBzOi8vZ2l0aHViLmNvbS9qcm5vbGQvZ2d0aGVtZXMpLgoKUG9yIGRlZmVjdG8ge2dncGxvdDJ9IHVzYSBgdGhlbWVfZ3JleSgpYCwgcHJvYmVtb3MgYHRoZW1lX2xpZ2h0KClgOgoKYGBge3J9Cm9ic2VydmFjaW9uZXMgJT4lIAogIGZpbHRlcihyZWdpb24gIT0gIkFOVEFSVElEQSIpICU+JSAKICBnZ3Bsb3QoYWVzKGxvbiwgbGF0KSkgKwogIGdlb21fcG9pbnQoYWVzKGNvbG9yID0gdG1heF9tZWRpYSwgc2l6ZSA9IHRtYXhfdmFyKSwgYWxwaGEgPSAwLjcpICsKICBnZW9tX3NmKGRhdGEgPSBtYXBhLCBmaWxsID0gTkEsIGNvbG9yID0gImJsYWNrIiwgc2l6ZSA9IDAuMiwgaW5oZXJpdC5hZXMgPSBGQUxTRSkgKwogIHNjYWxlX2NvbG9yX2Rpc3RpbGxlcihwYWxldHRlID0gIllsT3JSZCIsIGRpcmVjdGlvbiA9IDEpICsKICBzY2FsZV9zaXplX2FyZWEobWF4X3NpemUgPSA0LCBndWlkZSA9IE5VTEwpICsKICBzY2FsZV94X2NvbnRpbnVvdXMobGFiZWxzID0gZnVuY3Rpb24oeCkgTG9uTGFiZWwoeCwgd2VzdCA9ICLCsE8iKSkgKwogIGdlb21fdGV4dChhZXMobGFiZWwgPSBzdGF0aW9uKSwKICAgICAgICAgICAgZGF0YSA9IGV4dHJlbW9zX3RlbXBlcmF0dXJhLCAjIEVzdGEgY2FwYSB1c2EgbGEgdGFibGEgZXh0cmVtb3NfdGVtcGVyYXR1cmEhCiAgICAgICAgICAgIHNpemUgPSAyLjUpICsKICBsYWJzKHRpdGxlID0gIlRlbXBlcmF0dXJhIG3DoXhpbWEgbWVkaWEiLAogICAgICAgc3VidGl0bGUgPSAiQWdvc3RvIiwKICAgICAgIGNhcHRpb24gPSAiRWwgdGFtYcOxbyBkZSBjYWRhIGNpcmN1bG8gcmVwcmVzZW50YSBsYSB2YXJpYWJpbGlkYWQiLAogICAgICAgeCA9ICJMb25naXR1ZCIsCiAgICAgICB5ID0gIkxhdGl0dWQiLAogICAgICAgY29sb3IgPSAiIikgKwogIHRoZW1lX2xpZ2h0KCkKYGBgCgo6Ojogey5hbGVydCAuYWxlcnQtaW5mb30KKipEZXNhZsOtbyoqCgpBaG9yYSBlcyB0dSB0dXJuby4gRWxlZ8OtIHVuIFt0ZW1hIHF1ZSB0ZSBndXN0ZV0oaHR0cHM6Ly9lcy5yNGRzLmhhZGxleS5uei9pbWFnZXMvdmlzdWFsaXphdGlvbi10aGVtZXMucG5nKXsuYWxlcnQtbGlua30geSBwcm9iYWxvLiBBZGVtw6FzLCBzaSBzZSB0ZSBvY3VycmUgYWxnw7puIHTDrXR1bG8gbWVqb3IgbW9kaWZpY2FsbyEgCjo6OgoKOjo6IHsuYWxlcnQgLmFsZXJ0LXN1Y2Nlc3N9CgpKdW50byBjb24gbGFzIGZ1bmNpb25lcyBgdGhlbWVfLi4uKClgLCBoYXkgdW5hIGZ1bmNpw7NuIGxsYW1hZGEgYHRoZW1lKClgIHF1ZSBwZXJtaXRlIGNhbWJpYXIgbGEgYXBhcmllbmNpYSBkZSBjdWFscXVpZXIgZWxlbWVudG8gZGVsIGdyw6FmaWNvLiBUaWVuZSBjYXNpIGluZmluaXRhcyBvcGNpb25lcyB5IHNpIGFsZ8O6biBtb21lbnRvIHRlIGRlc3ZlbGFzIGludGVudGFuZG8gY2FtYmlhciBlc2EgbMOtbmVhIG8gZXNlIGJvcmRlLCBzZWd1cm8gcXVlIGB0aGVtZSgpYCB0aWVuZSBhbGd1bmEgb3BjacOzbiBwYXIgYWhhY2VyIGVzby4KCjo6OgoKPGRpdiBjbGFzcz0iYnRuLWdyb3VwIiByb2xlPSJncm91cCIgYXJpYS1sYWJlbD0iTmF2ZWdhY2nDs24iPgogIDxhIGhyZWY9ICIwOS1nZ3Bsb3QtSUkuaHRtbCIgY2xhc3MgPSAiYnRuIGJ0bi1wcmltYXJ5Ij5BbnRlcmlvcjwvYT4KICA8YSBocmVmPSAiMTEtcmVwb3J0ZXMtSUkuaHRtbCIgY2xhc3MgPSAiYnRuIGJ0bi1wcmltYXJ5Ij5TaWd1aWVudGU8L2E+CjwvZGl2Pgo=</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("10-ggplot-III.Rmd");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
