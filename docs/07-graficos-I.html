<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Visualizaci√≥n de datos con {ggplot2} I</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<script src="site_libs/accessible-code-block-0.0.1/empty-anchor.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
      code.sourceCode > span { display: inline-block; line-height: 1.25; }
  code.sourceCode > span { color: inherit; text-decoration: inherit; }
  code.sourceCode > span:empty { height: 1.2em; }
  .sourceCode { overflow: visible; }
  code.sourceCode { white-space: pre; position: relative; }
  div.sourceCode { margin: 1em 0; }
  pre.sourceCode { margin: 0; }
  @media screen {
  div.sourceCode { overflow: auto; }
  }
  @media print {
  code.sourceCode { white-space: pre-wrap; }
  code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
  }
  pre.numberSource code
    { counter-reset: source-line 0; }
  pre.numberSource code > span
    { position: relative; left: -4em; counter-increment: source-line; }
  pre.numberSource code > span > a:first-child::before
    { content: counter(source-line);
      position: relative; left: -1em; text-align: right; vertical-align: baseline;
      border: none; display: inline-block;
      -webkit-touch-callout: none; -webkit-user-select: none;
      -khtml-user-select: none; -moz-user-select: none;
      -ms-user-select: none; user-select: none;
      padding: 0 4px; width: 4em;
      color: #aaaaaa;
    }
  pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
  div.sourceCode
    {  background-color: #f8f8f8; }
  @media screen {
  code.sourceCode > span > a:first-child::before { text-decoration: underline; }
  }
  code span.al { color: #ef2929; } /* Alert */
  code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
  code span.at { color: #c4a000; } /* Attribute */
  code span.bn { color: #0000cf; } /* BaseN */
  code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
  code span.ch { color: #4e9a06; } /* Char */
  code span.cn { color: #000000; } /* Constant */
  code span.co { color: #8f5902; font-style: italic; } /* Comment */
  code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
  code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
  code span.dt { color: #204a87; } /* DataType */
  code span.dv { color: #0000cf; } /* DecVal */
  code span.er { color: #a40000; font-weight: bold; } /* Error */
  code span.ex { } /* Extension */
  code span.fl { color: #0000cf; } /* Float */
  code span.fu { color: #000000; } /* Function */
  code span.im { } /* Import */
  code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
  code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
  code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
  code span.ot { color: #8f5902; } /* Other */
  code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
  code span.sc { color: #000000; } /* SpecialChar */
  code span.ss { color: #4e9a06; } /* SpecialString */
  code span.st { color: #4e9a06; } /* String */
  code span.va { color: #000000; } /* Variable */
  code span.vs { color: #4e9a06; } /* VerbatimString */
  code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
    </style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "Óâô";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "Óâô";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R para Clima</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="hoja-de-ruta.html">Hoja de ruta</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Temas
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="01-introduccion.html">Introducci√≥n</a>
    </li>
    <li>
      <a href="02-proyectos.html">Proyectos de RStudio</a>
    </li>
    <li>
      <a href="03-reportes-I.html">Reportes I</a>
    </li>
    <li>
      <a href="04-lectura.html">Lectura de datos</a>
    </li>
    <li>
      <a href="05-dplyr.html">Manipulaci√≥n de datos I</a>
    </li>
    <li>
      <a href="06-dplyr-tidyr-II.html">Manipulaci√≥n de datos II</a>
    </li>
    <li>
      <a href="07-graficos-I.html">Gr√°ficos I</a>
    </li>
    <li>
      <a href="08-lubridate.html">Manipulaci√≥n fechas</a>
    </li>
    <li>
      <a href="09-graficos-II.html">Gr√°ficos II</a>
    </li>
    <li>
      <a href="10-graficos-III.html">Gr√°ficos para publicar</a>
    </li>
    <li>
      <a href="11-reportes-II.html">Reportes II</a>
    </li>
    <li>
      <a href="12-publicar.html">Publicar reportes</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Desaf√≠os
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="desafio-1.html">Leer y analizar datos</a>
    </li>
    <li>
      <a href="desafio-2.html">Graficar datos</a>
    </li>
    <li>
      <a href="desafio-3.html">Generar un informe</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Visualizaci√≥n de datos con {ggplot2} I</h1>

</div>


<p>Visualizar datos es √∫til para identificar a relaci√≥n entre distintas variables pero tambi√©n para comunicar el an√°lisis de los datos y resultados. El paquete <code>ggplot2</code> permite generar gr√°ficos de gran calidad en pocos pasos. Cualquier gr√°fico de ggplot tendr√° como m√≠nimo 3 componentes: los <strong>datos</strong>, un <strong>sistema de coordenadas</strong> y una <strong>geometr√≠a</strong> (la representaci√≥n visual de los datos) y se ir√° construyendo por capas.</p>
<div id="primera-capa-el-√°rea-del-gr√°fico" class="section level2">
<h2>Primera capa: el √°rea del gr√°fico</h2>
<p>C√≥mo siempre ser√° necesario cargar los paquetes que vamos a usar y ya que estamos la base de datos de Bariloche con la que estuvimos trabajando <a href="06-dplyr-tidyr-II.html">anteriormente</a>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">library</span>(ggplot2) <span class="co"># El paquete del momento</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw">library</span>(readr)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw">library</span>(tidyr)</span>
<span id="cb1-5"><a href="#cb1-5"></a></span>
<span id="cb1-6"><a href="#cb1-6"></a></span>
<span id="cb1-7"><a href="#cb1-7"></a>bariloche &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="st">&quot;datos/bariloche_enlimpio.csv&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="st">  </span><span class="kw">select</span>(Fecha, <span class="kw">starts_with</span>(<span class="st">&quot;Temperatura&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> <span class="op">-</span>Fecha,</span>
<span id="cb1-10"><a href="#cb1-10"></a>               <span class="dt">names_to =</span> <span class="st">&quot;variable_lugar_altura_tipo&quot;</span>,</span>
<span id="cb1-11"><a href="#cb1-11"></a>               <span class="dt">values_to =</span> <span class="st">&quot;valor&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="st">  </span><span class="kw">separate</span>(<span class="dt">col =</span> variable_lugar_altura_tipo, </span>
<span id="cb1-13"><a href="#cb1-13"></a>           <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;variable&quot;</span>, <span class="st">&quot;lugar&quot;</span>, <span class="st">&quot;altura&quot;</span>, <span class="st">&quot;tipo&quot;</span>), </span>
<span id="cb1-14"><a href="#cb1-14"></a>           <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-15"><a href="#cb1-15"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">tipo =</span> <span class="kw">if_else</span>(<span class="kw">is.na</span>(tipo), <span class="st">&quot;Media&quot;</span>, tipo))</span></code></pre></div>
<div class="alert alert-success">
<p><strong>Tip:</strong> Es muy com√∫n tener que manipular y limpiar los datos para poder utilizarlos tal como hicimos con las observaciones de Bariloche. En este caso esa manipulaci√≥n no requiere de mucho tiempo porque se tratan de pocos datos. Si estuvieras trabajando con muchos datos o haciendo una manipulaci√≥n que requiere mucho tiempo de computo, es recomendable guardar esa nueva versi√≥n es un nuevo archivo. Pero, es muy importante guardar el c√≥digo que gener√≥ esa nueva versi√≥n de la base de datos, nunca se sabe cuando habr√° que rehacer todo!</p>
</div>
<p>La funci√≥n principal de ggplot2 es justamente <code>ggplot()</code> que nos permite <em>iniciar</em> el gr√°fico y adem√°s definir las caracter√≠sticas <em>globales</em>. El primer argumento de esta funci√≥n ser√°n los datos que queremos visualizar, siempre en un data.frame. En este caso usamos <code>paises</code>.</p>
<p>El segundo argumento se llama mapping justamente porque <em>mapea</em> o <em>dibuja</em> los ejes del gr√°fico y <strong>siempre</strong> va acompa√±ado de la funci√≥n <code>aes()</code>. La funci√≥n <code>aes()</code> recibe las propiedades est√©ticas del gr√°fico (o <em>aesthetic</em> en ingl√©s) a partir de las variables (o columnas) del data.frame estamos usando. En este caso le indicamos que en el eje <strong>x</strong> querremos graficar la variable <code>tipo</code> (o sea m√≠nima, media y m√°xima) y en eje <strong>y</strong> la variable <code>valor</code> que en realidad contiene las observaciones de temperatura.</p>
<p>Pero esta sola funci√≥n no es suficiente, solo genera la primera capa: el √°rea del gr√°fico.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> bariloche, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> tipo, <span class="dt">y =</span> valor)) </span></code></pre></div>
<p><img src="07-graficos-I_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
</div>
<div id="segunda-capa-geometr√≠as" class="section level2">
<h2>Segunda capa: geometr√≠as</h2>
<p>Necesitamos agregar una nueva capa a nuestro gr√°fico, los elementos geom√©tricos o <em>geoms</em> que representaran los datos. Para esto <em>sumamos</em> una funci√≥n geom, por ejemplo si queremos representar los datos con puntos usaremos <code>geom_point()</code></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> bariloche, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> tipo, <span class="dt">y =</span> valor)) <span class="op">+</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="st">  </span><span class="kw">geom_point</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 16105 rows containing missing values (geom_point).</code></pre>
<p><img src="07-graficos-I_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>¬°Nuestro primer gr√°fico!</p>
<div class="alert alert-info">
<p><strong>Primer desaf√≠o</strong></p>
<p>Ahora es tu turno. Modifica el gr√°fico anterior para visualizar c√≥mo cambia la temperatura a lo largo del tiempo</p>
<p>¬øTe parece √∫til este gr√°fico?</p>
</div>
<p>Este gr√°fico tiene much√≠sima informaci√≥n porque tiene un punto por cada observaci√≥n para cada d√≠a y cada variable de temperatura. Pero si bien podemos adivinar un ciclo anual, los veranos m√°s c√°lidos y los inviernos m√°s fr√≠os, hay mucha informaci√≥n que se pierde.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> bariloche, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Fecha, <span class="dt">y =</span> valor)) <span class="op">+</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="st">  </span><span class="kw">geom_point</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 16105 rows containing missing values (geom_point).</code></pre>
<p><img src="07-graficos-I_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<div id="mapear-variables-a-elementos" class="section level3">
<h3>Mapear variables a elementos</h3>
<p>Una posible soluci√≥n ser√≠a utilizar otras variables de nuestros datos, por ejemplo el <code>tipo</code> y <em>mapear</em> el color de los puntos de a cuerdo al <code>tipo</code> de temperatura, m√°xima, m√≠nima y media.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> bariloche, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Fecha, <span class="dt">y =</span> valor)) <span class="op">+</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> tipo))</span></code></pre></div>
<pre><code>## Warning: Removed 16105 rows containing missing values (geom_point).</code></pre>
<p><img src="07-graficos-I_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>Ahora est√° un poco mejor. Por ejemplo ya podemos ver que en general las temperaturas m√°ximas (los puntos rosas) tienen en promedio mayor valor a lo largo de los a√±os que las temperaturas m√≠nimas (los puntos celestes). A√∫n no podemos identificar en lugar donde se tomaron los datos pero tenemos algo m√°s de informaci√≥n.</p>
<p>Algo muy importante a tener en cuenta: <strong>los puntos toman un color de acuerdo a una variable de los datos</strong>, y para que ggplot2 identifique esa variable (en este caso <code>tipo</code>) es necesario incluirla dentro de una funci√≥n <code>aes()</code>.</p>
</div>
</div>
<div id="otras-geometr√≠as" class="section level2">
<h2>Otras geometr√≠as</h2>
<p>Este gr√°fico posiblemente no sea muy adecuado si queremos visualizar la <em>evoluci√≥n</em> de una variable a lo largo del tiempo, necesitamos cambiar la geometr√≠a a lineas usando <code>geom_line()</code></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> <span class="kw">na.omit</span>(bariloche), <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Fecha, <span class="dt">y =</span> valor)) <span class="op">+</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">color =</span> tipo))</span></code></pre></div>
<p><img src="07-graficos-I_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<div class="alert alert-success">
<p>Es posible que te est√©s preguntando que hace ese <code>na.omit()</code> metido adentro del c√≥digo. Resulta que los gr√°ficos de l√≠neas en general no se llevan bien con los datos faltantes y necesitamos sacarlos para que no nos haga problemas. En la vida real tendr√≠amos que decidir como resolver este problema de una manera menos dr√°stica!</p>
</div>
<p>Por suerte las funciones <code>geom_*()</code> tienen m√°s o menos nombres amigables. Pero el gr√°fico sigue teniendo problemas algo m√°s sutiles. En este caso est√° haciendo un gr√°fico por tipo de temperatura, pero en el camino mezcl√≥ las observaciones que se hicieron en el abrigo, a la intemperie y en el suelo. Si estuvi√©ramos dibujando este gr√°fico con l√°piz y papel muy posiblemente hubi√©ramos identificado los puntos que corresponden a cada tipo de temperatura y lugar y los hubi√©ramos ‚Äúunido con l√≠neas‚Äù, necesitamos que ggplot2 haga esto. ¬øC√≥mo le indicamos que observaciones corresponde a cada variable de temperatura? Necesitamos que los <em>agrupe</em> por las variables <code>tipo</code> y <code>lugar</code> (¬°qu√© bueno que tenemos toda esa informaci√≥n en nuestra base de datos!).</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> <span class="kw">na.omit</span>(bariloche), <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Fecha, <span class="dt">y =</span> valor)) <span class="op">+</span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">color =</span> tipo, <span class="dt">group =</span> <span class="kw">interaction</span>(tipo, lugar)))</span></code></pre></div>
<p><img src="07-graficos-I_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>Usamos el argumento <code>group =</code> y de nuevo, lo incluimos dentro de la funci√≥n <code>aes()</code> para indicarle a ggplot2 que busque la variable <code>tipo</code> y <code>lugar</code> dentro del data.frame que estamos usando. En este caso como estamos agrupando por dos variables tenemos que incluir la funci√≥n <code>interaction()</code>.</p>
<p>Y ahora si, conseguimos el gr√°fico que estamos buscando.</p>
<div class="alert alert-info">
<p><strong>Segundo desaf√≠o</strong></p>
<p>Cuando mencionamos que ggplot2 construye gr√°ficos por capas, lo dec√≠amos en serio! Hasta ahora tenemos dos capas: el √°rea del gr√°fico y una geometr√≠a (las l√≠neas).</p>
<ol style="list-style-type: decimal">
<li>Sum√° una tercera capa para visualizar puntos adem√°s de las l√≠neas.</li>
<li>¬øPorqu√© los puntos ahora no siguen los colores de las distintas temperaturas?</li>
<li>¬øQu√© cambio podr√≠as hacer para que los puntos tambi√©n tengan color seg√∫n el tipo de temperatura?</li>
</ol>
</div>
<p>Ac√° surge una caracter√≠stica importante de las capas: pueden tener apariencia independiente si solo <em>mapeamos</em> el color en la capa de las l√≠neas y no en la capa de los puntos. Al mismo tiempo, si quisi√©ramos que todas las capas tenga la misma apariencia podemos incluir el argumento <code>color =</code>en la funci√≥n global <code>ggpplot()</code> o repetirlo en cada capa.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="kw">ggplot</span>(<span class="kw">na.omit</span>(bariloche), <span class="kw">aes</span>(<span class="dt">x =</span> Fecha, <span class="dt">y =</span> valor)) <span class="op">+</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">color =</span> tipo, <span class="dt">group =</span> <span class="kw">interaction</span>(tipo, lugar))) <span class="op">+</span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="st">  </span><span class="kw">geom_point</span>()</span></code></pre></div>
<p><img src="07-graficos-I_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<div class="alert alert-success">
<p>Si te preguntabas a donde fueron a parar el <code>data =</code>, el <code>mapping =</code> y los nombres de los argumentos adentro de la funci√≥n <code>aes()</code>, <code>x =</code> e <code>y =</code>, resulta que estamos aprovechando que tanto ggplot2 como nosotros ahora sabemos en que orden recibe la informaci√≥n cada funci√≥n. Siempre el primer elemento que le <em>pasemos</em> o indiquemos a la funci√≥n <code>ggplot()</code> ser√° el data.frame.</p>
</div>
<p>Algunos argumentos para cambiar la apariencia de las geometr√≠as son:</p>
<ul>
<li><code>color</code> o <code>colour</code> modifica el color de l√≠neas y puntos</li>
<li><code>fill</code>modifica el color del √°rea de un elemento, por ejemplo el relleno de un punto</li>
<li><code>linetype</code> modifica el tipo de l√≠nea (punteada, continua, con guiones, etc.)</li>
<li><code>pch</code> modifica el tama√±o del punto</li>
<li><code>size</code> modifica el tama√±o de los elementos (por ejemplo el tama√±o de puntos o el grosor de l√≠neas)</li>
<li><code>alpha</code> modifica la transparencia de los elementos (1 = opaco, 0 = transparente)</li>
<li><code>shape</code> modifica el tipo de punto (c√≠rculos, cuadrados, tri√°ngulos, etc.)</li>
</ul>
<p>El <em>mapeo</em> entre una variable y un par√°metro de geometr√≠a se hace a trav√©s de una <strong>escala</strong>. La escala de colores es lo que define, por ejemplo, que los puntos donde la variable <code>tipo</code> toma el valor <code>"Maxima"</code> van a tener el color rosa (<span style="color:#F77D75">‚óè</span>), donde toma el valor <code>"Minima"</code>, celeste (<span style="color:#619cff">‚óè</span>), etc‚Ä¶</p>
<div class="alert alert-success">
<p><strong>Modificar elementos utilizando un valor √∫nico</strong></p>
<p>Es posible que en alg√∫n momento necesites cambiar la apariencia de los elementos o geometr√≠as independientemente de las variables de tu data.frame. Por ejemplo podr√≠as querer que todos los puntos sean de un √∫nico color: rojos. En este caso <code>geom_point(aes(color = "red"))</code> no va a funcionar -ojo que los colores van en ingl√©s-. Lo que ese c√≥digo dice es que mapee el par√°metro geom√©trico ‚Äúcolor‚Äù a una variable que contiene el valor <code>"red"</code> para todas las filas. El mapeo se hace a trav√©s de la escala, que va a asignarle un valor (rosa <span style="color:#F77D75">‚óè</span>) a los puntos correspondientes al valor <code>"red"</code>.</p>
<p>Ahora que no nos interesa <em>mapear</em> el color a una variable, podemos mover ese argumento <strong>afuera</strong> de la funci√≥n <code>aes()</code>: <code>geom_point(color = "red")</code>.</p>
</div>
</div>
<div id="relaci√≥n-entre-variables" class="section level2">
<h2>Relaci√≥n entre variables</h2>
<p>Muchas veces no es suficiente con mirar los datos crudos para identificar la relaci√≥n entre las variables; es necesario usar alguna transformaci√≥n estad√≠stica que resalte esas relaciones, ya sea ajustando una recta o calculando promedios.</p>
<p>Para alguna transformaciones estad√≠sticas comunes, {ggplot2} tiene geoms ya programados, pero muchas veces es posible que necesitemos manipular los datos antes de poder hacer un gr√°fico. A veces esa manipulaci√≥n ser√° compleja y entonces para no repetir el c√°lculo muchas veces, guardaremos los datos modificados en una nueva variable. Pero tambi√©n podemos <em>encadenar</em> la manipulaci√≥n de los datos y el gr√°fico resultante.</p>
<p>Por ejemplo, calculemos la temperatura media mensual para cada tipo y lugar usando <a href="05-dplyr-I.html"><code>dplyr</code></a> y luego grafiquemos la <code>t_mensual</code> a los largo de los <code>meses</code>:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>bariloche <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="st">  </span><span class="kw">group_by</span>(tipo, lugar, <span class="dt">mes =</span> lubridate<span class="op">::</span><span class="kw">floor_date</span>(Fecha, <span class="dt">unit =</span> <span class="st">&quot;month&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">t_mensual =</span> <span class="kw">mean</span>(valor, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(mes, t_mensual)) <span class="op">+</span><span class="st">    </span><span class="co"># Ac√° se acaban los %&gt;% y comienzan los &quot;+&quot;</span></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> tipo))</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;tipo&#39;, &#39;lugar&#39; (override with `.groups` argument)</code></pre>
<pre><code>## Warning: Removed 238 rows containing missing values (geom_point).</code></pre>
<p><img src="07-graficos-I_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<div class="alert alert-success">
<p>Tal vez notaste que agregamos una funci√≥n (<code>lubridate::floor_date()</code>) para obtener el mes de la variable <code>Fecha</code>. La funci√≥n es del paquete {lubridate} que vemos en m√°s detalle <a href="09-lubridate.html">ac√°</a>, y lo que hace es redondear la fecha en este caso al mes. Esto es necesario porque ya no nos interesa la informaci√≥n de los d√≠as para calcular un promedio mensual. Tambi√©n podr√≠amos haber calculado un promedio anual y en ese caso usar <code>floor_date(Fecha, unit = "year)</code>.</p>
</div>
<p>Esto es posible gracias al operador <code>%&gt;%</code> que le <em>pasa</em> el resultado de <code>summarise()</code> a la funci√≥n <code>ggplot()</code>. Y este resultado no es ni m√°s ni menos que el data.frame que necesitamos para hacer nuestro gr√°fico. Es importante notar que una vez que comenzamos el gr√°fico ya <strong>no</strong> se puede usar el operador <code>%&gt;%</code> y las capas del gr√°fico se <em>suman</em> como siempre con <code>+</code>.</p>
<p>Este gr√°fico entonces parece mostrar la evoluci√≥n de la temperatura a lo largo del tiempo de una manera m√°s limpia. Pero ser√≠a interesante ver esa evoluci√≥n o relaci√≥n en el tiempo m√°s expl√≠citamente agregando una nueva capa con <code>geom_smooth()</code>.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>bariloche <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="st">  </span><span class="kw">group_by</span>(tipo, lugar, <span class="dt">mes =</span> lubridate<span class="op">::</span><span class="kw">floor_date</span>(Fecha, <span class="dt">unit =</span> <span class="st">&quot;month&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">t_mensual =</span> <span class="kw">mean</span>(valor, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(mes, t_mensual)) <span class="op">+</span><span class="st">   </span></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> tipo)) <span class="op">+</span></span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="st">  </span><span class="kw">geom_smooth</span>()</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;tipo&#39;, &#39;lugar&#39; (override with `.groups` argument)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 238 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 238 rows containing missing values (geom_point).</code></pre>
<p><img src="07-graficos-I_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>Como dice en el mensaje, por defecto <code>geom_smooth()</code> suaviza los datos usando el m√©todo <em>loess</em> (regresi√≥n lineal local) cuando hay menos de 1000 datos. Seguramente va a ser muy com√∫n que quieras ajustar una regresi√≥n lineal global. En ese caso, hay que poner <code>method = "lm"</code>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>bariloche <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb20-2"><a href="#cb20-2"></a><span class="st">  </span><span class="kw">group_by</span>(tipo, lugar, <span class="dt">mes =</span> lubridate<span class="op">::</span><span class="kw">floor_date</span>(Fecha, <span class="dt">unit =</span> <span class="st">&quot;month&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb20-3"><a href="#cb20-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">t_mensual =</span> <span class="kw">mean</span>(valor, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb20-4"><a href="#cb20-4"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(mes, t_mensual)) <span class="op">+</span><span class="st">   </span></span>
<span id="cb20-5"><a href="#cb20-5"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> tipo)) <span class="op">+</span></span>
<span id="cb20-6"><a href="#cb20-6"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;tipo&#39;, &#39;lugar&#39; (override with `.groups` argument)</code></pre>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 238 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 238 rows containing missing values (geom_point).</code></pre>
<p><img src="07-graficos-I_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>En gris nos muestra el intervalo de confianza al rededor de este suavizado.</p>
<p>C√≥mo cualquier geom, podemos modificar el color, el grosor de la l√≠nea y casi cualquier cosa que se te ocurra.</p>
<div class="alert alert-info">
<p><strong>Tercer desaf√≠o</strong></p>
<p>Modific√° el siguiente c√≥digo para obtener el gr√°fico que se muestra m√°s abajo.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>bariloche <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="st">  </span><span class="kw">group_by</span>(______, lugar, <span class="dt">mes =</span> lubridate<span class="op">::</span><span class="kw">floor_date</span>(Fecha, <span class="dt">unit =</span> <span class="st">&quot;month&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb25-3"><a href="#cb25-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">t_mensual =</span> <span class="kw">mean</span>(valor, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb25-4"><a href="#cb25-4"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(mes, _______)) <span class="op">+</span><span class="st">   </span></span>
<span id="cb25-5"><a href="#cb25-5"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> tipo), <span class="dt">shape =</span> ____, <span class="dt">size =</span> <span class="dv">2</span>) <span class="op">+</span></span>
<span id="cb25-6"><a href="#cb25-6"></a><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">color =</span> tipo, <span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<p><img src="07-graficos-I_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
</div>
</div>
<div id="graficando-en-paneles" class="section level2">
<h2>Graficando en paneles</h2>
<p>Vimos que es posible graficar m√°s de dos variables en un gr√°fico mapeando una variable al <code>color</code> o por ejemplo el tipo de l√≠nea o <code>linetype</code> para observar la relaci√≥n entre las 3 variables. Tambi√©n podr√≠amos haber intentando resolver el problema generando un gr√°fico por cada color filtrando las observaciones correspondientes.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>bariloche <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb26-2"><a href="#cb26-2"></a><span class="st">  </span><span class="kw">group_by</span>(tipo, lugar, <span class="dt">mes =</span> lubridate<span class="op">::</span><span class="kw">floor_date</span>(Fecha, <span class="dt">unit =</span> <span class="st">&quot;month&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb26-3"><a href="#cb26-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">t_mensual =</span> <span class="kw">mean</span>(valor, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb26-4"><a href="#cb26-4"></a><span class="st">  </span><span class="kw">filter</span>(tipo <span class="op">==</span><span class="st"> &quot;Maxima&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb26-5"><a href="#cb26-5"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(mes, t_mensual)) <span class="op">+</span><span class="st">   </span></span>
<span id="cb26-6"><a href="#cb26-6"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> tipo))</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;tipo&#39;, &#39;lugar&#39; (override with `.groups` argument)</code></pre>
<pre><code>## Warning: Removed 8 rows containing missing values (geom_point).</code></pre>
<p><img src="07-graficos-I_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>Pero ser√≠a much√≠simo trabajo si tenemos que hacer esto para cada una de las posibles categor√≠as de. La buena noticia es que {ggplot2} tiene un par de funciones justo para resolver este problema:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>bariloche <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb29-2"><a href="#cb29-2"></a><span class="st">  </span><span class="kw">group_by</span>(tipo, lugar, <span class="dt">mes =</span> lubridate<span class="op">::</span><span class="kw">floor_date</span>(Fecha, <span class="dt">unit =</span> <span class="st">&quot;month&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb29-3"><a href="#cb29-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">t_mensual =</span> <span class="kw">mean</span>(valor, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb29-4"><a href="#cb29-4"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(mes, t_mensual)) <span class="op">+</span><span class="st">   </span></span>
<span id="cb29-5"><a href="#cb29-5"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> tipo)) <span class="op">+</span></span>
<span id="cb29-6"><a href="#cb29-6"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>tipo)</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;tipo&#39;, &#39;lugar&#39; (override with `.groups` argument)</code></pre>
<pre><code>## Warning: Removed 238 rows containing missing values (geom_point).</code></pre>
<p><img src="07-graficos-I_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>Esta nueva capa con <code>facet_wrap()</code> divide al gr√°fico inicial en 3 paneles o facets, uno por cada color (y cada tipo de temperatura). Esta funci√≥n requiere saber que variable ser√° la responsable de separar los paneles y para eso se usa la notaci√≥n de funciones de R: <code>~tipo</code>. Esto se lee como generar paneles ‚Äúen funci√≥n del tipo (de temperatura)‚Äù.</p>
<p>¬øY si quisi√©ramos generar paneles a partir de 2 variables? Para eso existe <code>facet_grid()</code>. En este gr√°fico generamos paneles viendo la ‚Äúrelaci√≥n entre el tipo y el lugar‚Äù donde se midi√≥ la temperatura y por ejemplo en el primer panel arriba a la izquierda podremos observar la temperatura m√°xima en el abrigo. En este caso mapear el tipo de temperatura al color delos puntos no parece ser necesario ya que cada columna ya nos permite identificar eso, sin embargo en algunos casos ayuda a leer el gr√°fico m√°s r√°pido.</p>
<p>En este caso tambi√©n notamos que esta base de datos est√° poblada de datos faltantes ya que varios paneles quedan vac√≠os.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>bariloche <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb32-2"><a href="#cb32-2"></a><span class="st">  </span><span class="kw">group_by</span>(tipo, lugar, <span class="dt">mes =</span> lubridate<span class="op">::</span><span class="kw">floor_date</span>(Fecha, <span class="dt">unit =</span> <span class="st">&quot;month&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb32-3"><a href="#cb32-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">t_mensual =</span> <span class="kw">mean</span>(valor, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb32-4"><a href="#cb32-4"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(mes, t_mensual)) <span class="op">+</span><span class="st">   </span></span>
<span id="cb32-5"><a href="#cb32-5"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color =</span> tipo)) <span class="op">+</span></span>
<span id="cb32-6"><a href="#cb32-6"></a><span class="st">  </span><span class="kw">facet_grid</span>(lugar <span class="op">~</span><span class="st"> </span>tipo)</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;tipo&#39;, &#39;lugar&#39; (override with `.groups` argument)</code></pre>
<pre><code>## Warning: Removed 238 rows containing missing values (geom_point).</code></pre>
<p><img src="07-graficos-I_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<div class="alert alert-info">
<p><strong>Cuarto desaf√≠o</strong></p>
<p>Ahora es tu turno, intent√° reproducir el siguiente gr√°fico con todo lo visto arriba.</p>
<p><img src="07-graficos-I_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>(Psss! Prob√° cambiar el orden en <code>facet_grid()</code>)</p>
</div>
<p>Quedan muchas otras geometr√≠as que no describimos, si te interesa por ejemplo aprender a hacer un gr√°fico de barras o un boxplot pod√©s revisar este <a href="https://paocorrales.github.io/deExcelaR/07-graficos-II.html">episodio</a>.</p>
<div class="btn-group" role="group" aria-label="Navegaci√≥n">
<p><a href= "06-dplyr-tidyr-II.html" class = "btn btn-primary">Anterior</a> <a href= "08-lubridate.html" class = "btn btn-primary">Siguiente</a></p>
</div>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiVmlzdWFsaXphY2nDs24gZGUgZGF0b3MgY29uIHtnZ3Bsb3QyfSBJIgpvdXRwdXQ6IAogIGh0bWxfZG9jdW1lbnQ6CiAgICBjb2RlX2Rvd25sb2FkOiB0cnVlCiAgICB0b2M6IHRydWUKICAgIHRvY19mbG9hdDogdHJ1ZQogICAgaGlnaGxpZ2h0OiB0YW5nbyAgICAKLS0tCgpgYGB7ciBzZXR1cCwgaW5jbHVkZT1GQUxTRX0Ka25pdHI6Om9wdHNfY2h1bmskc2V0KGVjaG8gPSBUUlVFKQpgYGAKClZpc3VhbGl6YXIgZGF0b3MgZXMgw7p0aWwgcGFyYSBpZGVudGlmaWNhciBhIHJlbGFjacOzbiBlbnRyZSBkaXN0aW50YXMgdmFyaWFibGVzIHBlcm8gdGFtYmnDqW4gcGFyYSBjb211bmljYXIgZWwgYW7DoWxpc2lzIGRlIGxvcyBkYXRvcyB5IHJlc3VsdGFkb3MuIEVsIHBhcXVldGUgYGdncGxvdDJgIHBlcm1pdGUgZ2VuZXJhciBncsOhZmljb3MgZGUgZ3JhbiBjYWxpZGFkIGVuIHBvY29zIHBhc29zLiBDdWFscXVpZXIgZ3LDoWZpY28gZGUgZ2dwbG90IHRlbmRyw6EgY29tbyBtw61uaW1vIDMgY29tcG9uZW50ZXM6IGxvcyAqKmRhdG9zKiosIHVuICoqc2lzdGVtYSBkZSBjb29yZGVuYWRhcyoqIHkgdW5hICoqZ2VvbWV0csOtYSoqIChsYSByZXByZXNlbnRhY2nDs24gdmlzdWFsIGRlIGxvcyBkYXRvcykgeSBzZSBpcsOhIGNvbnN0cnV5ZW5kbyBwb3IgY2FwYXMuIAoKIyMgUHJpbWVyYSBjYXBhOiBlbCDDoXJlYSBkZWwgZ3LDoWZpY28KCkPDs21vIHNpZW1wcmUgc2Vyw6EgbmVjZXNhcmlvIGNhcmdhciBsb3MgcGFxdWV0ZXMgcXVlIHZhbW9zIGEgdXNhciB5IHlhIHF1ZSBlc3RhbW9zIGxhIGJhc2UgZGUgZGF0b3MgZGUgQmFyaWxvY2hlIGNvbiBsYSBxdWUgZXN0dXZpbW9zIHRyYWJhamFuZG8gW2FudGVyaW9ybWVudGVdKDA2LWRwbHlyLXRpZHlyLUlJLmh0bWwpLgoKYGBge3IgbWVzc2FnZT1GQUxTRSwgd2FybmluZz1GQUxTRX0KbGlicmFyeShnZ3Bsb3QyKSAjIEVsIHBhcXVldGUgZGVsIG1vbWVudG8KbGlicmFyeShkcGx5cikKbGlicmFyeShyZWFkcikKbGlicmFyeSh0aWR5cikKCgpiYXJpbG9jaGUgPC0gcmVhZHI6OnJlYWRfY3N2KCJkYXRvcy9iYXJpbG9jaGVfZW5saW1waW8uY3N2IikgJT4lIAogIHNlbGVjdChGZWNoYSwgc3RhcnRzX3dpdGgoIlRlbXBlcmF0dXJhIikpICU+JSAKICBwaXZvdF9sb25nZXIoY29scyA9IC1GZWNoYSwKICAgICAgICAgICAgICAgbmFtZXNfdG8gPSAidmFyaWFibGVfbHVnYXJfYWx0dXJhX3RpcG8iLAogICAgICAgICAgICAgICB2YWx1ZXNfdG8gPSAidmFsb3IiKSAlPiUgCiAgc2VwYXJhdGUoY29sID0gdmFyaWFibGVfbHVnYXJfYWx0dXJhX3RpcG8sIAogICAgICAgICAgIGludG8gPSBjKCJ2YXJpYWJsZSIsICJsdWdhciIsICJhbHR1cmEiLCAidGlwbyIpLCAKICAgICAgICAgICBzZXAgPSAiXyIpICU+JSAKICBtdXRhdGUodGlwbyA9IGlmX2Vsc2UoaXMubmEodGlwbyksICJNZWRpYSIsIHRpcG8pKQpgYGAKCjo6OiB7LmFsZXJ0IC5hbGVydC1zdWNjZXNzfQoqKlRpcDoqKiBFcyBtdXkgY29tw7puIHRlbmVyIHF1ZSBtYW5pcHVsYXIgeSBsaW1waWFyIGxvcyBkYXRvcyBwYXJhIHBvZGVyIHV0aWxpemFybG9zIHRhbCBjb21vIGhpY2ltb3MgY29uIGxhcyBvYnNlcnZhY2lvbmVzIGRlIEJhcmlsb2NoZS4gRW4gZXN0ZSBjYXNvIGVzYSBtYW5pcHVsYWNpw7NuIG5vIHJlcXVpZXJlIGRlIG11Y2hvIHRpZW1wbyBwb3JxdWUgc2UgdHJhdGFuIGRlIHBvY29zIGRhdG9zLiBTaSBlc3R1dmllcmFzIHRyYWJhamFuZG8gY29uIG11Y2hvcyBkYXRvcyBvIGhhY2llbmRvIHVuYSBtYW5pcHVsYWNpw7NuIHF1ZSByZXF1aWVyZSBtdWNobyB0aWVtcG8gZGUgY29tcHV0bywgZXMgcmVjb21lbmRhYmxlIGd1YXJkYXIgZXNhIG51ZXZhIHZlcnNpw7NuIGVzIHVuIG51ZXZvIGFyY2hpdm8uIFBlcm8sIGVzIG11eSBpbXBvcnRhbnRlIGd1YXJkYXIgZWwgY8OzZGlnbyBxdWUgZ2VuZXLDsyBlc2EgbnVldmEgdmVyc2nDs24gZGUgbGEgYmFzZSBkZSBkYXRvcywgbnVuY2Egc2Ugc2FiZSBjdWFuZG8gaGFicsOhIHF1ZSByZWhhY2VyIHRvZG8hCjo6OgoKTGEgZnVuY2nDs24gcHJpbmNpcGFsIGRlIGdncGxvdDIgZXMganVzdGFtZW50ZSBgZ2dwbG90KClgIHF1ZSBub3MgcGVybWl0ZSAqaW5pY2lhciogZWwgZ3LDoWZpY28geSBhZGVtw6FzIGRlZmluaXIgbGFzIGNhcmFjdGVyw61zdGljYXMgKmdsb2JhbGVzKi4gRWwgcHJpbWVyIGFyZ3VtZW50byBkZSBlc3RhIGZ1bmNpw7NuIHNlcsOhbiBsb3MgZGF0b3MgcXVlIHF1ZXJlbW9zIHZpc3VhbGl6YXIsIHNpZW1wcmUgZW4gdW4gZGF0YS5mcmFtZS4gRW4gZXN0ZSBjYXNvIHVzYW1vcyBgcGFpc2VzYC4gCgpFbCBzZWd1bmRvIGFyZ3VtZW50byBzZSBsbGFtYSBtYXBwaW5nIGp1c3RhbWVudGUgcG9ycXVlICptYXBlYSogbyAqZGlidWphKiBsb3MgZWplcyBkZWwgZ3LDoWZpY28geSAqKnNpZW1wcmUqKiB2YSBhY29tcGHDsWFkbyBkZSBsYSBmdW5jacOzbiBgYWVzKClgLiBMYSBmdW5jacOzbiBgYWVzKClgIHJlY2liZSBsYXMgcHJvcGllZGFkZXMgZXN0w6l0aWNhcyBkZWwgZ3LDoWZpY28gKG8gKmFlc3RoZXRpYyogZW4gaW5nbMOpcykgYSBwYXJ0aXIgZGUgbGFzIHZhcmlhYmxlcyAobyBjb2x1bW5hcykgZGVsIGRhdGEuZnJhbWUgZXN0YW1vcyB1c2FuZG8uIEVuIGVzdGUgY2FzbyBsZSBpbmRpY2Ftb3MgcXVlIGVuIGVsIGVqZSAqKngqKiBxdWVycmVtb3MgZ3JhZmljYXIgbGEgdmFyaWFibGUgYHRpcG9gIChvIHNlYSBtw61uaW1hLCBtZWRpYSB5IG3DoXhpbWEpIHkgZW4gZWplICoqeSoqIGxhIHZhcmlhYmxlIGB2YWxvcmAgcXVlIGVuIHJlYWxpZGFkIGNvbnRpZW5lIGxhcyBvYnNlcnZhY2lvbmVzIGRlIHRlbXBlcmF0dXJhLgoKUGVybyBlc3RhIHNvbGEgZnVuY2nDs24gbm8gZXMgc3VmaWNpZW50ZSwgc29sbyBnZW5lcmEgbGEgcHJpbWVyYSBjYXBhOiBlbCDDoXJlYSBkZWwgZ3LDoWZpY28uCgpgYGB7cn0KZ2dwbG90KGRhdGEgPSBiYXJpbG9jaGUsIG1hcHBpbmcgPSBhZXMoeCA9IHRpcG8sIHkgPSB2YWxvcikpIApgYGAKCiMjIFNlZ3VuZGEgY2FwYTogZ2VvbWV0csOtYXMKTmVjZXNpdGFtb3MgYWdyZWdhciB1bmEgbnVldmEgY2FwYSBhIG51ZXN0cm8gZ3LDoWZpY28sIGxvcyBlbGVtZW50b3MgZ2VvbcOpdHJpY29zIG8gKmdlb21zKiBxdWUgcmVwcmVzZW50YXJhbiBsb3MgZGF0b3MuIFBhcmEgZXN0byAqc3VtYW1vcyogdW5hIGZ1bmNpw7NuIGdlb20sIHBvciBlamVtcGxvIHNpIHF1ZXJlbW9zIHJlcHJlc2VudGFyIGxvcyBkYXRvcyBjb24gcHVudG9zIHVzYXJlbW9zIGBnZW9tX3BvaW50KClgCgpgYGB7cn0KZ2dwbG90KGRhdGEgPSBiYXJpbG9jaGUsIG1hcHBpbmcgPSBhZXMoeCA9IHRpcG8sIHkgPSB2YWxvcikpICsKICBnZW9tX3BvaW50KCkKYGBgCgrCoU51ZXN0cm8gcHJpbWVyIGdyw6FmaWNvISAKCjo6OiB7LmFsZXJ0IC5hbGVydC1pbmZvfQoqKlByaW1lciBkZXNhZsOtbyoqCgpBaG9yYSBlcyB0dSB0dXJuby4gTW9kaWZpY2EgZWwgZ3LDoWZpY28gYW50ZXJpb3IgcGFyYSB2aXN1YWxpemFyIGPDs21vIGNhbWJpYSBsYSB0ZW1wZXJhdHVyYSBhIGxvIGxhcmdvIGRlbCB0aWVtcG8gCgrCv1RlIHBhcmVjZSDDunRpbCBlc3RlIGdyw6FmaWNvPwo6OjoKCkVzdGUgZ3LDoWZpY28gdGllbmUgbXVjaMOtc2ltYSBpbmZvcm1hY2nDs24gcG9ycXVlIHRpZW5lIHVuIHB1bnRvIHBvciBjYWRhIG9ic2VydmFjacOzbiBwYXJhIGNhZGEgZMOtYSB5IGNhZGEgdmFyaWFibGUgZGUgdGVtcGVyYXR1cmEuIFBlcm8gc2kgYmllbiBwb2RlbW9zIGFkaXZpbmFyIHVuIGNpY2xvIGFudWFsLCBsb3MgdmVyYW5vcyBtw6FzIGPDoWxpZG9zIHkgbG9zIGludmllcm5vcyBtw6FzIGZyw61vcywgaGF5IG11Y2hhIGluZm9ybWFjacOzbiBxdWUgc2UgcGllcmRlLiAKCmBgYHtyfQpnZ3Bsb3QoZGF0YSA9IGJhcmlsb2NoZSwgbWFwcGluZyA9IGFlcyh4ID0gRmVjaGEsIHkgPSB2YWxvcikpICsKICBnZW9tX3BvaW50KCkKYGBgCgojIyMgTWFwZWFyIHZhcmlhYmxlcyBhIGVsZW1lbnRvcwoKVW5hIHBvc2libGUgc29sdWNpw7NuIHNlcsOtYSB1dGlsaXphciBvdHJhcyB2YXJpYWJsZXMgZGUgbnVlc3Ryb3MgZGF0b3MsIHBvciBlamVtcGxvIGVsIGB0aXBvYCB5ICptYXBlYXIqIGVsIGNvbG9yIGRlIGxvcyBwdW50b3MgZGUgYSBjdWVyZG8gYWwgYHRpcG9gIGRlIHRlbXBlcmF0dXJhLCBtw6F4aW1hLCBtw61uaW1hIHkgbWVkaWEuCgpgYGB7cn0KZ2dwbG90KGRhdGEgPSBiYXJpbG9jaGUsIG1hcHBpbmcgPSBhZXMoeCA9IEZlY2hhLCB5ID0gdmFsb3IpKSArCiAgZ2VvbV9wb2ludChhZXMoY29sb3IgPSB0aXBvKSkKYGBgCgpBaG9yYSBlc3TDoSB1biBwb2NvIG1lam9yLiBQb3IgZWplbXBsbyB5YSBwb2RlbW9zIHZlciBxdWUgZW4gZ2VuZXJhbCBsYXMgdGVtcGVyYXR1cmFzIG3DoXhpbWFzIChsb3MgcHVudG9zIHJvc2FzKSB0aWVuZW4gZW4gcHJvbWVkaW8gbWF5b3IgdmFsb3IgYSBsbyBsYXJnbyBkZSBsb3MgYcOxb3MgcXVlIGxhcyB0ZW1wZXJhdHVyYXMgbcOtbmltYXMgKGxvcyBwdW50b3MgY2VsZXN0ZXMpLiBBw7puIG5vIHBvZGVtb3MgaWRlbnRpZmljYXIgZW4gbHVnYXIgZG9uZGUgc2UgdG9tYXJvbiBsb3MgZGF0b3MgcGVybyB0ZW5lbW9zIGFsZ28gbcOhcyBkZSBpbmZvcm1hY2nDs24uIAoKCkFsZ28gbXV5IGltcG9ydGFudGUgYSB0ZW5lciBlbiBjdWVudGE6ICoqbG9zIHB1bnRvcyB0b21hbiB1biBjb2xvciBkZSBhY3VlcmRvIGEgdW5hIHZhcmlhYmxlIGRlIGxvcyBkYXRvcyoqLCB5IHBhcmEgcXVlIGdncGxvdDIgaWRlbnRpZmlxdWUgZXNhIHZhcmlhYmxlIChlbiBlc3RlIGNhc28gYHRpcG9gKSBlcyBuZWNlc2FyaW8gaW5jbHVpcmxhIGRlbnRybyBkZSB1bmEgZnVuY2nDs24gYGFlcygpYC4KCiMjIE90cmFzIGdlb21ldHLDrWFzCgpFc3RlIGdyw6FmaWNvIHBvc2libGVtZW50ZSBubyBzZWEgbXV5IGFkZWN1YWRvIHNpIHF1ZXJlbW9zIHZpc3VhbGl6YXIgbGEgKmV2b2x1Y2nDs24qIGRlIHVuYSB2YXJpYWJsZSBhIGxvIGxhcmdvIGRlbCB0aWVtcG8sIG5lY2VzaXRhbW9zIGNhbWJpYXIgbGEgZ2VvbWV0csOtYSBhIGxpbmVhcyB1c2FuZG8gYGdlb21fbGluZSgpYAoKYGBge3J9CmdncGxvdChkYXRhID0gbmEub21pdChiYXJpbG9jaGUpLCBtYXBwaW5nID0gYWVzKHggPSBGZWNoYSwgeSA9IHZhbG9yKSkgKwogIGdlb21fbGluZShhZXMoY29sb3IgPSB0aXBvKSkKYGBgCgo6Ojogey5hbGVydCAuYWxlcnQtc3VjY2Vzc30KRXMgcG9zaWJsZSBxdWUgdGUgZXN0w6lzIHByZWd1bnRhbmRvIHF1ZSBoYWNlIGVzZSBgbmEub21pdCgpYCBtZXRpZG8gYWRlbnRybyBkZWwgY8OzZGlnby4gUmVzdWx0YSBxdWUgbG9zIGdyw6FmaWNvcyBkZSBsw61uZWFzIGVuIGdlbmVyYWwgbm8gc2UgbGxldmFuIGJpZW4gY29uIGxvcyBkYXRvcyBmYWx0YW50ZXMgeSBuZWNlc2l0YW1vcyBzYWNhcmxvcyBwYXJhIHF1ZSBubyBub3MgaGFnYSBwcm9ibGVtYXMuIEVuIGxhIHZpZGEgcmVhbCB0ZW5kcsOtYW1vcyBxdWUgZGVjaWRpciBjb21vIHJlc29sdmVyIGVzdGUgcHJvYmxlbWEgZGUgdW5hIG1hbmVyYSBtZW5vcyBkcsOhc3RpY2EhCjo6OgoKUG9yIHN1ZXJ0ZSBsYXMgZnVuY2lvbmVzIGBnZW9tXyooKWAgdGllbmVuIG3DoXMgbyBtZW5vcyBub21icmVzIGFtaWdhYmxlcy4gUGVybyBlbCBncsOhZmljbyBzaWd1ZSB0ZW5pZW5kbyBwcm9ibGVtYXMgYWxnbyBtw6FzIHN1dGlsZXMuIEVuIGVzdGUgY2FzbyBlc3TDoSBoYWNpZW5kbyB1biBncsOhZmljbyBwb3IgdGlwbyBkZSB0ZW1wZXJhdHVyYSwgcGVybyBlbiBlbCBjYW1pbm8gbWV6Y2zDsyBsYXMgb2JzZXJ2YWNpb25lcyBxdWUgc2UgaGljaWVyb24gZW4gZWwgYWJyaWdvLCBhIGxhIGludGVtcGVyaWUgeSBlbiBlbCBzdWVsby4gU2kgZXN0dXZpw6lyYW1vcyBkaWJ1amFuZG8gZXN0ZSBncsOhZmljbyBjb24gbMOhcGl6IHkgcGFwZWwgbXV5IHBvc2libGVtZW50ZSBodWJpw6lyYW1vcyBpZGVudGlmaWNhZG8gbG9zIHB1bnRvcyBxdWUgY29ycmVzcG9uZGVuIGEgY2FkYSB0aXBvIGRlIHRlbXBlcmF0dXJhIHkgbHVnYXIgeSBsb3MgaHViacOpcmFtb3MgInVuaWRvIGNvbiBsw61uZWFzIiwgbmVjZXNpdGFtb3MgcXVlIGdncGxvdDIgaGFnYSBlc3RvLiDCv0PDs21vIGxlIGluZGljYW1vcyBxdWUgb2JzZXJ2YWNpb25lcyBjb3JyZXNwb25kZSBhIGNhZGEgdmFyaWFibGUgZGUgdGVtcGVyYXR1cmE/IE5lY2VzaXRhbW9zIHF1ZSBsb3MgKmFncnVwZSogcG9yIGxhcyB2YXJpYWJsZXMgYHRpcG9gIHkgYGx1Z2FyYCAowqFxdcOpIGJ1ZW5vIHF1ZSB0ZW5lbW9zIHRvZGEgZXNhIGluZm9ybWFjacOzbiBlbiBudWVzdHJhIGJhc2UgZGUgZGF0b3MhKS4KCmBgYHtyfQpnZ3Bsb3QoZGF0YSA9IG5hLm9taXQoYmFyaWxvY2hlKSwgbWFwcGluZyA9IGFlcyh4ID0gRmVjaGEsIHkgPSB2YWxvcikpICsKICBnZW9tX2xpbmUoYWVzKGNvbG9yID0gdGlwbywgZ3JvdXAgPSBpbnRlcmFjdGlvbih0aXBvLCBsdWdhcikpKQpgYGAKClVzYW1vcyBlbCBhcmd1bWVudG8gYGdyb3VwID1gIHkgZGUgbnVldm8sIGxvIGluY2x1aW1vcyBkZW50cm8gZGUgbGEgZnVuY2nDs24gYGFlcygpYCBwYXJhIGluZGljYXJsZSBhIGdncGxvdDIgcXVlIGJ1c3F1ZSBsYSB2YXJpYWJsZSBgdGlwb2AgeSBgbHVnYXJgIGRlbnRybyBkZWwgZGF0YS5mcmFtZSBxdWUgZXN0YW1vcyB1c2FuZG8uIEVuIGVzdGUgY2FzbyBjb21vIGVzdGFtb3MgYWdydXBhbmRvIHBvciBkb3MgdmFyaWFibGVzIHRlbmVtb3MgcXVlIGluY2x1aXIgbGEgZnVuY2nDs24gYGludGVyYWN0aW9uKClgLgoKWSBhaG9yYSBzaSwgY29uc2VndWltb3MgZWwgZ3LDoWZpY28gcXVlIGVzdGFtb3MgYnVzY2FuZG8uIAoKOjo6IHsuYWxlcnQgLmFsZXJ0LWluZm99CioqU2VndW5kbyBkZXNhZsOtbyoqCgpDdWFuZG8gbWVuY2lvbmFtb3MgcXVlIGdncGxvdDIgY29uc3RydXllIGdyw6FmaWNvcyBwb3IgY2FwYXMsIGxvIGRlY8OtYW1vcyBlbiBzZXJpbyEgSGFzdGEgYWhvcmEgdGVuZW1vcyBkb3MgY2FwYXM6IGVsIMOhcmVhIGRlbCBncsOhZmljbyB5IHVuYSBnZW9tZXRyw61hIChsYXMgbMOtbmVhcykuIAoKMS4gU3Vtw6EgdW5hIHRlcmNlcmEgY2FwYSBwYXJhIHZpc3VhbGl6YXIgcHVudG9zIGFkZW3DoXMgZGUgbGFzIGzDrW5lYXMuCjIuIMK/UG9ycXXDqSBsb3MgcHVudG9zIGFob3JhIG5vIHNpZ3VlbiBsb3MgY29sb3JlcyBkZSBsYXMgZGlzdGludGFzIHRlbXBlcmF0dXJhcz8KMy4gwr9RdcOpIGNhbWJpbyBwb2Ryw61hcyBoYWNlciBwYXJhIHF1ZSBsb3MgcHVudG9zIHRhbWJpw6luIHRlbmdhbiBjb2xvciBzZWfDum4gZWwgdGlwbyBkZSB0ZW1wZXJhdHVyYT8KOjo6CgpBY8OhIHN1cmdlIHVuYSBjYXJhY3RlcsOtc3RpY2EgaW1wb3J0YW50ZSBkZSBsYXMgY2FwYXM6IHB1ZWRlbiB0ZW5lciBhcGFyaWVuY2lhIGluZGVwZW5kaWVudGUgc2kgc29sbyAqbWFwZWFtb3MqIGVsIGNvbG9yIGVuIGxhIGNhcGEgZGUgbGFzIGzDrW5lYXMgeSBubyBlbiBsYSBjYXBhIGRlIGxvcyBwdW50b3MuIEFsIG1pc21vIHRpZW1wbywgc2kgcXVpc2nDqXJhbW9zIHF1ZSB0b2RhcyBsYXMgY2FwYXMgdGVuZ2EgbGEgbWlzbWEgYXBhcmllbmNpYSBwb2RlbW9zIGluY2x1aXIgZWwgYXJndW1lbnRvIGBjb2xvciA9IGBlbiBsYSBmdW5jacOzbiBnbG9iYWwgYGdncHBsb3QoKWAgbyByZXBldGlybG8gZW4gY2FkYSBjYXBhLgoKYGBge3J9CmdncGxvdChuYS5vbWl0KGJhcmlsb2NoZSksIGFlcyh4ID0gRmVjaGEsIHkgPSB2YWxvcikpICsKICBnZW9tX2xpbmUoYWVzKGNvbG9yID0gdGlwbywgZ3JvdXAgPSBpbnRlcmFjdGlvbih0aXBvLCBsdWdhcikpKSArCiAgZ2VvbV9wb2ludCgpCmBgYAoKOjo6IHsuYWxlcnQgLmFsZXJ0LXN1Y2Nlc3N9CgpTaSB0ZSBwcmVndW50YWJhcyBhIGRvbmRlIGZ1ZXJvbiBhIHBhcmFyIGVsIGBkYXRhID0gYCwgZWwgYG1hcHBpbmcgPSBgIHkgbG9zIG5vbWJyZXMgZGUgbG9zIGFyZ3VtZW50b3MgYWRlbnRybyBkZSBsYSBmdW5jacOzbiBgYWVzKClgLCBgeCA9IGAgZSBgeSA9IGAsIHJlc3VsdGEgcXVlIGVzdGFtb3MgYXByb3ZlY2hhbmRvIHF1ZSB0YW50byBnZ3Bsb3QyIGNvbW8gbm9zb3Ryb3MgYWhvcmEgc2FiZW1vcyBlbiBxdWUgb3JkZW4gcmVjaWJlIGxhIGluZm9ybWFjacOzbiBjYWRhIGZ1bmNpw7NuLiBTaWVtcHJlIGVsIHByaW1lciBlbGVtZW50byBxdWUgbGUgKnBhc2Vtb3MqIG8gaW5kaXF1ZW1vcyBhIGxhIGZ1bmNpw7NuIGBnZ3Bsb3QoKWAgc2Vyw6EgZWwgZGF0YS5mcmFtZS4KOjo6CgpBbGd1bm9zIGFyZ3VtZW50b3MgcGFyYSBjYW1iaWFyIGxhIGFwYXJpZW5jaWEgZGUgbGFzIGdlb21ldHLDrWFzIHNvbjoKCiogYGNvbG9yYCBvIGBjb2xvdXJgIG1vZGlmaWNhIGVsIGNvbG9yIGRlIGzDrW5lYXMgeSBwdW50b3MKKiBgZmlsbGBtb2RpZmljYSBlbCBjb2xvciBkZWwgw6FyZWEgZGUgdW4gZWxlbWVudG8sIHBvciBlamVtcGxvIGVsIHJlbGxlbm8gZGUgdW4gcHVudG8KKiBgbGluZXR5cGVgIG1vZGlmaWNhIGVsIHRpcG8gZGUgbMOtbmVhIChwdW50ZWFkYSwgY29udGludWEsIGNvbiBndWlvbmVzLCBldGMuKQoqIGBwY2hgIG1vZGlmaWNhIGVsIHRhbWHDsW8gZGVsIHB1bnRvCiogYHNpemVgIG1vZGlmaWNhIGVsIHRhbWHDsW8gZGUgbG9zIGVsZW1lbnRvcyAocG9yIGVqZW1wbG8gZWwgdGFtYcOxbyBkZSBwdW50b3MgbyBlbCBncm9zb3IgZGUgbMOtbmVhcykKKiBgYWxwaGFgIG1vZGlmaWNhIGxhIHRyYW5zcGFyZW5jaWEgZGUgbG9zIGVsZW1lbnRvcyAoMSA9IG9wYWNvLCAwID0gdHJhbnNwYXJlbnRlKQoqIGBzaGFwZWAgbW9kaWZpY2EgZWwgdGlwbyBkZSBwdW50byAoY8OtcmN1bG9zLCBjdWFkcmFkb3MsIHRyacOhbmd1bG9zLCBldGMuKQoKRWwgKm1hcGVvKiBlbnRyZSB1bmEgdmFyaWFibGUgeSB1biBwYXLDoW1ldHJvIGRlIGdlb21ldHLDrWEgc2UgaGFjZSBhIHRyYXbDqXMgZGUgdW5hICoqZXNjYWxhKiouIExhIGVzY2FsYSBkZSBjb2xvcmVzIGVzIGxvIHF1ZSBkZWZpbmUsIHBvciBlamVtcGxvLCBxdWUgbG9zIHB1bnRvcyBkb25kZSBsYSB2YXJpYWJsZSBgdGlwb2AgdG9tYSBlbCB2YWxvciBgIk1heGltYSJgIHZhbiBhIHRlbmVyIGVsIGNvbG9yIHJvc2EgKDxzcGFuIHN0eWxlPSJjb2xvcjojRjc3RDc1Ij4mIzk2Nzk7PC9zcGFuPiksIGRvbmRlIHRvbWEgZWwgdmFsb3IgYCJNaW5pbWEiYCwgY2VsZXN0ZSAoPHNwYW4gc3R5bGU9ImNvbG9yOiM2MTljZmYiPiYjOTY3OTs8L3NwYW4+KSwgZXRjLi4uCgo6Ojogey5hbGVydCAuYWxlcnQtc3VjY2Vzc30KKipNb2RpZmljYXIgZWxlbWVudG9zIHV0aWxpemFuZG8gdW4gdmFsb3Igw7puaWNvKioKCkVzIHBvc2libGUgcXVlIGVuIGFsZ8O6biBtb21lbnRvIG5lY2VzaXRlcyBjYW1iaWFyIGxhIGFwYXJpZW5jaWEgZGUgbG9zIGVsZW1lbnRvcyBvIGdlb21ldHLDrWFzIGluZGVwZW5kaWVudGVtZW50ZSBkZSBsYXMgdmFyaWFibGVzIGRlIHR1IGRhdGEuZnJhbWUuIFBvciBlamVtcGxvIHBvZHLDrWFzIHF1ZXJlciBxdWUgdG9kb3MgbG9zIHB1bnRvcyBzZWFuIGRlIHVuIMO6bmljbyBjb2xvcjogcm9qb3MuIEVuIGVzdGUgY2FzbyBgZ2VvbV9wb2ludChhZXMoY29sb3IgPSAicmVkIikpYCBubyB2YSBhIGZ1bmNpb25hciAtb2pvIHF1ZSBsb3MgY29sb3JlcyB2YW4gZW4gaW5nbMOpcy0uIExvIHF1ZSBlc2UgY8OzZGlnbyBkaWNlIGVzIHF1ZSBtYXBlZSBlbCBwYXLDoW1ldHJvIGdlb23DqXRyaWNvICJjb2xvciIgYSB1bmEgdmFyaWFibGUgcXVlIGNvbnRpZW5lIGVsIHZhbG9yIGAicmVkImAgcGFyYSB0b2RhcyBsYXMgZmlsYXMuIEVsIG1hcGVvIHNlIGhhY2UgYSB0cmF2w6lzIGRlIGxhIGVzY2FsYSwgcXVlIHZhIGEgYXNpZ25hcmxlIHVuIHZhbG9yIChyb3NhIDxzcGFuIHN0eWxlPSJjb2xvcjojRjc3RDc1Ij4mIzk2Nzk7PC9zcGFuPikgYSBsb3MgcHVudG9zIGNvcnJlc3BvbmRpZW50ZXMgYWwgdmFsb3IgYCJyZWQiYC4KCkFob3JhIHF1ZSBubyBub3MgaW50ZXJlc2EgKm1hcGVhciogZWwgY29sb3IgYSB1bmEgdmFyaWFibGUsIHBvZGVtb3MgbW92ZXIgZXNlIGFyZ3VtZW50byAqKmFmdWVyYSoqIGRlIGxhIGZ1bmNpw7NuIGBhZXMoKWA6IGBnZW9tX3BvaW50KGNvbG9yID0gInJlZCIpYC4gCjo6OiAKCiMjIFJlbGFjacOzbiBlbnRyZSB2YXJpYWJsZXMKCk11Y2hhcyB2ZWNlcyBubyBlcyBzdWZpY2llbnRlIGNvbiBtaXJhciBsb3MgZGF0b3MgY3J1ZG9zIHBhcmEgaWRlbnRpZmljYXIgbGEgcmVsYWNpw7NuIGVudHJlIGxhcyB2YXJpYWJsZXM7IGVzIG5lY2VzYXJpbyB1c2FyIGFsZ3VuYSB0cmFuc2Zvcm1hY2nDs24gZXN0YWTDrXN0aWNhIHF1ZSByZXNhbHRlIGVzYXMgcmVsYWNpb25lcywgeWEgc2VhIGFqdXN0YW5kbyB1bmEgcmVjdGEgbyBjYWxjdWxhbmRvIHByb21lZGlvcy4gCgpQYXJhIGFsZ3VuYSB0cmFuc2Zvcm1hY2lvbmVzIGVzdGFkw61zdGljYXMgY29tdW5lcywge2dncGxvdDJ9IHRpZW5lIGdlb21zIHlhIHByb2dyYW1hZG9zLCBwZXJvIG11Y2hhcyB2ZWNlcyBlcyBwb3NpYmxlIHF1ZSBuZWNlc2l0ZW1vcyBtYW5pcHVsYXIgbG9zIGRhdG9zIGFudGVzIGRlIHBvZGVyIGhhY2VyIHVuIGdyw6FmaWNvLiBBIHZlY2VzIGVzYSBtYW5pcHVsYWNpw7NuIHNlcsOhIGNvbXBsZWphIHkgZW50b25jZXMgcGFyYSBubyByZXBldGlyIGVsIGPDoWxjdWxvIG11Y2hhcyB2ZWNlcywgZ3VhcmRhcmVtb3MgbG9zIGRhdG9zIG1vZGlmaWNhZG9zIGVuIHVuYSBudWV2YSB2YXJpYWJsZS4gUGVybyB0YW1iacOpbiBwb2RlbW9zICplbmNhZGVuYXIqIGxhIG1hbmlwdWxhY2nDs24gZGUgbG9zIGRhdG9zIHkgZWwgZ3LDoWZpY28gcmVzdWx0YW50ZS4KClBvciBlamVtcGxvLCBjYWxjdWxlbW9zIGxhIHRlbXBlcmF0dXJhIG1lZGlhIG1lbnN1YWwgcGFyYSBjYWRhIHRpcG8geSBsdWdhciB1c2FuZG8gW2BkcGx5cmBdKDA1LWRwbHlyLUkuaHRtbCkgeSBsdWVnbyBncmFmaXF1ZW1vcyBsYSBgdF9tZW5zdWFsYCBhIGxvcyBsYXJnbyBkZSBsb3MgYG1lc2VzYDoKCmBgYHtyfQpiYXJpbG9jaGUgJT4lIAogIGdyb3VwX2J5KHRpcG8sIGx1Z2FyLCBtZXMgPSBsdWJyaWRhdGU6OmZsb29yX2RhdGUoRmVjaGEsIHVuaXQgPSAibW9udGgiKSkgJT4lIAogIHN1bW1hcmlzZSh0X21lbnN1YWwgPSBtZWFuKHZhbG9yLCBuYS5ybSA9IFRSVUUpKSAlPiUgCiAgZ2dwbG90KGFlcyhtZXMsIHRfbWVuc3VhbCkpICsgICAgIyBBY8OhIHNlIGFjYWJhbiBsb3MgJT4lIHkgY29taWVuemFuIGxvcyAiKyIKICBnZW9tX3BvaW50KGFlcyhjb2xvciA9IHRpcG8pKQpgYGAKCjo6OiB7LmFsZXJ0IC5hbGVydC1zdWNjZXNzfQoKVGFsIHZleiBub3Rhc3RlIHF1ZSBhZ3JlZ2Ftb3MgdW5hIGZ1bmNpw7NuIChgbHVicmlkYXRlOjpmbG9vcl9kYXRlKClgKSBwYXJhIG9idGVuZXIgZWwgbWVzIGRlIGxhIHZhcmlhYmxlIGBGZWNoYWAuIExhIGZ1bmNpw7NuIGVzIGRlbCBwYXF1ZXRlIHtsdWJyaWRhdGV9IHF1ZSB2ZW1vcyBlbiBtw6FzIGRldGFsbGUgW2Fjw6FdKDA5LWx1YnJpZGF0ZS5odG1sKSwgeSBsbyBxdWUgaGFjZSBlcyByZWRvbmRlYXIgbGEgZmVjaGEgZW4gZXN0ZSBjYXNvIGFsIG1lcy4gRXN0byBlcyBuZWNlc2FyaW8gcG9ycXVlIHlhIG5vIG5vcyBpbnRlcmVzYSBsYSBpbmZvcm1hY2nDs24gZGUgbG9zIGTDrWFzIHBhcmEgY2FsY3VsYXIgdW4gcHJvbWVkaW8gbWVuc3VhbC4gVGFtYmnDqW4gcG9kcsOtYW1vcyBoYWJlciBjYWxjdWxhZG8gdW4gcHJvbWVkaW8gYW51YWwgeSBlbiBlc2UgY2FzbyB1c2FyIGBmbG9vcl9kYXRlKEZlY2hhLCB1bml0ID0gInllYXIpYC4KCjo6OgoKRXN0byBlcyBwb3NpYmxlIGdyYWNpYXMgYWwgb3BlcmFkb3IgYCU+JWAgcXVlIGxlICpwYXNhKiBlbCByZXN1bHRhZG8gZGUgYHN1bW1hcmlzZSgpYCBhIGxhIGZ1bmNpw7NuIGBnZ3Bsb3QoKWAuIFkgZXN0ZSByZXN1bHRhZG8gbm8gZXMgbmkgbcOhcyBuaSBtZW5vcyBxdWUgZWwgZGF0YS5mcmFtZSBxdWUgbmVjZXNpdGFtb3MgcGFyYSBoYWNlciBudWVzdHJvIGdyw6FmaWNvLiBFcyBpbXBvcnRhbnRlIG5vdGFyIHF1ZSB1bmEgdmV6IHF1ZSBjb21lbnphbW9zIGVsIGdyw6FmaWNvIHlhICoqbm8qKiBzZSBwdWVkZSB1c2FyIGVsIG9wZXJhZG9yIGAlPiVgIHkgbGFzIGNhcGFzIGRlbCBncsOhZmljbyBzZSAqc3VtYW4qIGNvbW8gc2llbXByZSBjb24gYCtgLgoKRXN0ZSBncsOhZmljbyBlbnRvbmNlcyBwYXJlY2UgbW9zdHJhciBsYSBldm9sdWNpw7NuIGRlIGxhIHRlbXBlcmF0dXJhIGEgbG8gbGFyZ28gZGVsIHRpZW1wbyBkZSB1bmEgbWFuZXJhIG3DoXMgbGltcGlhLiBQZXJvIHNlcsOtYSBpbnRlcmVzYW50ZSB2ZXIgZXNhIGV2b2x1Y2nDs24gbyByZWxhY2nDs24gZW4gZWwgdGllbXBvIG3DoXMgZXhwbMOtY2l0YW1lbnRlIGFncmVnYW5kbyB1bmEgbnVldmEgY2FwYSBjb24gYGdlb21fc21vb3RoKClgLgoKYGBge3J9CmJhcmlsb2NoZSAlPiUgCiAgZ3JvdXBfYnkodGlwbywgbHVnYXIsIG1lcyA9IGx1YnJpZGF0ZTo6Zmxvb3JfZGF0ZShGZWNoYSwgdW5pdCA9ICJtb250aCIpKSAlPiUgCiAgc3VtbWFyaXNlKHRfbWVuc3VhbCA9IG1lYW4odmFsb3IsIG5hLnJtID0gVFJVRSkpICU+JSAKICBnZ3Bsb3QoYWVzKG1lcywgdF9tZW5zdWFsKSkgKyAgIAogIGdlb21fcG9pbnQoYWVzKGNvbG9yID0gdGlwbykpICsKICBnZW9tX3Ntb290aCgpCmBgYAoKQ29tbyBkaWNlIGVuIGVsIG1lbnNhamUsIHBvciBkZWZlY3RvIGBnZW9tX3Ntb290aCgpYCBzdWF2aXphIGxvcyBkYXRvcyB1c2FuZG8gZWwgbcOpdG9kbyAqbG9lc3MqIChyZWdyZXNpw7NuIGxpbmVhbCBsb2NhbCkgY3VhbmRvIGhheSBtZW5vcyBkZSAxMDAwIGRhdG9zLiBTZWd1cmFtZW50ZSB2YSBhIHNlciBtdXkgY29tw7puIHF1ZSBxdWllcmFzIGFqdXN0YXIgdW5hIHJlZ3Jlc2nDs24gbGluZWFsIGdsb2JhbC4gRW4gZXNlIGNhc28sIGhheSBxdWUgcG9uZXIgYG1ldGhvZCA9ICJsbSJgOgoKYGBge3J9CmJhcmlsb2NoZSAlPiUgCiAgZ3JvdXBfYnkodGlwbywgbHVnYXIsIG1lcyA9IGx1YnJpZGF0ZTo6Zmxvb3JfZGF0ZShGZWNoYSwgdW5pdCA9ICJtb250aCIpKSAlPiUgCiAgc3VtbWFyaXNlKHRfbWVuc3VhbCA9IG1lYW4odmFsb3IsIG5hLnJtID0gVFJVRSkpICU+JSAKICBnZ3Bsb3QoYWVzKG1lcywgdF9tZW5zdWFsKSkgKyAgIAogIGdlb21fcG9pbnQoYWVzKGNvbG9yID0gdGlwbykpICsKICBnZW9tX3Ntb290aChtZXRob2QgPSAibG0iKQpgYGAKCkVuIGdyaXMgbm9zIG11ZXN0cmEgZWwgaW50ZXJ2YWxvIGRlIGNvbmZpYW56YSBhbCByZWRlZG9yIGRlIGVzdGUgc3Vhdml6YWRvLgoKQ8OzbW8gY3VhbHF1aWVyIGdlb20sIHBvZGVtb3MgbW9kaWZpY2FyIGVsIGNvbG9yLCBlbCBncm9zb3IgZGUgbGEgbMOtbmVhIHkgY2FzaSBjdWFscXVpZXIgY29zYSBxdWUgc2UgdGUgb2N1cnJhLgoKOjo6IHsuYWxlcnQgLmFsZXJ0LWluZm99CioqVGVyY2VyIGRlc2Fmw61vKioKCk1vZGlmaWPDoSBlbCBzaWd1aWVudGUgY8OzZGlnbyBwYXJhIG9idGVuZXIgZWwgZ3LDoWZpY28gcXVlIHNlIG11ZXN0cmEgbcOhcyBhYmFqby4KCmBgYHtyIGV2YWw9RkFMU0V9CmJhcmlsb2NoZSAlPiUgCiAgZ3JvdXBfYnkoX19fX19fLCBsdWdhciwgbWVzID0gbHVicmlkYXRlOjpmbG9vcl9kYXRlKEZlY2hhLCB1bml0ID0gIm1vbnRoIikpICU+JSAKICBzdW1tYXJpc2UodF9tZW5zdWFsID0gbWVhbih2YWxvciwgbmEucm0gPSBUUlVFKSkgJT4lIAogIGdncGxvdChhZXMobWVzLCBfX19fX19fKSkgKyAgIAogIGdlb21fcG9pbnQoYWVzKGNvbG9yID0gdGlwbyksIHNoYXBlID0gX19fXywgc2l6ZSA9IDIpICsKICBnZW9tX3Ntb290aChjb2xvciA9IHRpcG8sIG1ldGhvZCA9ICJsbSIpCmBgYAoKYGBge3IgZWNobz1GQUxTRSwgbWVzc2FnZT1GQUxTRSwgd2FybmluZz1GQUxTRX0KYmFyaWxvY2hlICU+JSAKICBncm91cF9ieSh0aXBvLCBsdWdhciwgbWVzID0gbHVicmlkYXRlOjpmbG9vcl9kYXRlKEZlY2hhLCB1bml0ID0gIm1vbnRoIikpICU+JSAKICBzdW1tYXJpc2UodF9tZW5zdWFsID0gbWVhbih2YWxvciwgbmEucm0gPSBUUlVFKSkgJT4lIAogIGdncGxvdChhZXMobWVzLCB0X21lbnN1YWwpKSArICAgCiAgZ2VvbV9wb2ludChhZXMoY29sb3IgPSB0aXBvKSwgc2hhcGUgPSAxNywgc2l6ZSA9IDIpICsKICBnZW9tX3Ntb290aChhZXMoY29sb3IgPSB0aXBvKSwgbWV0aG9kID0gImxtIikKYGBgCjo6OiAKCiMjIEdyYWZpY2FuZG8gZW4gcGFuZWxlcwoKVmltb3MgcXVlIGVzIHBvc2libGUgZ3JhZmljYXIgbcOhcyBkZSBkb3MgdmFyaWFibGVzIGVuIHVuIGdyw6FmaWNvIG1hcGVhbmRvIHVuYSB2YXJpYWJsZSBhbCBgY29sb3JgIG8gcG9yIGVqZW1wbG8gZWwgdGlwbyBkZSBsw61uZWEgbyBgbGluZXR5cGVgIHBhcmEgb2JzZXJ2YXIgbGEgcmVsYWNpw7NuIGVudHJlIGxhcyAzIHZhcmlhYmxlcy4gVGFtYmnDqW4gcG9kcsOtYW1vcyBoYWJlciBpbnRlbnRhbmRvIHJlc29sdmVyIGVsIHByb2JsZW1hIGdlbmVyYW5kbyB1biBncsOhZmljbyBwb3IgY2FkYSBjb2xvciBmaWx0cmFuZG8gbGFzIG9ic2VydmFjaW9uZXMgY29ycmVzcG9uZGllbnRlcy4KCgpgYGB7cn0KYmFyaWxvY2hlICU+JSAKICBncm91cF9ieSh0aXBvLCBsdWdhciwgbWVzID0gbHVicmlkYXRlOjpmbG9vcl9kYXRlKEZlY2hhLCB1bml0ID0gIm1vbnRoIikpICU+JSAKICBzdW1tYXJpc2UodF9tZW5zdWFsID0gbWVhbih2YWxvciwgbmEucm0gPSBUUlVFKSkgJT4lIAogIGZpbHRlcih0aXBvID09ICJNYXhpbWEiKSAlPiUgCiAgZ2dwbG90KGFlcyhtZXMsIHRfbWVuc3VhbCkpICsgICAKICBnZW9tX3BvaW50KGFlcyhjb2xvciA9IHRpcG8pKQpgYGAKClBlcm8gc2Vyw61hIG11Y2jDrXNpbW8gdHJhYmFqbyBzaSB0ZW5lbW9zIHF1ZSBoYWNlciBlc3RvIHBhcmEgY2FkYSB1bmEgZGUgbGFzIHBvc2libGVzIGNhdGVnb3LDrWFzIGRlLiBMYSBidWVuYSBub3RpY2lhIGVzIHF1ZSB7Z2dwbG90Mn0gdGllbmUgdW4gcGFyIGRlIGZ1bmNpb25lcyBqdXN0byBwYXJhIHJlc29sdmVyIGVzdGUgcHJvYmxlbWE6CgpgYGB7cn0KYmFyaWxvY2hlICU+JSAKICBncm91cF9ieSh0aXBvLCBsdWdhciwgbWVzID0gbHVicmlkYXRlOjpmbG9vcl9kYXRlKEZlY2hhLCB1bml0ID0gIm1vbnRoIikpICU+JSAKICBzdW1tYXJpc2UodF9tZW5zdWFsID0gbWVhbih2YWxvciwgbmEucm0gPSBUUlVFKSkgJT4lIAogIGdncGxvdChhZXMobWVzLCB0X21lbnN1YWwpKSArICAgCiAgZ2VvbV9wb2ludChhZXMoY29sb3IgPSB0aXBvKSkgKwogIGZhY2V0X3dyYXAofnRpcG8pCmBgYAoKRXN0YSBudWV2YSBjYXBhIGNvbiBgZmFjZXRfd3JhcCgpYCBkaXZpZGUgYWwgZ3LDoWZpY28gaW5pY2lhbCBlbiAzIHBhbmVsZXMgbyBmYWNldHMsIHVubyBwb3IgY2FkYSBjb2xvciAoeSBjYWRhIHRpcG8gZGUgdGVtcGVyYXR1cmEpLiBFc3RhIGZ1bmNpw7NuIHJlcXVpZXJlIHNhYmVyIHF1ZSB2YXJpYWJsZSBzZXLDoSBsYSByZXNwb25zYWJsZSBkZSBzZXBhcmFyIGxvcyBwYW5lbGVzIHkgcGFyYSBlc28gc2UgdXNhIGxhIG5vdGFjacOzbiBkZSBmdW5jaW9uZXMgZGUgUjogYH50aXBvYC4gRXN0byBzZSBsZWUgY29tbyBnZW5lcmFyIHBhbmVsZXMg4oCcZW4gZnVuY2nDs24gZGVsIHRpcG8gKGRlIHRlbXBlcmF0dXJhKeKAnS4KCsK/WSBzaSBxdWlzacOpcmFtb3MgZ2VuZXJhciBwYW5lbGVzIGEgcGFydGlyIGRlIDIgdmFyaWFibGVzPyBQYXJhIGVzbyBleGlzdGUgYGZhY2V0X2dyaWQoKWAuIEVuIGVzdGUgZ3LDoWZpY28gZ2VuZXJhbW9zIHBhbmVsZXMgdmllbmRvIGxhIOKAnHJlbGFjacOzbiBlbnRyZSBlbCB0aXBvIHkgZWwgbHVnYXLigJ0gZG9uZGUgc2UgbWlkacOzIGxhIHRlbXBlcmF0dXJhIHkgcG9yIGVqZW1wbG8gZW4gZWwgcHJpbWVyIHBhbmVsIGFycmliYSBhIGxhIGl6cXVpZXJkYSBwb2RyZW1vcyBvYnNlcnZhciBsYSB0ZW1wZXJhdHVyYSBtw6F4aW1hIGVuIGVsIGFicmlnby4gRW4gZXN0ZSBjYXNvIG1hcGVhciBlbCB0aXBvIGRlIHRlbXBlcmF0dXJhIGFsIGNvbG9yIGRlbG9zIHB1bnRvcyBubyBwYXJlY2Ugc2VyIG5lY2VzYXJpbyB5YSBxdWUgY2FkYSBjb2x1bW5hIHlhIG5vcyBwZXJtaXRlIGlkZW50aWZpY2FyIGVzbywgc2luIGVtYmFyZ28gZW4gYWxndW5vcyBjYXNvcyBheXVkYSBhIGxlZXIgZWwgZ3LDoWZpY28gbcOhcyByw6FwaWRvLgoKRW4gZXN0ZSBjYXNvIHRhbWJpw6luIG5vdGFtb3MgcXVlIGVzdGEgYmFzZSBkZSBkYXRvcyBlc3TDoSBwb2JsYWRhIGRlIGRhdG9zIGZhbHRhbnRlcyB5YSBxdWUgdmFyaW9zIHBhbmVsZXMgcXVlZGFuIHZhY8Otb3MuIAoKYGBge3J9CmJhcmlsb2NoZSAlPiUgCiAgZ3JvdXBfYnkodGlwbywgbHVnYXIsIG1lcyA9IGx1YnJpZGF0ZTo6Zmxvb3JfZGF0ZShGZWNoYSwgdW5pdCA9ICJtb250aCIpKSAlPiUgCiAgc3VtbWFyaXNlKHRfbWVuc3VhbCA9IG1lYW4odmFsb3IsIG5hLnJtID0gVFJVRSkpICU+JSAKICBnZ3Bsb3QoYWVzKG1lcywgdF9tZW5zdWFsKSkgKyAgIAogIGdlb21fcG9pbnQoYWVzKGNvbG9yID0gdGlwbykpICsKICBmYWNldF9ncmlkKGx1Z2FyIH4gdGlwbykKYGBgCgo6Ojogey5hbGVydCAuYWxlcnQtaW5mb30KKipDdWFydG8gZGVzYWbDrW8qKgoKQWhvcmEgZXMgdHUgdHVybm8sIGludGVudMOhIHJlcHJvZHVjaXIgZWwgc2lndWllbnRlIGdyw6FmaWNvIGNvbiB0b2RvIGxvIHZpc3RvIGFycmliYS4KCmBgYHtyIGVjaG89RkFMU0UsIG1lc3NhZ2U9RkFMU0UsIHdhcm5pbmc9RkFMU0V9CmJhcmlsb2NoZSAlPiUgCiAgbmEub21pdCgpICU+JSAKICBncm91cF9ieSh0aXBvLCBsdWdhciwgbWVzID0gbHVicmlkYXRlOjpmbG9vcl9kYXRlKEZlY2hhLCB1bml0ID0gIm1vbnRoIikpICU+JSAKICBzdW1tYXJpc2UodF9tZW5zdWFsID0gbWVhbih2YWxvciwgbmEucm0gPSBUUlVFKSkgJT4lIAogIGdncGxvdChhZXMobWVzLCB0X21lbnN1YWwpKSArICAgCiAgZ2VvbV9saW5lKGFlcyhjb2xvciA9IHRpcG8pKSArCiAgZ2VvbV9wb2ludChhZXMoY29sb3IgPSB0aXBvKSkgKwogIGZhY2V0X2dyaWQodGlwbyB+IGx1Z2FyKQpgYGAKCihQc3NzISBQcm9iw6EgY2FtYmlhciBlbCBvcmRlbiBlbiBgZmFjZXRfZ3JpZCgpYCkKCjo6OgoKUXVlZGFuIG11Y2hhcyBvdHJhcyBnZW9tZXRyw61hcyBxdWUgbm8gZGVzY3JpYmltb3MsIHNpIHRlIGludGVyZXNhIHBvciBlamVtcGxvIGFwcmVuZGVyIGEgaGFjZXIgdW4gZ3LDoWZpY28gZGUgYmFycmFzIG8gdW4gYm94cGxvdCBwb2TDqXMgcmV2aXNhciBlc3RlIFtlcGlzb2Rpb10oaHR0cHM6Ly9wYW9jb3JyYWxlcy5naXRodWIuaW8vZGVFeGNlbGFSLzA3LWdyYWZpY29zLUlJLmh0bWwpLgoKPGRpdiBjbGFzcz0iYnRuLWdyb3VwIiByb2xlPSJncm91cCIgYXJpYS1sYWJlbD0iTmF2ZWdhY2nDs24iPgogIDxhIGhyZWY9ICIwNi1kcGx5ci10aWR5ci1JSS5odG1sIiBjbGFzcyA9ICJidG4gYnRuLXByaW1hcnkiPkFudGVyaW9yPC9hPgogIDxhIGhyZWY9ICIwOC1sdWJyaWRhdGUuaHRtbCIgY2xhc3MgPSAiYnRuIGJ0bi1wcmltYXJ5Ij5TaWd1aWVudGU8L2E+CjwvZGl2Pgo=</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("07-graficos-I.Rmd");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
